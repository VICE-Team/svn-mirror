2005-12-22  Andreas Boose  <viceteam@t-online.de>

	* Version 1.18.6.

	* vicii/vicii-mem.c (d011_store): A bad line can also be
	triggered by setting DEN bit in line 48.

2005-12-22  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/uiconsole.c, uisnapshot.c, uimediafile.c:
	Replaced fixed filter array with a malloced one to avoid
	crashes.

	* joystick.c (joystick_latch_matrix): Uses first byte of
	joystick array to dtermine, which port was changed and leave
	the other unchanged. This is needed for netplay.
	Removed unused function joystick_get_value_absolute().
	(joystick_set_value_*) These function store the changed
	joyport in the first byte of the array (which was unused).

	* network.c (network_send_buffer, network_recv_buffer): New
	functions to send and receive network buffer with
	fragmentation support. Every send and recv is done here now.

	* translate.c|h: Removed unused network.c translations.

2005-12-20  Andreas Boose  <viceteam@t-online.de>

	* Version 1.18.5.

	* vicii/vicii-badline.c (line_becomes_bad): If forced DMA
	switches to display state, delay the switch by one cycle.

	* plus4/ted-badline.c (ted_badline_check_state): Splitted into
	several functions like the vicii counterpart.

	* vicii/vicii-sprites.c: Added credits to sprite crunch table.

	* c64/plus60k.c, c64/c64_256k.c: Fixed format warning.

2005-12-20  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/res.rc: Fixed a dutch translation and some
	mediafile extensions.

	* arch/win32/uimediafile.c: Fixed some mediafile extensions.

	* c64/c64_256k.h: Fixed a prototype.

2005-12-19  Andreas Matthies  <andreas.matthies@gmx.net>

	* tape/tap.c (tap_cbm_read_block_once): Removed short block
	condition, size is set by the bytes read to detect short
	headers.
	(tap_cbm_read_header): Increased maximum size from 193 to 255
	to detect images with longer header (which also exist).

2005-12-19  Andreas Boose  <viceteam@t-online.de>

	* Version 1.18.4.

	* vicii/vicii-draw.c (_draw_idle, draw_idle_foreground): Idle
	data is 0 if vertical blank flip flop is set.

	* plus4/ted-draw.c (_draw_idle, draw_idle_foreground): Changed
	likewise.

	* c64/plus60k.h [plus60k_base]: Fixed prototype.

	* arch/win32/uimediafile.c (init_mediafile_dialog): Removed
	unused variable.

2005-12-18  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/uiconsole.c, arch/win32/uimediafile.c,
	arch/win32/uisnapshot.c: Better filter construction to avoid
	the wrong filters. Patch by iAN CooG <ian7102@libero.it>.

2005-12-18  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* zfile.c: Fixed a typo "know" vs. "now". Patch by iAN CooG
	<ian7102@libero.it>.

2005-12-18  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* petcat.c: Make petcat output its help information
	(--help, -v) on stdout, not stderr. Patch by iAN CooG
	<ian7102@libero.it>.

2005-12-18  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* imagecontents/diskcontents-block.c: If the directory track
	is linked in a loop, do not destroy all contents until, but
	show everything once. This seems to be a more reasonable way
	to handle this. Patch provided by iAN CooG
	<ian7102@libero.it>.

2005-12-18  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/res.rc: Updated the win32
	mediafile dialog.

2005-12-18  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* translate.c: Updated a dutch translation.

2005-12-18  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* c64/c64_256k.c, c64/plus60k.c: Fixed the warnings.

2005-12-18  Andreas Boose  <viceteam@t-online.de>

	* Version 1.18.3.

	* c1541.c (info_cmd): Fixed some bugs.

	* diskimage/fsimage.h, diskimage.h, diskimage/fsimage-probe.c,
	diskimage/fsimage.c: Moved error info into fsimage struct.

	* diskimage/diskimage.c, diskimage.h (disk_image_create,
	disk_image_destroy): New function.

	* attach.c, c1541.c: Use new functions.

	* vdrive/vdrive-command.c: Removed cruft.

	* event.c (event_image_append): Fixed some cosmetic warning.

2005-12-18  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/res.rc,
	arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/resdialogs.txt,
	arch/win32/respet.rc, arch/win32/resplus4.rc,
	arch/win32/resstrings.txt, arch/win32/resvic20.rc,
	arch/win32/signals.c, arch/win32/uinetwork.c,
	c64/cart/c64cart.c, network.c, translate.c,
	translate.h: Added previously untranslated items.

2005-12-17  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* c64/patchrom.c: the attached patch fixes a one-byte problem
	with the SX64 kernal on the C64. That is, if you start "x64
	-kernalrev sx", one byte was wrong. This issue was reported
	(with a patch) on Mon, 13 Sep 2004 23:08:25 +0200 by iAN CooG
	<ian7102@libero.it>.

2005-12-16  Michael Klein  <michael.klein@puffin.lb.shuttle.de>

	* fliplist.c, fliplist.h: Add opaque typedef fliplist_t
	* and try to be const correct.

	* console.h: fix typo

2005-12-16  Andreas Matthies  <andreas.matthies@gmx.net>

	* c64/c64_256k.c, c64/georam.c, c64/plus60k.c: Fixed warnings.

	* screenshot.c (screenshot_stop_recording): Don't free the
	reopen* pointers, they are needed in screenshot_try_reopen.

2005-12-16  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/beos/c64ui.cc, arch/beos/constants.h,
	arch/beos/vicemenu.cc, arch/msdos/Makefile.am,
	arch/msdos/c64ui.c, arch/msdos/uic64_256k.c,
	arch/msdos/uic64_256k.h, arch/os2/dialogs/menubar.c,
	arch/os2/dialogs/menubar.h, arch/os2/dialogs/menubar.rc,
	arch/os2/vac++/incl/c64.icc, arch/riscos/uiconfig.c,
	arch/riscos/uiconfig.c, arch/riscos/uiconfig.h,
	arch/riscos/uihelp.c, arch/riscos/uisharedef.h,
	arch/unix/Makefile.am, arch/unix/c64ui.c,
	arch/unix/uic64_256k.c, arch/unix/uic64_256k.h,
	arch/win32/Makefile.am, arch/win32/arch.dsp,
	arch/win32/c64.dsp, arch/win32/c64ui.c,
	arch/win32/resc64.rc, arch/win32/resc64_256k.rc,
	arch/win32/resdialogs.txt, arch/win32/resmenu.txt,
	arch/win32/resstrings.txt, arch/win32/uic64_256k.c,
	arch/win32/uic64_256k.h, arch/win32/x64.dsp,
	c64/Makefile.am, c64/c64.c, c64/c64_256k.c,
	c64/c64_256k.h, c64/c64cia2.c, c64/c64io.c,
	c64/c64mem.c, c64/c64memlimit.c, c64/c64memlimit.h,
	c64/plus60k.c, translate.c, translate.h: Added c64 256k
	expansion support.

	* c128/c128.c: Added some dummy functions to cope with the c64
	256k expansion.

2005-12-12  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* gfxoutputdrv/gifdrv.c, gfxoutputdrv/iffdrv.c,
	gfxoutputdrv/jpegdrv.c, gfxoutputdrv/pcxdrv.c,
	gfxoutputdrv/ppmdrv.c: Fixed the warnings.

2005-12-11  Andreas Dehmel  <zarquon@t-online.de>

	* network.c: fixed compilation error when HAVE_NETWORK not
	defined

2005-12-11  Andreas Boose  <viceteam@t-online.de>

	* Version 1.18.2.

2005-12-10  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/ui.c (ui_pause_emulation): Disable pause if
	network is connected as the trap function is already used
	by the network code.
	(window_proc): Added suspension for two more windows
	messages WM_SYSCOMMAND and WM_NCLBUTTONDOWN.

	* network.c, network.h (network_suspend): New function that
	sends a '0' to the remote host as a suspend notifier.
	(network_hook): Calls vsync_suspend_speed_eval if it receives
	the notifier and displays a message.

	* vsync.c (vsync_suspend_speed_eval): Call network_suspend.

2005-12-08  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/res<machine>.rc, : Added "Always on Top" menu
	item.

	* arch/win32/ui-resources.c: Added resource "AlwaysOnTop".

	* arch/win32/ui.c, ui.h: New function ui_set_alwaysontop.

2005-12-06  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/msdos/uiscreenshot.c, arch/win32/gfxoutputdrv.dsp,
	gfxoutputdrv/Makefile.am, gfxoutputdrv/gfxoutput.c: Added
	support for the new screenshot formats.

	* gfxoutputdrv/iffdrv.c, gfxoutputdrv/iffdrv.h: Added IFF
	screenshot support.

	* gfxoutputdrv/jpegdrv.c, gfxoutputdrv/jpegdrv.h: Added JPEG
	screenshot support.

	* gfxoutputdrv/pcxdrv.c, gfxoutputdrv/pcxdrv.h: Added PCX
	screenshot support.

	* gfxoutputdrv/ppmdrv.c, gfxoutputdrv/ppmdrv.h: Added PPM
	screenshot support.

	* screenshot.c, screenshot.h: Added a new screenshot mode
	'SCREENSHOT_MODE_RGB24'.

	* util.c, util.h: Added some new endian conversion routines.

2005-12-03  Andreas Matthies  <andreas.matthies@gmx.net>

	* attach.c (file_system_attach_disk, file_system_detach_disk):
	Implemented event recording for netplay.

	* tape.c (tape_image_attach, tape_image_detach): Likewise.

	* event.c: Made event_image_append ready for network events.
	(event_record_attach_image): Generalized for network events.
	(event_record): Moved test for network connection here.
	(event_playback_event_list): Added attach events.
	Made event_init_image_list and event_destroy_image_list
	public.

	* joystick.c, keyboard.c: Removed test for network connection.

	* machine.c (machine_trigger_reset): Don't trigger the reset
	when network is connected.

	* network.c (network_init_frame_event_list): Call
	event_init_image_list().
	(network_test_delay): Added debug logging. Changed calculation
	of frame delta. Now responsible for the destroying and
	creation of the event lists.
	(network_attach_image): New function.
	(network_hook): Added debug logging.

2005-12-03  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* c64/c64mem.c, c64/c64memlimit.c, c64/c64memlimit.h: Fixed
	an opcode execute problem with the +60k expansion.

2005-12-01  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/res.rc, resdialogs.txt: Added FFPEG settings to
	the mediafile dialog.

	* arch/win32/uimediafile.c: New functions update_ffmpeg_codecs
	and enable_ffmpeg_settings and varoius additions to connect
	FFPFEG dialog boxes with corresponding resources.
	Fixed 0-byte in filter string.

	* gfxoutputdrv/ffmpegdrv.c: New resources FFMPEGFormat,
	FFMPEGAudioCodec, FFMPEGVideoCodec. Added formatlist and lists
	of codecs that are tested to work in VICE.
	(ffmpegdrv_save) uses resources instead of geussing the format
	from the filename.
	Only one driver is registered without default file extension.
	(ffmpegdrv_shutdown): Fixed memory leak.

	* screenshot.c (screenshot_stop_recording): Fixed memory leak.

	* util.c (util_add_extension): Extension is allowed to be NULL
	now.

2005-11-29  Andreas Boose  <viceteam@t-online.de>

	* Version 1.18.1.

	* util.c, util.h (util_le_buf_to_dword): New function.

	* network.c (network_create_event_buffer,
	network_create_event_list): Use helper functions to avoid ugly
	pointer castings, use `BYTE' instead of `char'.
	(network_hook): Fixed some warnings.

	* pet/petmem.c (set_std_9tof): Fixed some warnings.

	* c64/plus60k.c (set_plus60k_base): Likewise.

	* arch/unix/x11/xaw/widgets/MultiList.c (Unselect, Extend,
	RedrawRowColumn, RedrawItem, Select, Toggle): Likewise.

	* c1541.c (attach_cmd): Likewise.

	* arch/unix/x11/vidmode.c, arch/unix/x11/vidmode.h,
	arch/unix/x11/dga1.c [vm_mode_count]: Likewise.

2005-11-29  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/msdos/uiscreenshot.c, gfxoutputdrv/Makefile.am,
	gfxoutputdrv/gfxoutput.c, gfxoutputdrv/gifdrv.c,
	gfxoutputdrv/gifdrv.h: Added gif format screenshot support.

	* arch/msdos/vsync.c: Added needed functions for netplay.

	* main.c: Added myself to the standard log startup.

2005-11-28  Andreas Matthies  <andreas.matthies@gmx.net>

	* keyboard.c (keyboard_key_released): Added missing call of
	machine_set_restore_key.

2005-11-20  Andreas Boose  <viceteam@t-online.de>

	* Version 1.18.

2005-11-19  Andreas Boose  <viceteam@t-online.de>

	* Version 1.17.7.

2005-11-18  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/os2/vac++/incl/mainsrc.icc: Added network.c and
	translate.c for proper compilation.

2005-11-17  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/c64ui.cc: Fixed typo.

	* arch/beos/ui.cc, arch/msdos/ui.c, arch/os2/ui.c,
	arch/riscos/ui.c, arch/unix/x11/gnome/x11ui.c,
	arch/unix/x11/xaw/x11ui.c, arch/win32/ui.c, uiapi.h: New
	function ui_display_statustext to display messages without
	stopping emulation. Only win32 is implemented.

	* arch/win32/uimediafile.c, uisound.c: Added fade parameter
	to ui_display_statustext call.

	* gfxoutputdrv/ffmpegdrv.c (ffmpegdrv_init_video): Get frame
	rate from machine.

	* info.c: Some additions.

	* network.c: Removed NetworkFrameDelta resource. Fixed
	network_event_record_sync_test() by calling it via trap. New
	function network_test_delay. Added some information for the
	user about network operations via ui_display_statustext.

	* vsync.c, vsync.h: New function vsync_get_refresh_frequency.

2005-11-15  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/msdos/Makefile.am, arch/msdos/menudefs.c,
	arch/msdos/uiscreenshot.c, arch/msdos/uiscreenshot.h: Added
	screenshot support to the msdos port.

2005-11-15  Marco van den Heuvel <blackystardust68@yahoo.com>

	* arch/msdos/uiplus60k.c: Fixed a typo.

	* network.c: Fixed the includes for proper msdos compilation.

2005-11-14  Marco van den Heuvel <blackystardust68@yahoo.com>

	* arch/beos/c64ui.cc, arch/beos/constants.h,
	arch/beos/vicemenu.cc, arch/msdos/uiplus60k.c,
	arch/os2/dialogs/menubar.c, arch/os2/dialogs/menubar.h,
	arch/os2/dialogs/menubar.rc, arch/unix/uiplus60k.c,
	arch/win32/resc64.rc, arch/win32/resdialogs.txt,
	arch/win32/resplus60k.rc, arch/win32/resstrings.txt,
	arch/win32/uiplus60k.c, c64/c64mem.c, c64/plus60k.c,
	c64/plus60k.h, translate.c, translate.h: Added support for the
	old version of the +60K expansion.

	* arch/win32/uijoystick.c: Made the windows joystick swap
	behave like all other platforms.

	* info.c: Changed my own info a bit.

2005-11-13  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/Makefile.am, arch.dsp: Added new files.

	* arch/win32/res.rc, resdialogs.txt: Added (english) dialog
	for network settings.

	* arch/win32/resc64.rc, resmenu.txt, ui.c: Replaced network
	items with a settings item.

	* arch/win32/uinetwork.c, uinetwork.h: New files.

	* network.c, network.h: New function network_get_mode().

2005-11-12  Andreas Boose  <viceteam@t-online.de>

	* Version 1.17.6.

2005-11-08  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/resc64.rc, resmenu.txt, ui.c : New menu item
	to disconnect network.

	* arch/win32/signals.c (break64): User gets visible message
	if emulator crashes. Register SIGFPE for exception handler.

	* arch/win32/uisnapshot.c (ui_save_snapshot): Don't convert
	filter string as this is no string but a list of string pairs.
	FIXME: This may need some further work if windows archs with
	wide characters shall work with it.

	* c64/c64.c, datasette.c, event.c, init.c, joystick.c,
	keyboard.c, machine.c: Removed all HAVE_NETWORK tests. This
	is handled in network.c now.

	* network.c, network.h: Implement every public function as
	dummies if HAVE_NETWORK isn't defined.
	New function network_disconnect. Improved error handling and
	proper disconnection. Different header includes and typedefs
	for non-windows archs as suggested by Marco.

	* cia.h, riot.h, via.h, core/ciacore.c, core/riotcore.c,
	core/viacore.c: New member 'enabled' in the <chip>_context
	struct which is set by <chip>_reset and cleared by
	<chip>_disable. The overflow handler checks for enabled before
	doing anything. This should fix the 1.17 clock overflow crash.

2005-11-07  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/unix/Makefile.am, arch/unix/minix/minix-ar.sh: Added an
	'ar' wrapper for Minix-Vmd.

	* arch/unix/archdep.c: For Minix-Vmd I split up the
	default_path concat, there were too many parameters for
	Minix-Vmd.

	* arch/unix/rs232.c: Minix-Vmd doesn't have the select()
	function, so it is not used for Minix-Vmd.

	* arch/unix/x11/xaw/widgets/Directory.h: Added correct
	definition of NAME_MAX for Minix-Vmd.

	* c128/c128.c, c64/c64.c, cbm2/cbm2.c, pet/pet.c,
	plus4/plus4.c, vic20/vic20.c: The Minix-Vmd compiler doesn't
	like variable initializations with non-constant parameters,
	so I fixed that problem.

	* monitor/mon_parse.c, monitor/mon_parse.y: Fixed an alloca
	definition problem for Minix-Vmd.

	* vice.h: Undefined vfork for Minix-Vmd, it defines vfork
	itself.

2005-11-06  Andreas Boose  <viceteam@t-online.de>

	* Version 1.17.5.

2005-10-31  Andreas Matthies  <andreas.matthies@gmx.net>

	* machine.h, c128/c128.c, c64/c64.c, cbm2/cbm2.c, pet/pet.c,
	plus4/plus4.c, vic20/vic20.c: machine_has_restore_key
	splitted from machine_set_restore_key.

	* datasette.c (datasette_event_record, datasette_control):
	Handle network connection.

	* event.c (event_playback_event_list): Implemented restore
	key and datasette events.

	* joystick.c: Using new array network_joystick_value to avoid
	mixing actual and event list joystick data.

	* keyboard.c: Using new array network_keyarr and
	network_rev_keyarr to avoid mixing actual and event list
	keyboard data. Implemented restore key events.

	* machine.c (machine_shutdown): Call network_shutdown.

	* network.c: New function network_shutdown.

2005-10-30  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* Makefile.am: Fixed the 'make dist' problem for the built-in
	libpng and zlib.

2005-10-29  Andreas Boose  <viceteam@t-online.de>

	* Version 1.17.4.

	* network.c: Fixed declaration of `network_init_done'.

2005-10-29  Andreas Matthies  <andreas.matthies@gmx.net>

	* Makefile.am, arch/win32/base.dsp: Added new files network.c
	and network.h

	* arch/win32/msvc/config.h: define HAVE_NETWORK

	* arch/win32/resc64.rc, arch/win32/resmenu.txt,
	arch/win32/ui.c: Added menuitems to start server and client.

	* autostart.c (reboot_for_autostart): Fixed autostart for
	empty filenames.

	* c64/c64.c (machine_vsync_hook): Call network_hook.

	* event.c, event.h: Gereralized to handle various event lists.
	New functions event_register_event_list,
	event_playback_event_list, event_record_in_list.

	* joystick.c, joystick.h (joystick_latch_handler,
	joystick_process_latch): Handle newtork connection.
	New functions joystick_event_delayed_playback,
	joystick_register_delay.

	* init.c (init_resources): Register network resources.

	* keyboard.c, keyboard.h (keyboard_latch_handler,
	keyboard_key_pressed, keyboard_key_released): Handle network
	connection. New functions keyboard_event_delayed_playback,
	keyboard_register_delay.

	* machine.c (machine_trigger_reset): Handle network
	connection.

	* network.c, network.h: New files.

	* translate.c: Fixed definition of STB_CART in string_table
	and translation_text table.

2005-10-27  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* Makefile.am: Added built-in support for libpng and libz.

	* arch/os2/Makefile.am: Removed the references to the os/2
	specific libpng and zlib files.

	* arch/os2/lpng/LICENSE, arch/os2/lpng/png.c,
	arch/os2/lpng/png.h, arch/os2/lpng/pngconf.h,
	arch/os2/lpng/pngerror.c, arch/os2/lpng/pngget.c,
	arch/os2/lpng/pngmem.c, arch/os2/lpng/pngpread.c,
	arch/os2/lpng/pngread.c, arch/os2/lpng/pngrio.c,
	arch/os2/lpng/pngrtran.c, arch/os2/lpng/pngrutil.c,
	arch/os2/lpng/pngset.c, arch/os2/lpng/pngtrans.c,
	arch/os2/lpng/pngwio.c, arch/os2/lpng/pngwrite.c,
	arch/os2/lpng/pngwtran.c, arch/os2/lpng/pngwutil.c: Removed
	these old os/2 specific libpng files.

	* arch/os2/vac++/PETcat.ICC, arch/os2/vac++/X1541.ICC,
	arch/os2/vac++/lpng.icc, arch/os2/vac++/lzlib.icc,
	arch/os2/vac++/x128/X128.ICC, arch/os2/vac++/x64/X64.ICC,
	arch/os2/vac++/xcbm2/Xcbm2.ICC, arch/os2/vac++/xpet/Xpet.ICC,
	arch/os2/vac++/xplus4/Xplus4.ICC,
	arch/os2/vac++/xvic/Xvic.ICC: Removed support for the old os/2
	specific libpng and libz, and added support for the new
	built-in support of libpng and libz.

	* arch/os2/zlib/README, arch/os2/zlib/adler32.c,
	arch/os2/zlib/compress.c, arch/os2/zlib/crc32.c,
	arch/os2/zlib/deflate.c, arch/os2/zlib/deflate.h,
	arch/os2/zlib/gzio.c, arch/os2/zlib/infblock.c,
	arch/os2/zlib/infblock.h, arch/os2/zlib/infcodes.c,
	arch/os2/zlib/infcodes.h, arch/os2/zlib/inffast.c,
	arch/os2/zlib/inffast.h, arch/os2/zlib/inffixed.h,
	arch/os2/zlib/inflate.c, arch/os2/zlib/inftrees.c,
	arch/os2/zlib/inftrees.h, arch/os2/zlib/infutil.c,
	arch/os2/zlib/infutil.h, arch/os2/zlib/maketree.c,
	arch/os2/zlib/trees.c, arch/os2/zlib/trees.h,
	arch/os2/zlib/uncompr.c, arch/os2/zlib/zconf.h,
	arch/os2/zlib/zlib.h, arch/os2/zlib/zutil.c,
	arch/os2/zlib/zutil.h: Removed these old os/2 specific zlib
	files.

	* arch/win32/Makefile.am, arch/win32/png.dsp,
	arch/win32/zlib.dsp, arch/win32/vice.dsw: Added png.dsp and
	zlib.png for built-in libpng and zlib support.

	* arch/win32/base.dsp, arch/win32/c1541.dsp,
	arch/win32/gfxoutputdrv.dsp, arch/win32/msvc/config.h,
	arch/win32/petcat.dsp: Added built-in libpng and zlib support.

	* gfxoutputdrv/Makefile.am: Added built-in libpng and zlib
	support.

	* lib/Makefile.am: Added 2 new directories in the new lib
	directory, lpng and zlib.

	* lib/lpng/LICENSE, lib/lpng/Makefile.am, lib/lpng/png.c,
	lib/lpng/png.h, lib/lpng/pngconf.h, lib/lpng/pngerror.c,
	lib/lpng/pngget.c, lib/lpng/pngmem.c, lib/lpng/pngpread.c,
	lib/lpng/pngread.c, lib/lpng/pngrio.c, lib/lpng/pngrtran.c,
	lib/lpng/pngrutil.c, lib/lpng/pngset.c, lib/lpng/pngtrans.c,
	lib/lpng/pngwio.c, lib/lpng/pngwrite.c, lib/lpng/pngwtran.c,
	lib/lpng/pngwutil.c: Added built-in support for libpng.

	* lib/zlib/Makefile.am, lib/zlib/README, lib/zlib/adler32.c,
	lib/zlib/compress.c, lib/zlib/crc32.c, lib/zlib/crc32.h,
	lib/zlib/deflate.c, lib/zlib/deflate.h, lib/zlib/gzio.c,
	lib/zlib/infback.c, lib/zlib/inffast.c, lib/zlib/inffast.h,
	lib/zlib/inffixed.h, lib/zlib/inflate.c, lib/zlib/inflate.h,
	lib/zlib/inftrees.c, lib/zlib/inftrees.h, lib/zlib/trees.c,
	lib/zlib/trees.h, lib/zlib/uncompr.c, lib/zlib/zconf.h,
	lib/zlib/zlib.h, lib/zlib/zutil.c, lib/zlib/zutil.h: Added
	built-in support for zlib.

2005-10-23  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/resplus4.rc: Translations fix.

2005-10-23  Andreas Boose  <viceteam@t-online.de>

	* Version 1.17.3.

	* arch/unix/x11/gnome/x11ui.c (ui_select_contents_cb): Added
	patch submitted by Dominik Vogt.

	* arch/unix/uiattach.c (smart_attach): Likewise.

2005-10-20  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/os2/Makefile.am, arch/os2/vac++/Makefile.am,
	arch/os2/vac++/PETcat.ICC, arch/os2/vac++/X1541.ICC,
	arch/os2/vac++/cbm2-pet-dummy.c,
	arch/os2/vac++/incl/c128.icc, arch/os2/vac++/incl/plus4.icc,
	arch/os2/vac++/incl/vic20.icc, arch/os2/vac++/lpng.icc,
	arch/os2/vac++/lzlib.icc, arch/os2/vac++/x128/X128.ICC,
	arch/os2/vac++/x64/X64.ICC, arch/os2/vac++/xcbm2/Xcbm2.ICC,
	arch/os2/vac++/xpet/Xpet.ICC,
	arch/os2/vac++/xplus4/Xplus4.ICC,
	arch/os2/vac++/xvic/Xvic.ICC: Fixed OS/2 port to compile with
	VAC++ again.

	* arch/os2/dialogs/menubar.c, arch/os2/dialogs/menubar.rc:
	Fixed some definitions.

	* arch/os2/lpng/LICENSE, arch/os2/lpng/png.c,
	arch/os2/lpng/png.h, arch/os2/lpng/pngconf.h,
	arch/os2/lpng/pngerror.c, arch/os2/lpng/pngget.c,
	arch/os2/lpng/pngmem.c, arch/os2/lpng/pngpread.c,
	arch/os2/lpng/pngread.c, arch/os2/lpng/pngrio.c,
	arch/os2/lpng/pngrtran.c, arch/os2/lpng/pngrutil.c,
	arch/os2/lpng/pngset.c, arch/os2/lpng/pngtrans.c,
	arch/os2/lpng/pngwio.c, arch/os2/lpng/pngwrite.c,
	arch/os2/lpng/pngwtran.c, arch/os2/lpng/pngwutil.c: Addition
	of needed libpng files for the OS/2 port.

	* arch/os2/zlib/README, arch/os2/zlib/adler32.c,
	arch/os2/zlib/compress.c, arch/os2/zlib/crc32.c,
	arch/os2/zlib/deflate.c, arch/os2/zlib/deflate.h,
	arch/os2/zlib/gzio.c, arch/os2/zlib/infblock.c,
	arch/os2/zlib/infblock.h, arch/os2/zlib/infcodes.c,
	arch/os2/zlib/infcodes.h, arch/os2/zlib/inffast.c,
	arch/os2/zlib/inffast.h, arch/os2/zlib/inffixed.h,
	arch/os2/zlib/inflate.c, arch/os2/zlib/inftrees.c,
	arch/os2/zlib/inftrees.h, arch/os2/zlib/infutil.c,
	arch/os2/zlib/infutil.h, arch/os2/zlib/maketree.c,
	arch/os2/zlib/maketree.c, arch/os2/zlib/trees.c,
	arch/os2/zlib/trees.h, arch/os2/zlib/uncompr.c,
	arch/os2/zlib/zconf.h, arch/os2/zlib/zlib.h,
	arch/os2/zlib/zutil.c, arch/os2/zlib/zutil.h: Addition of
	needed libz files for the OS/2 port.

2005-10-15  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* doc/html/plain/cbm_basic_tokens.txt, petcat.c: Added support
	for Basic Lightning to petcat.

2005-10-14  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* doc/html/plain/cbm_basic_tokens.txt, petcat.c: Added support
	for Drago basic 2.2 and REU-basic to petcat.

	* c64/cart/crt.c: Fixed missing stb.h include.

2005-10-14  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* doc/html/plain/cbm_basic_tokens.txt, petcat.c: Added support
	for Xbasic to petcat.

	* arch/win32/c1541.dsp, arch/win32/petcat.dsp: Added
	wsock32.lib to the link list

	* c64/cart/ross.c: Fixed a typo.

2005-10-14  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/os2/vac++/incl/c64cart.icc, c64/cart/crt.c,
	cartridge.h: Added support for 'structured basic' and 'ross'
	type carts.

	* arch/win32/c64cart.dsp, c64/cart/Makefile.am,
	c64/cart/ross.c, c64/cart/ross.h: Added support for 'ross'
	type carts.

	* c64/cart/c64cartmem.c: Added support for 'ross' type carts
	and fixed the detach of the 'structured basic' type carts.

	* c64/cart/stb.c, c64/cart/stb.h: Added .crt support.

2005-10-12  pottendo  <pottendo@utanet.at>

	* arch/win32/resc128.rc  resc64.rc  rescbm2.rc  respet.rc
	resplus4.rc  res.rc  resvic20.rc: fixed Italian special
	characters.
	* translate.c: ditto.

2005-10-11  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/os2/vac++/incl/c64cart.icc,
	arch/win32/c64cart.dsp, c64/cart/Makefile.am,
	c64/cart/c64cartmem.c, c64/cart/comal80.c,
	c64/cart/comal80.h, c64/cart/crt.c, cartridge.h: Added support
	for the Comal-80 cartridge.

2005-10-10  Andreas Boose  <viceteam@t-online.de>

	* Version 1.17.2.

	* arch/unix/hardsid.c: New file submitted by Simon White.

	* hardsid.h: Added patch submitted by Simon White.

	* arch/unix/Makefile.am: Added new file.

	* arch/win32/hardsid.c (hardsid_reset): New function.

	* arch/unix/hardsid.c: Added some logging.

	* arch/unix/uisid.c: Added HardSID UI.

	* drive/rotation.c (rotation_rotate_disk): Added some
	workaround for GCR zero bytes.  Not enabled for now.

	* c64/cart/c64cart.c: Fixed STB command line option.

	* arch/win32/resdrivec128.rc, arch/win32/resdriveplus4.rc: New
	files.

	* arch/win32/resc128.rc, arch/win32/resplus4.rc: Moved drive
	specific resources to separate file.

	* arch/win32/Makefile.am, arch/win32/x128.dsp: Added new files.	

2005-10-10  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/Makefile.am: Fixes the res*.txt dependancies.

2005-10-10  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resvic20.rc: Updated the
	some dutch translations.

2005-10-09  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* c64/cart/c64cartmem.c, c64/cart/crt.c,
	c64/cart/epyxfastload.c, c64/cart/epyxfastload.h,
	c64/cart/final.c, c64/cart/final.h, c64/cart/kcs.c,
	c64/cart/kcs.h: Fixed some attach/detach problems with certain
	.crt type carts.

2005-10-09  John Selck  <selck_j@informatik.haw-hamburg.de>

	* vdc/vdc-mem.c (vdc_read): Improved behaviour of vertical
	blank bit.

2005-10-09  Andreas Boose  <viceteam@t-online.de>

	* Version 1.17.1.

	* arch/win32/archdep.c (archdep_network_init,
	archdep_network_shutdown): Moved WSA* functions here.

	* arch/win32/console.c (remember_current_input_and_delete):
	Fixed warnings.

	* c64/cart/Makefile.am, arch/win32/c64cart.dsp: Added new
	files.

	* translate.c, translate.h, c64/cart/c64cart.c: Added
	translation support.

	* arch/win32/resmenu.txt, arch/win32/uic64cart.c,
	arch/win32/resc64.rc, arch/win32/resc128.rc,
	arch/win32/resstrings.txt, arch/win32/intl.c,
	arch/win32/res.rc: Added support for STB cart.

	* c64/cart/c64cart.c: Fixed includes and maked local functions
	static.

	* c64/cart/stb.c, c64/cart/stb.h: Added new files submitted by
	Walter Zimmer.

	* arch/unix/uic64cart.c, c64/cart/c64cart.c,
	c64/cart/c64cartmem.c, cartridge.h

2005-10-09  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/res.rc, translate.c: Updated to the reviewed
	french translations.

2005-10-09  John Selck  <selck_j@informatik.haw-hamburg.de>

	* vdc/vdc.c (vdc_raster_draw_alarm_handler): Attribute RAM
	pointer is now updated on first displayed line.

	* vdc/vdc-mem.c (vdc_store): Attribute RAM pointer now isn't
	update on register 20/21 access. Fixed the force_refresh
	condition of the register 26 access. Inverted the access to
	the horizontal soft scroll register in register 25.

2005-10-09  John Selck  <selck_j@informatik.haw-hamburg.de>

	* drive/driverom.c (driverom_initialize_traps): Added patch
	for fast drive reset for 1541 drives.

2005-10-08  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/res.rc,
	arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/resdrivepetcbm2.rc,
	arch/win32/reside64.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resplus60k.rc,
	arch/win32/resramcart.rc, arch/win32/resreu.rc,
	arch/win32/resrs232user.rc, arch/win32/ressid.rc,
	arch/win32/restfe.rc, arch/win32/resvic20.rc,
	arch/win32/resvicii.rc: Updated with the latest French and
	Italian translations.

2005-10-02  Andreas Boose  <viceteam@t-online.de>

	* Version 1.17.

	* debug.h: Fixed comment.

2005-10-02  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* translate.c: Updated with the latest french and italian
	translations.

2005-10-02  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/res.rc,
	arch/win32/resacia.rc, arch/win32/resc128.rc,
	arch/win32/resc64.rc, arch/win32/rescbm2.rc,
	arch/win32/resdrivec64vic20.rc, arch/win32/resgeoram.rc,
	arch/win32/respet.rc, arch/win32/resplus4.rc,
	arch/win32/resvic20.rc: Partially updated with the latest
	french and italian translations.

2005-10-02  pottendo  <pottendo@utanet.at>

	* info.c: Minor update.

2005-10-01  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.21.

	* debug.h: Undefine `DEBUG'.

2005-09-30  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/res.rc,
	arch/win32/resacia.rc, arch/win32/resc128.rc,
	arch/win32/resc64.rc, arch/win32/rescbm2.rc,
	arch/win32/resdialogs.txt, arch/win32/resdrivec64vic20.rc,
	arch/win32/resdrivepetcbm2.rc, arch/win32/resgeoram.rc,
	arch/win32/reside64.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resplus60k.rc,
	arch/win32/resramcart.rc, arch/win32/resreu.rc,
	arch/win32/resrs232user.rc, arch/win32/ressid.rc,
	arch/win32/restfe.rc, arch/win32/resvic20.rc:  Updated with
	the latest Swedish translation.

2005-09-30  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* translate.c: Updated with the latest Swedish translations.

2005-09-29  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* info.c: Added Solaris binary packages.

2005-09-27  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/res.rc: Added english IDS_NONE

2005-09-24  pottendo  <pottendo@utanet.at>

	* arch/unix/uicmdline.c (ui_cmdline_show_help): Call gettext for
	translation of description.

2005-09-23  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/res.rc,
	arch/win32/resacia.rc, arch/win32/resc128.rc,
	arch/win32/resc64.rc, arch/win32/rescbm2.rc,
	arch/win32/resdrivec64vic20.rc,
	arch/win32/resdrivepetcbm2.rc, arch/win32/resgeoram.rc,
	arch/win32/reside64.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resplus60k.rc,
	arch/win32/resramcart.rc, arch/win32/resreu.rc,
	arch/win32/resrs232user.rc, arch/win32/ressid.rc,
	arch/win32/restfe.rc, arch/win32/resvic20.rc:  Updated with
	the latest German translation.

2005-09-22  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* translate.c: Updated with the latest German translations.

2005-09-21  Tibor Biczo  <crown@t-online.hu>

	* arch/win32/intl.c (intl_arch_language_init): Set default
	language to English, disable autodetect code temporarily.

	* arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resvic20.rc:
	Disable Language selection menu entries.

2005-09-15  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* translate.c: Fixed some dutch translations.

2005-09-15  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* sid/sid-cmdline-options.c: Fixed to be used by gettext.

2005-09-14  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.20.

	* sounddrv/Makefile.am: Added `soundcoreaudio.c'.

2005-09-14  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* translate.c, translate.h: Cosmetic fixes.

2005-09-12  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* aciacore.c, attach.c, c128/c128-cmdline-options.c,
	c128/c128mmu.c, c128/functionrom.c, c64/c64-cmdline-options.c,
	c64/cart/c64cart.c, c64/cart/ide64.c, c64/georam.c,
	c64/plus60k.c, c64/psid.c, c64/ramcart.c, c64/reu.c,
	c64/tfe.c, cbm2/cbm2-cmdline-options.c, datasette.c, debug.c,
	drive/drive-cmdline-options.c,
	drive/iec/iec-cmdline-options.c,
	drive/iec128dcr/iec128dcr-cmdline-options.c,
	drive/ieee/ieee-cmdline-options.c,
	drive/tcbm/tcbm-cmdline-options.c, event.c, fliplist.c,
	fsdevice/fsdevice-cmdline-options.c, gfxoutputdrv/ffmpegdrv.c,
	initcmdline.c, kbdbuf.c, log.c, mouse.c,
	pet/pet-cmdline-options.c, pet/petpia1.c,
	plus4/plus4-cmdline-options.c, plus4/ted-cmdline-options.c,
	printerdrv/driver-select.c, printerdrv/interface-serial.c,
	printerdrv/interface-userport.c, printerdrv/output-select.c,
	printerdrv/output-text.c, ram.c,
	raster/raster-cmdline-options.c, rs232drv/rs232drv.c,
	rs232drv/rsuser.c, serial/serial-iec-device.c,
	sid/sid-cmdline-options.c, sound.c, sysfile.c, traps.c,
	vdc/vdc-cmdline-options.c, vic20/vic20-cmdline-options.c,
	vic20/vic20cartridge.c, vicii/vicii-cmdline-options.c,
	video/video-cmdline-options.c, vsync.c: Updated the unix intl
	to include the command line options.

2005-09-08  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* petcat.c: Added support for Pegasus basic 4.0.

2005-09-07  Andreas Matthies  <andreas.matthies@gmx.net>

	* c64/c64pla.c (c64pla_pport_reset): Initialize the data parts
	with 0x3f to get correct peek(1) at startup.

2005-09-06  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* petcat.c: Added support for Mighty basic.

2005-09-04  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* petcat.c: Added support for WS basic.

2005-09-04  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* petcat.c: Added support for graphics basic.

2005-08-30  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* petcat.c: Added support for Ultrabasic-64.

2005-08-21  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.19.

2005-08-14  Michael Klein  <michael.klein@puffin.lb.shuttle.de>

	* Makefile.am: Honor $(LDFLAGS) during link, use @INTLLIBS@
	where needed

	* arch/unix/uisid.c: fixed Catweasel spelling

2005-08-14  Michael Klein  <michael.klein@puffin.lb.shuttle.de>

	* sound.c, sound.h: Added CoreAudio support.

	* sounddrv/soundcoreaudio.c: New file.

2005-08-10  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/beos/ui.cc, arch/msdos/menudefs.c,
	arch/os2/dialogs/dialogs.rc, arch/unix/x11/gnome/about.c,
	arch/unix/x11/xaw/about.c, arch/win32/res.rc, info.c: Added
	myself to the member list.

2005-08-07  pottendo  <pottendo@utanet.at>

	* arch/win32/Makefile.am (res.h): source `genwinres.sh' by
	prefix `.'

2005-08-07  pottendo  <pottendo@utanet.at>

	* petcat.c (p_expand): Removed `(int)' cast to make gcc4
	happy.

	* arch/unix/x11/gnome/uiarch.h: Removed *display declaration.

2005-08-04  Tibor Biczo  <crown@t-online.hu>

	* arch/win32/intl.c (intl_table): Removed dialog ids which are
	not translated this way anymore.

	* arch/win32/res.rc: Moving texts to alternate store method.

	* arch/win32/resdialogs.txt: Removed obsolete IDS, added new
	IDS.

	* arch/win32/reside64.rc, arch/win32/resplus60k.rc,
	arch/win32/resramcart.rc, arch/win32/resreu.rc,
	arch/win32/rs232user.rc: Switching to smart dialog
	initialization.

	* arch/win32/resstrings.txt: Removed obsolete IDS, added new
	IDS.

	* arch/win32/uiide64.c, arch/win32/uiplus60k.c,
	arch/win32/uiramcart.c, arch/win32/uireu.c: Localize and
	resize dialog.

	* arch/win32/x64.dsp: Added plus60k resources.

2005-08-02  Tibor Biczo  <crown@t-online.hu>

	* arch/win32/intl.c (intl_table): Removed dialog ids which are
	not translated this way anymore.
	(text_cache): Bitfield, showing which text blocks are loaded
	and cached.
	(intl_text_init): Do not preload all texts.
	(intl_translate_text_new): Load and cache required texts.

	* arch/win32/res.rc: Moving texts to alternate store method.

	* arch/win32/resacia.rc: Switching to smart dialog
	initialization.

	* arch/win32/resdialogs.txt: Removed obsolete IDS, added new
	IDS.

	* arch/win32/resrs232user.rc: Switching to smart dialog
	initialization.

	* arch/win32/ressid.rc: Removed unused stuff.

	* arch/win32/resstrings.txt: Removed obsolete IDS, added new
	IDS.

	* arch/win32/restfe.rc: Switching to smart dialog
	initialization.

	* arch/win32/resvic20.rc: Switching to smart dialog
	initialization.

	* arch/win32/resvicii.rc: Switching to smart dialog
	initialization.

	* arch/win32/uiacia.c, arch/win32/uijoystick.c: Localize and
	resize dialog.

	* arch/win32/uilib.c, arch/win32/uilib.h
	(uilib_get_group_extent, uilib_move_and_adjust_group_width,
	uilib_move_group, uilib_adjust_group_width,
	uilib_move_and_adjust_element_width,
	uilib_adjust_element_width, uilib_set_element_width,
	uilib_localize_dialog): New support functions to help localize
	and adjust layout of dialogs.

	* arch/win32/uirs232user.c, arch/win32/uisound.c,
	arch/win32/uitfe.c, arch/win32/uivicii.c,
	arch/win32/uivicset.c, arch/win32/vic20ui.c: Localize, and
	adjust dialog layout.

2005-07-30  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.18.

	* arch/unix/x11/vidmode.c, arch/unix/x11/vidmode.h,
	arch/unix/x11/dga1.c, arch/unix/x11/dga1.h,
	arch/unix/x11/dga2.c, arch/unix/x11/dga2.h,
	arch/unix/x11/fullscreen.c, arch/unix/fullscreenarch.h:
	Pass pointer instead of array.

	* arch/unix/uiacia1.h, arch/unix/uidriveplus4.h,
	arch/unix/uivicii.h, arch/unix/uipalemu.h, arch/unix/uicrtc.h,
	arch/unix/uiramcart.h, arch/unix/uiide64.h,
	arch/unix/uic64cart.h, arch/unix/uidrivec128.h,
	arch/unix/uigeoram.h, arch/unix/uiperipheralieee.h,
	arch/unix/uirs232c64c128.h, arch/unix/uisettings.h,
	arch/unix/uireu.h, arch/unix/uited.h, arch/unix/uitfe.h,
	arch/unix/uivdc.h, arch/unix/uivic.h, arch/unix/uidrive.h,
	arch/unix/uidrivepetcbm2.h, arch/unix/uijoystick2.h,
	arch/unix/uirs232user.h, arch/unix/uicommands.h,
	arch/unix/uidriveiec.h, arch/unix/uiprinteriec.h,
	arch/unix/uisound.h, arch/unix/uidatasette.h,
	arch/unix/uidrivec64vic20.h, arch/unix/uikeyboard.h,
	arch/unix/uiprinterieee.h, arch/unix/uiperipheraliec.h,
	arch/unix/uiplus60k.h, arch/unix/uirs232petplus4cbm2.h,
	arch/unix/uifliplist.h, arch/unix/uiattach.h:
	#include "uimenu.h".

	* vicii/vicii.c, plus4/ted.c: Fixed some gcc4 warnings.

	* sid/sid-resources.c: Fixed warning if compiled without
	resid support.

	* raster/raster-line.c (handle_visible_line_without_cache):
	Do not inline.

	* translate.c: Fixed some translations.

2005-07-25  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* info.c: Updated the information.

	* translate.c: Added dutch translation of the new resid item.

2005-07-24  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/unix/x11/qnxipc.h: Added a formerly missing include
	statement.

2005-07-24  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.17.

2005-07-17  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/archdep.c, arch/riscos/kbd.c, arch/riscos/ui.c,
	arch/riscos/uiimage.c: some minor issues with signed
	characters and filing system properties.

	* sid/resid.cc, sid/sid-cmdline-options.c,
	sid/sid-resources.c: resource and command line option for
	reSID gain

	* translate.h, translate.c: macros etc. for reSID gain option
	(this system is really weak, dude)

2005-07-14  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/unix/x11/Makefile.am, arch/unix/x11/qnxipc.h,
	arch/unix/x11/qnxshm.c, arch/unix/x11/qnxshm.h,
	arch/unix/x11/renderxv.h: Added qnx specific files for shared
	memory emulation.

	* arch/unix/x11/renderxv.c: Added dummy shared memory
	functions.

	* arch/unix/x11/xaw/x11video.c, : Made qnx not use mitshm.

	* sid/resid.cc: Fixed an include problem with qnx.

2005-07-10  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* sound.c, sounddrv/soundsun.c: Fixed so that OpenBSD doesn't
	use this sound driver.

2005-07-10  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.16.

	* rs232drv/rsuser.c: Fixed wrong usage of `rsuser_enabled'
	noticed by Keith Henrickson.

2005-06-27  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/beos/c64ui.cc, arch/beos/constants.h,
	arch/beos/vicemenu.cc, arch/msdos/Makefile.am,
	arch/msdos/c64ui.c, arch/msdos/uiplus60k.c,
	arch/msdos/uiplus60k.h, arch/os2/dialogs/menubar.c,
	arch/os2/dialogs/menubar.h, arch/os2/dialogs/menubar.rc,
	arch/os2/vac++/incl/c64.icc, arch/riscos/uiconfig.c,
	arch/riscos/uiconfig.h, arch/riscos/uihelp.c,
	arch/riscos/uisharedef.h, arch/unix/Makefile.am,
	arch/unix/c64ui.c, arch/unix/uiplus60k.c,
	arch/unix/uiplus60k.h, arch/win32/Makefile.am,
	arch/win32/arch.dsp, arch/win32/c64.dsp,
	arch/win32/c64ui.c, arch/win32/intl.c,
	arch/win32/resc64.rc, arch/win32/resdialogs.txt,
	arch/win32/resmenu.txt, arch/win32/resplus60k.rc,
	arch/win32/resstrings.txt, arch/win32/uiplus60k.c,
	arch/win32/uiplus60k.h, c128/c128.c, c64/Makefile.am,
	c64/c64.c, c64/c64mem.c, c64/plus60k.c, c64/plus60k.h,
	c64/ramcart.c, translate.c, translate.h: Added emulation
	of the c64 +60K expansion.

2005-06-21  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.15.

2005-06-19  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* printerdrv/drv-nl10.c, printerdrv/output-graphics.c,
	util.c: Changed some C++ type comments to C type comments.

2005-06-12  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/unix/x11/xaw/widgets/Directory.c: Added telldir and
	seekdir functions if not present in the compiler environment.

	* arch/unix/x11/xaw/widgets/Directory.h: Added MAXPATHLEN
	definition if not defined, and added u_short definition when
	not defined.

2005-06-10  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/joy.c, arch/win32/res.rc,
	arch/win32/resstrings.txt, arch/win32/ui-resources.c,
	arch/win32/video.c, src/translate.c, translate.h: Added the
	last couple of command-line help text for the new
	internationalization.

	* arch/win32/statusbar.h: Added an include to fix a problem
	with a struct.

	* arch/win32/uilib.c: Fixed a 'no newline at end of file'.

	* aciacore.c, arch/win32/uicmdline.c, attach.c,
	c128/c128-cmdline-options.c, c128/c128mmu.c,
	c128/functionrom.c, c1541.c,
	c64/c64-cmdline-options.c, c64/cart/c64cart.c,
	c64/cart/ide64.c, c64/georam.c, c64/psid.c,
	c64/ramcart.c, c64/reu.c, c64/tfe.c,
	cbm2/cbm2-cmdline-options.c, cmdline.c, cmdline.h,
	datasette.c, debug.c, drive/drive-cmdline-options.c,
	drive/iec/iec-cmdline-options.c,
	drive/iec128dcr/iec128dcr-cmdline-options.c,
	drive/ieee/ieee-cmdline-options.c,
	drive/tcbm/tcbm-cmdline-options.c, event.c,
	fliplist.c, fsdevice/fsdevice-cmdline-options.c,
	gfxoutputdrv/ffmpegdrv.c, initcmdline.c, kbdbuf.c,
	log.c, mouse.c, pet/pet-cmdline-options.c,
	pet/petpia1.c, petcat.c, plus4/plus4-cmdline-options.c,
	plus4/ted-cmdline-options.c, printerdrv/driver-select.c,
	printerdrv/interface-serial.c,
	printerdrv/interface-userport.c,
	printerdrv/output-select.c, printerdrv/output-text.c,
	ram.c, raster/raster-cmdline-options.c,
	rs232drv/rs232drv.c, rs232drv/rsuser.c,
	serial/serial-iec-device.c, sid/sid-cmdline-options.c,
	sound.c, sysfile.c, traps.c, uicmdline.h,
	vdc/vdc-cmdline-options.c,
	vic20/vic20-cmdline-options.c, vic20/vic20cartridge.c,
	vicii/vicii-cmdline-options.c,
	video/video-cmdline-options.c, vsync.c: Finshed up the
	internationalization of the command-line help text, and
	removed the temporary duplicated functionality.

2005-06-08  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/Makefile.am, src/arch/win32/genwinres.sh,
	arch/win32/res.h, arch/win32/utils/Makefile.am: Added
	automatic win32 res.h generating, for both native and cross
	gcc compile environments.

2005-06-08  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/arch.dsp, arch/win32/genwinres.dsp,
	arch/win32/intl.c, arch/win32/res.txt,
	arch/win32/resdialogs.txt, arch/win32/resmenu.txt,
	arch/win32/resstrings.txt, arch/win32/utils/genwinres.c,
	arch/win32/vice.dsw:

	* arch/win32/console.c, arch/win32/uimon.c,
	arch/win32/uimonmsg.h:

	* arch/win32/res.rc, arch/win32/resc128.rc,
	arch/win32/resc64.rc, arch/win32/rescbm2.rc,
	arch/win32/respet.rc, arch/win32/resplus4.rc,
	arch/win32/resvic20.rc:

2005-06-05  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.14.

2005-06-05  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/c1541.dsp: Fixed to not link to cmdline.c.

	* arch/win32/petcat.dsp: Fixed to not link to cmdline.c.

	* arch/win32/intl.c: Removed left over codepage 28605 code.

2005-06-05  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/res.rc,
	arch/win32/resacia.rc, arch/win32/resc128.rc,
	arch/win32/resc64.rc, arch/win32/rescbm2.rc,
	arch/win32/resdrivec64vic20.rc,
	arch/win32/resdrivepetcbm2.rc, arch/win32/resgeoram.rc,
	arch/win32/reside64.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resramcart.rc,
	arch/win32/resreu.rc, arch/win32/resrs232user.rc,
	arch/win32/ressid.rc, arch/win32/restfe.rc,
	arch/win32/resvic20.rc, arch/win32/resvicii.rc,
	translate.c, : Removed the 29605 codepage as was used for the
	italian language.

2005-06-04  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* aciacore.c, attach.c, c1541.c, datasette.c,
	debug.c, event.c, fliplist.c, initcmdline.c, kbdbuf.c,
	log.c, mouse.c, petcat.c, ram.c, sound.c, sysfile.c,
	translate.c, translate.h, traps.c,
	video/video-cmdline-options.c, vsync.c: Finished up the
	transition of the common command-line options help text to
	string tables.

2005-05-31  Andreas Matthies  <andreas.matthies@gmx.net>

	* core/ciacore.c (ciacore_intta): Initialize sr_bits with 14
	instead of 8.
	Well, this isn't confirmed by a test suite yet but fixes two
	bugs (Athena, Combat school) and seems reasonable by reading
	the 64PRG p.432: "shifted out on the SP pin at 1/2 the
	underflow rate of TIMER A" and remembering that the first
	underflow already happened when sr_bits is initialized.

2005-05-31  pottendo  <pottendo@utanet.at>

	* arch/win32/Makefile.am (resXXX.o): prefixed source files with
	`$(srcdir)/', added --include-dir $(top_builddir)/src to $(WRC)
	command line. 

2005-05-30  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/Makefile.am (vice.manifest): Added new file.

	* arch/win32/intl.c: Removed SID setting dialog related IDs
	from translation table.
	(intl_text_table2): Temporary table until all texts are
	switched over to new method.
	(intl_text_init): Alternate load method for strings.
	(intl_text_free): Free alternate table as well.
	(intl_translate_text_new): Alternate translation method.

	* arch/win32/intl.h (intl_translate_text_new): New function.

	* arch/win32/msvc/config.h: Disable warning 4996 for MSVC8
	compilation.
	MSVC8 deprecates most of the standard C library functions,
	this turns off warnings for those functions.
	Define HAVE_STRCASECMP, this is a required fix for MSVC8
	compilation.

	* arch/win32/res.h: Removed unused IDs, and added new IDs for
	SID settings dialog.

	* arch/win32/res.rc: Added manifest file. This enables XP
	styles.

	* arch/win32/rescommon.h: Define Language IDS.

	* arch/win32/ressid.rc: Reorganized resources.

	* arch/win32/uilib.c (uilib_get_general_window_extents): New
	function. Calculates window size based on text and used font.

	* arch/win32/uilib.h (uilib_get_general_window_extents): New
	function.

	* arch/win32/uisid.c (init_general_sid_dialog,
	init_resid_sid_dialog, init_hardsid_sid_dialog): Set localized
	strings.
	(resize_general_sid_dialog, resize_resid_sid_dialog,
	resize_hardsid_sid_dialog): New functions, positions and sizes
	control elements.

	* arch/win32/vice.manifest: New file. Enables use of Common
	Controls Version 6 if available (XP only), which switches UI
	to XP style.

2005-05-29  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* printerdrv/driver-select.c, printerdrv/interface-serial.c,
	printerdrv/interface-userport.c, printerdrv/output-select.c,
	printerdrv/output-text.c, raster/raster-cmdline-options.c,
	rs232drv/rs232drv.c, rs232drv/rsuser.c,
	serial/serial-iec-device.c, sid/sid-cmdline-options.c,
	translate.c, translate.h, vdc/vdc-cmdline-options.c,
	vic20/vic20-cmdline-options.c, vic20/vic20cartridge.c,
	vicii/vicii-cmdline-options.c: Transition to string tables for
	the internationalization of the command-line options help
	text.

2005-05-29  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.13.

2005-05-28  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* drive/drive-cmdline-options.c,
	drive/iec/iec-cmdline-options.c,
	drive/iec128dcr/iec128dcr-cmdline-options.c,
	drive/ieee/ieee-cmdline-options.c,
	drive/tcbm/tcbm-cmdline-options.c,
	fsdevice/fsdevice-cmdline-options.c,
	gfxoutputdrv/ffmpegdrv.c, pet/pet-cmdline-options.c,
	pet/petpia1.c, plus4/plus4-cmdline-options.c,
	plus4/ted-cmdline-options.c, translate.c,
	translate.h: More changes for the transition to string tables
	for the internationalization of the command-line options help
	text.

2005-05-27  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* c64/c64-cmdline-options.c, c64/ramcart.c,
	cbm2/cbm2-cmdline-options.c, translate.c: Fixed my previous
	mistakes.

2005-05-27  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* c128/c128mmu.c, c128/functionrom.c,
	c64/c64-cmdline-options.c, c64/cart/c64cart.c,
	c64/cart/ide64.c, c64/georam.c, c64/psid.c,
	c64/ramcart.c, c64/reu.c, c64/tfe.c,
	cbm2/cbm2-cmdline-options.c, translate.c,
	translate.h: Transition of command-line options help text
	to string tables for the internationalization.

2005-05-27  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* gfxoutputdrv/pngdrv.c: Fixed png_set_invert_alpha() call by
	only using it if the libpng package supports it.

2005-05-26  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* sound.c, sounddrv/sounduss.c: Fix to make BSDI not use
	sounduss.

2005-05-25  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* c1541.c, petcat.c: Added a dummy cmdline_register_options
	function.

	* Makefile.am: Got rid of the linking of cmdline.o and the
	arch dependant uicmdline.o for the c1541 and petcat programs.

	* arch/win32/uicmdline.c, c128/c128-cmdline-options.c,
	cmdline.c, cmdline.h, translate.c, translate.h,
	uicmdline.h: Start of the localization of the command-line
	options help text.

2005-05-23  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.12.

	* sound.c: Print available sound devices within one line.

2005-05-23  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* vic20/vic20memsnapshot.c: Fixed an unchecked memory.h
	include.

2005-05-19  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* sound.c, sounddrv/sounduss.c: Fix to make FreeBSD not use
	sounduss.

2005-05-16  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/unix/x11/xaw/widgets/Directory.h,
	fsdevice/fsdevice-cmdline-options.c,
	fsdevice/fsdevicetypes.h, ioutil.c: PATH_MAX fix for unix
	platforms.

2005-05-15  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/x128.dsp, arch/win32/x64.dsp,
	arch/win32/xcbm2.dsp, arch/win32/xpet.dsp,
	arch/win32/xplus4.dsp, arch/win32/xvic.dsp: Concatenate
	resource files into master resource file for compilation.

2005-05-15  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.11.

	* translate.c, main.c: Added missing includes.

	* translate.c (translate_resources_shutdown): Removed unused
	variable.

2005-05-15  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/c128ui.c, arch/win32/c64ui.c,
	arch/win32/cbm2ui.c, arch/win32/ffmpeglib.c,
	arch/win32/fullscrn.c, arch/win32/petui.c,
	arch/win32/plus4ui.c, arch/win32/statusbar.c,
	arch/win32/ui.c, arch/win32/uiacia.c,
	arch/win32/uiattach.c, arch/win32/uic128.c,
	arch/win32/uic64cart.c, arch/win32/uicart.c,
	arch/win32/uicbm2set.c, arch/win32/uiconsole.c,
	arch/win32/uidatasette.c, arch/win32/uidrivec128.c,
	arch/win32/uidrivec64vic20.c, arch/win32/uidrivepetcbm2.c,
	arch/win32/uidriveplus4.c, arch/win32/uievent.c,
	arch/win32/uifliplist.c, arch/win32/uigeoram.c,
	arch/win32/uihelp.c, arch/win32/uiide64.c,
	arch/win32/uijoystick.c, arch/win32/uikeyboard.c,
	arch/win32/uilib.c, arch/win32/uimediafile.c,
	arch/win32/uimon.c, arch/win32/uiperipheral.c,
	arch/win32/uipetset.c, arch/win32/uiplus4cart.c,
	arch/win32/uiplus4mem.c, arch/win32/uiquicksnapshot.c,
	arch/win32/uiram.c, arch/win32/uiramcart.c,
	arch/win32/uireu.c, arch/win32/uirom.c,
	arch/win32/uirs232.c, arch/win32/uirs232user.c,
	arch/win32/uisid.c, arch/win32/uisnapshot.c,
	arch/win32/uisound.c, arch/win32/uispeed.c,
	arch/win32/uitfe.c, arch/win32/uivicii.c,
	arch/win32/uivicset.c, arch/win32/uivideo.c,
	arch/win32/vic20ui.c, : Changed functions to use translate.c
	calls instead of intl.c calls.

	* arch/win32/intl.c, arch/win32/intl.h: Added codepage
	conversion and changed function names.

	* translate.c, translate.h: Added codepage table,
	translate_res() call and init/cleanup of codepage conversion.

	* arch/win32/res.rc, arch/win32/resacia.rc,
	arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/resdrivec64vic20.rc,
	arch/win32/resdrivepetcbm2.rc, arch/win32/resgeoram.rc,
	arch/win32/reside64.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resramcart.rc,
	arch/win32/resreu.rc, arch/win32/resrs232user.rc,
	arch/win32/ressid.rc, arch/win32/restfe.rc,
	arch/win32/resvic20.rc, arch/win32/resvicii.rc: Added
	italian used codepage (28605 / ISO-8859-15).

2005-05-13  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* Makefile.am, arch/win32/base.dsp: Added translate.c for
	the new internationalization scheme.

	* arch/win32/msvc/config.h: Added HAS_TRANSLATION define.

	* arch/win32/intl.c, arch/win32/intl.h: Changed/moved
	functions to where they only have the arch dependant elements.

	* arch/win32/ui-resources.c, main.c: Changed the intl.c calls
	to translate.c calls.

	* autostart.c, c64/c64export.c, debug.c,
	event.c, screenshot.c, sound.c: Added common
	internationalization.

	* translate.c, translate.h: The new (common)
	internationalization scheme.

2005-05-11  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/console.c, arch/win32/uimon.c:
	[cosmetical] replaced tab-stops with spaces

2005-05-11  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/console.c: added multiline input support;
	corrected a reentrance problem because ui_dispatch_events()
	was called in console_in(), resulting in wrong outputs; cursor
	is now stopped while outputting, which fixes an output problem
	because wrong parts were overwritten with the old value under
	the cursor.

	* arch/win32/uimon.c: ask the MDI windows for their minimum
	size when resizing.

2005-05-09  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/intl.h,
	arch/win32/res.h, arch/win32/res.rc,
	arch/win32/statusbar.c, arch/win32/uigeoram.c,
	arch/win32/uijoystick.c, arch/win32/uiramcart.c,
	arch/win32/uireu.c: Added some more formerly untranslated
	text, and added pre-translation of the main window caption.

	* arch/win32/ui.c, arch/win32/uiacia.c,
	arch/win32/uiattach.c, arch/win32/uic128.c,
	arch/win32/uicbm2set.c, arch/win32/uidrivec128.c,
	arch/win32/uidrivec64vic20.c, arch/win32/uidrivepetcbm2.c,
	arch/win32/uidriveplus4.c, arch/win32/uievent.c,
	arch/win32/uifliplist.c, arch/win32/uiide64.c,
	arch/win32/uikeyboard.c, arch/win32/uilib.c,
	arch/win32/uiperipheral.c, arch/win32/uipetset.c,
	arch/win32/uirom.c, arch/win32/uirs232user.c,
	arch/win32/uisid.c, arch/win32/uisound.c,
	arch/win32/uivideo.c: Got rid of some unneeded TEXT()
	elements.

	* arch/win32/uiconsole.c, arch/win32/uimediafile.c,
	arch/win32/uisnapshot.c: Fixed filter strings.

2005-05-08  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.10.

	* resources.c, resources.h (resources_save): Improved error
	checking.

2005-05-07  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/Makefile.am: Combine separate resource files
	before compiling and linking.

	* arch/win32/res.h: Fixed resource value typo.

2005-05-06  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/Makefile.am: Added new file rescommon.h.

	* arch/win32/res.h: Reorganized string IDS.

	* arch/win32/res.rc: Moved some defines into rescommon.h

	* arch/win32/resacia.rc, arch/win32/resc128.rc,
	arch/win32/resc64.rc, arch/win32/rescbm2.rc,
	arch/win32/resdrivec64vic20.rc, arch/win32/resdrivepetcbm2.rc,
	arch/win32/resgeoram.rc, arch/win32/reside64.rc,
	arch/win32/respet.rc, arch/win32/resplus4.rc,
	arch/win32/resramcart.rc, arch/win32/resreu.rc,
	arch/win32/resrs232user.rc, arch/win32/ressid.rc,
	arch/win32/restfe.rc, arch/win32/resvic20.rc,
	arch/win32/resvicii.rc: Updated include files.

	* arch/win32/rescommon.h: New file.

	* arch/win32/x128.dsp, arch/win32/x64.dsp,
	arch/win32/xcbm2.dsp, arch/win32/xpet.dsp,
	arch/win32/xplus4.dsp, arch/win32/xvic.dsp: Compile and link
	with separate resource files.

2005-05-04  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/Makefile.am: Added wrc as the prefered
	win32 resource compiler.

	* arch/win32/intl.c, arch/win32/res.h, arch/win32/vic20ui.c:
	Corrected vic20 cart mistakes.

	* arch/win32/res.rc, arch/win32/resacia.rc,
	arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/resdrivec64vic20.rc,
	arch/win32/resdrivepetcbm2.rc, arch/win32/resgeoram.rc,
	arch/win32/reside64.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resramcart.rc,
	arch/win32/resreu.rc, arch/win32/resrs232user.rc,
	arch/win32/ressid.rc, arch/win32/restfe.rc,
	arch/win32/resvic20.rc, arch/win32/resvicii.rc: Added
	pragma directives for correct resource compilation
	of the polish dialogs, menus and string tables.

2005-05-03  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/intl.h, arch/win32/res.h,
	arch/win32/res.rc, arch/win32/resacia.rc,
	arch/win32/resc128.rc, arch/win32/rescbm2.rc,
	arch/win32/resgeoram.rc, arch/win32/reside64.rc,
	arch/win32/respet.rc, arch/win32/resplus4.rc,
	arch/win32/resramcart.rc, arch/win32/resreu.rc,
	arch/win32/ressid.rc, arch/win32/resvic20.rc,
	arch/win32/statusbar.c, arch/win32/uic128.c,
	arch/win32/uic64cart.c, arch/win32/uicart.c,
	arch/win32/uicart.h, arch/win32/uicbm2set.c,
	arch/win32/uiconsole.c, arch/win32/uidrivec128.c,
	arch/win32/uidrivec64vic20.c, arch/win32/uidrivepetcbm2.c,
	arch/win32/uidriveplus4.c, arch/win32/uievent.c,
	arch/win32/uigeoram.c, arch/win32/uihelp.c,
	arch/win32/uiide64.c, arch/win32/uijoystick.c,
	arch/win32/uilib.c, arch/win32/uimediafile.c,
	arch/win32/uiperipheral.c, arch/win32/uipetset.c,
	arch/win32/uiplus4cart.c, arch/win32/uiquicksnapshot.c,
	arch/win32/uiramcart.c, arch/win32/uireu.c,
	arch/win32/uirom.c, arch/win32/uirs232user.c,
	arch/win32/uisid.c, arch/win32/uisnapshot.c,
	arch/win32/uisound.c, arch/win32/uivideo.c,
	arch/win32/vic20ui.c, vice.h: Finished the transition to
	string tables for the win32 intl.

2005-04-29  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/ffmpeglib.c, arch/win32/intl.c,
	arch/win32/res.rc, arch/win32/ui.c,
	arch/win32/uiattach.c, arch/win32/uic64cart.c,
	arch/win32/uicart.c, arch/win32/uiconsole.c,
	arch/win32/uifliplist.c, arch/win32/uikeyboard.c,
	arch/win32/uilib.c, arch/win32/uiperipheral.c,
	arch/win32/uiplus4cart.c: Transition to stringtable based
	translation.

	* arch/win32/res.h: Transition to stringtable based
	translation and renumbered the resources so it works
	on win9x again.

	* arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resvic20.rc: Fixed
	some comments.

2005-04-26  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/c128ui.c, arch/win32/c64ui.c,
	arch/win32/cbm2ui.c, arch/win32/petui.c,
	arch/win32/plus4ui.c, arch/win32/uic128.c,
	arch/win32/uicbm2set.c, arch/win32/uiconsole.c,
	arch/win32/uidatasette.c, arch/win32/uidrivec128.c,
	arch/win32/uidrivec64vic20.c, arch/win32/uidrivepetcbm2.c,
	arch/win32/uidriveplus4.c, arch/win32/uigeoram.c,
	arch/win32/uiide64.c, arch/win32/uikeyboard.c,
	arch/win32/uimediafile.c, arch/win32/uimon.c,
	arch/win32/uimon.c, arch/win32/uiperipheral.c,
	arch/win32/uipetset.c, arch/win32/uiplus4mem.c,
	arch/win32/uiram.c, arch/win32/uiramcart.c,
	arch/win32/uireu.c, arch/win32/uirom.c,
	arch/win32/uirs232.c, arch/win32/uirs232user.c,
	arch/win32/uisid.c, arch/win32/uisnapshot.c,
	arch/win32/uispeed.c, arch/win32/uitfe.c,
	arch/win32/uivicii.c, arch/win32/uivicset.c,
	arch/win32/uivideo.c, arch/win32/vic20ui.c: Merged
	intl_translate_dialog() and intl_translate_menu() into
	intl_translate.

	* arch/win32/ffmpeglib.c, arch/win32/fullscrn.c,
	arch/win32/intl.c, arch/win32/intl.h,
	arch/win32/res.h, arch/win32/res.rc,
	arch/win32/resacia.rc, arch/win32/ui.c,
	arch/win32/uiacia.c, arch/win32/uijoystick.c,
	arch/win32/uilib.c, arch/win32/uisound.c,
	vice.h: Start of the transition to a stringtable based
	translation.

	* arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resvic20.rc: Translated
	the new language menu into dutch.

	* arch/win32/rs232.c: Fixed inappropriate _() function calls.

2005-04-26  Dirk Jagdmann  <doj@cubic.org>

	* sound.c (sound_register_device): print available device
	names, fix a possible buffer overflow

2005-04-26  Dirk Jagdmann  <doj@cubic.org>

	* arch/unix/joy.c: add support for analog joysticks 0-5 (only
	for new_joystick_* codes)

	* arch/unix/joy.h, arch/unix/uijoystick2.c: add #defines for
	analog joysticks 0-5

2005-04-26  Dirk Jagdmann  <doj@cubic.org>

	* sound.h: Fixed bufferspace description.

2005-04-24  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.9.

	* arch/win32/resc64.rc, arch/win32/resc128.rc,
	arch/win32/resvic20.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/rescbm2.rc: Tweaked German
	translation.

	* arch/win32/ui.c (ui_set_language): Fixed prototype.

2005-04-24  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/intl.c (set_current_language): Call
	ui_update_menu on language change, to update the user
	interface.

	* arch/win32/res.h: Added ID's for language menu entries.

	* arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resvic20.rc:
	Added language selection menu entries.

	* arch/win32/ui.c (ui_lang_menu_entries): Struct for linking
	Language resource names, and menu resource ids for Language
	selection.
	(ui_update_menu): New function to update the current menu, on
	language change.
	(update_menus): Handle Language selection menu entries.
	(ui_set_language): New function to find language resource
	values for language menu entries, and to change the current
	language.
	(handle_wm_command): Handle Language selection menu entries.

	* arch/win32/ui.h (ui_update_menu): New function.

2005-04-23  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.8.

	* diskimage/fsimage.c (fsimage_write_sector): Flush buffer to
	make sure the write is visible to other readers.

	* diskimage/fsimage-gcr.c (fsimage_gcr_write_track): Changed
	likewise.

	* arch/win32/Makefile.am: Fixed order of source files.

2005-04-21  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c: Fixed to compile with msvc.

	* arch/win32/uiacia.c, arch/win32/uiperipheral.c,
	arch/win32/uisid.c: Fixed some warnings.

2005-04-21  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/res.rc, arch/win32/res.rc,
	arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resramcart.rc,
	arch/win32/resvic20.rc: Fixed some dutch sentences.

	* arch/win32/ffmpeglib.c, arch/win32/fullscrn.c,
	arch/win32/intl.c, arch/win32/statusbar.c,
	arch/win32/ui.c, arch/win32/uiacia.c,
	arch/win32/uiattach.c, arch/win32/uic128.c,
	arch/win32/uic64cart.c, arch/win32/uicart.c,
	arch/win32/uicbm2set.c, arch/win32/uiconsole.c,
	arch/win32/uidrivec128.c, arch/win32/uidrivec64vic20.c,
	arch/win32/uidrivepetcbm2.c, arch/win32/uidriveplus4.c,
	arch/win32/uievent.c, arch/win32/uifliplist.c,
	arch/win32/uigeoram.c, arch/win32/uihelp.c,
	arch/win32/uiide64.c, arch/win32/uijoystick.c,
	arch/win32/uikeyboard.c, arch/win32/uilib.c,
	arch/win32/uimediafile.c, arch/win32/uiperipheral.c,
	arch/win32/uipetset.c, arch/win32/uiplus4cart.c,
	arch/win32/uiquicksnapshot.c, arch/win32/uiramcart.c,
	arch/win32/uireu.c, arch/win32/uirom.c,
	arch/win32/uirs232user.c, arch/win32/uisid.c,
	arch/win32/uisnapshot.c, arch/win32/uisound.c,
	arch/win32/uivideo.c, c64/c64export.c, event.c,
	vice.h: Finished up the win32 intl.

	* info.c: Added the other things I've made for VICE thusfar.

2005-04-20  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.7.

2005-04-19  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* monitor/monitor.c: mon_set_mem_val() now allows writes into
	the address space of floppy drives.

2005-04-18  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/ffmpeglib.c, arch/win32/fullscrn.c,
	arch/win32/intl.c, arch/win32/intl.h,
	arch/win32/ui.c: Start of the text translation step of the
	win32 localization.

2005-04-18  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/intl.h, arch/win32/res.h,
	arch/win32/resc64.rc, arch/win32/rescbm2.rc,
	arch/win32/respet.rc, arch/win32/resplus4.rc,
	arch/win32/resvic20.rc, arch/win32/ui.c,
	main.c: Finished up the menu step of the win32 localization.

2005-04-17  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.6.

2005-04-16  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/intl.h, arch/win32/res.h,
	arch/win32/res.rc, arch/win32/resc128.rc, arch/win32/ui.c,
	arch/win32/uimon.c : Start of the menu part of the windows
	localization.

2005-04-14  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/win32/intl.c, arch/win32/res.h, arch/win32/res.rc,
	arch/win32/resacia.rc, arch/win32/resacia.rc,
	arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/resdrivec64vic20.rc,
	arch/win32/resdrivepetcbm2.rc, arch/win32/resgeoram.rc,
	arch/win32/reside64.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resramcart.rc,
	arch/win32/resreu.rc, arch/win32/resrs232user.rc,
	arch/win32/ressid.rc, arch/win32/resvic20.rc,
	arch/win32/uiconsole.c, arch/win32/uigeoram.c,
	arch/win32/uijoystick.c, arch/win32/uilib.c,
	arch/win32/uimediafile.c, arch/win32/uiperipheral.c,
	arch/win32/uiram.c, arch/win32/uirom.c,
	arch/win32/uirs232.c, arch/win32/uisnapshot.c,
	arch/win32/uisound.c, arch/win32/uispeed.c,
	arch/win32/uivideo.c : Finished up the dialog step of the
	win32 localization

2005-04-13  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* c64/c64mem.c, c64/ramcart.c, c64/ramcart.h: Ramcart fixes.

2005-04-13  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/msdos/Makefile.am: Ethernet support libpcap fix.

2005-04-12  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.5.

	* arch/win32/intl.c: Fixed includes.

2005-04-12  pottendo  <pottendo@utanet.at>

	* info.c: Added Marco to contributors.

2005-04-12  Andreas Matthies  <andreas.matthies@gmx.net>

	* cia.h, riot.h, via.h, core/ciacore.c, core/riotcore.c,
	core/viacore.c: New functions <chip>_disable mainly to
	stop pending alarms.

	* drive/iec/iec.c, drive/iecieee/iecieee.c, drive/ieee/ieee.c
	(*_drive_reset): Resets or disables the chips depending on
	the drive type.

2005-04-12  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/unix/x11/xaw/widgets/RegExp.h: Fixed BSD compile.

2005-04-09  Marco van den Heuvel  <blackystardust68@yahoo.com>

        * arch/win32/Makefile.am, arch/win32/arch.dsp,
        arch/win32/c128ui.c, arch/win32/c64ui.c, arch/win32/cbm2ui.c,
        arch/win32/intl.c, arch/win32/intl.h, arch/win32/petui.c,
        arch/win32/plus4ui.c, arch/win32/res.h, arch/win32/resacia.rc,
        arch/win32/resc128.rc, arch/win32/resc64.rc,
        arch/win32/rescbm2.rc, arch/win32/resdrivec64vic20.rc,
        arch/win32/resdrivepetcbm2.rc, arch/win32/resgeoram.rc,
        arch/win32/reside64.rc, arch/win32/respet.rc,
        arch/win32/resplus4.rc, arch/win32/resramcart.rc,
        arch/win32/resreu.rc, arch/win32/resrs232user.rc,
        arch/win32/ressid.rc, arch/win32/restfe.rc,
        arch/win32/resvicii.rc, arch/win32/ui-resources.c,
        arch/win32/uiacia.c, arch/win32/uic128.c,
        arch/win32/uicbm2set.c, arch/win32/uidrivec128.c,
        arch/win32/uidrivec64vic20.c, arch/win32/uidrivepetcbm2.c,
        arch/win32/uidriveplus4.c, arch/win32/uigeoram.c,
        arch/win32/uiide64.c, arch/win32/uikeyboard.c,
        arch/win32/uipetset.c, arch/win32/uiplus4mem.c,
        arch/win32/uiramcart.c, arch/win32/uireu.c,
        arch/win32/uirom.c, arch/win32/uirs232user.c,
        arch/win32/uisid.c, arch/win32/uitfe.c, arch/win32/uivicii.c:
        Added internationalization support.

2005-04-09  Andreas Dehmel  <zarquon@t-online.de>

        * arch/riscos/archdep.h: defines for rs232-devices.

2005-04-09  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.4.

	* arch/unix/x11/xaw/uiscreenshot.c: #include "util.h".

	* sounddrv/soundalsa.c (alsa_init): Fixed warning.

2005-03-29  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/msdos/Makefile.am, arch/msdos/c128ui.c,
	arch/msdos/c64ui.c, arch/msdos/tfearch.c, arch/msdos/uitfe.c,
	arch/msdos/uitfe.h, c64/tfe.c: Added TFE/RR-NET support for
	the MSDOS version of VICE.

2005-03-28  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.3.

	* arch/unix/rs232.c, arch/win32/rs232.c, rs232drv/rs232drv.c,
	arch/unix/archdep.h, arch/win32/archdep.h: Moved resource and
	command line code to common file.

	* sound.h: Fixed warning.

	* sounddrv/soundalsa.c: Define `ALSA_PCM_NEW_HW_PARAMS_API'.

2005-03-16  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/beos/c128ui.cc, arch/beos/c64ui.cc,
	arch/beos/constants.h, arch/beos/vicemenu,
	arch/msdos/Makefile.am, arch/msdos/c128ui.c
	arch/msdos/c64ui.c, arch/msdos/uiramcart.c,
	arch/msdos/uiramcart.h, arch/os2/dialogs/menubar.c,
	arch/os2/dialogs/menubar.h, arch/os2/dialogs/menubar.rc,
	arch/os2/vac++/incl/c64.icc, arch/os2/vac++/x128/X128.ICC,
	arch/riscos/uiconfig.c, arch/riscos/uiconfig.h,
	arch/riscos/uihelp.c, arch/riscos/uisharedef.h,
	arch/unix/Makefile.am, arch/unix/c128ui.c,
	arch/unix/c64ui.c, arch/unix/uiramcart.c,
	arch/unix/uiramcart.h, arch/win32/Makefile.am,
	arch/win32/arch.dsp, arch/win32/c128ui.c, arch/win32/c64.dsp,
	arch/win32/c64c128.dsp, arch/win32/c64ui.c, arch/win32/res.h,
	arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/resramcart.rc, arch/win32/uiramcart.c,
	arch/win32/uiramcart.h, c128/c128.c, c64/Makefile.am,
	c64/c64.c, c64/c64io.c, c64/c64mem.c, c64/cart/c64cartmem.c,
	c64/ramcart.c, c64/ramcart.h: added support for RAMCART	
	64/128.

	* arch/msdos/uigeoram.c: fixed georam submenu.

	* c64/c64io.c: fixed georam monitor entries.

2005-03-15  Andreas Matthies  <andreas.matthies@gmx.net>

	* gfxoutputdrv/ffmpeg/rational.h, gfxoutputdrv/Makefile.am:
	Added file.

	* arch/win32/msvc/config.h: Define snprintf.

	* arch/win32/uikeyboard.c (mapping_index_get): Fixed warning.

2005-03-12  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.2.

	* arch/unix/x11/videoarch.h: Added patch suggested by Andreas
	Jochens

2005-03-12  Dag Lem  <resid@nimrod.no>

	* arch/unix/x11/xaw/uiscreenshot.c (save_screenshot): Add
	filename extension via util_add_extension().
	(build_screenshot_dialog): Show driver->displayname, fit
	button width.

	* gfxoutputdrv/ffmpegdrv.c (ffmpegdrv_alloc_picture): Set
	picture->pts = AV_NOPTS_VALUE to fix frame errors and eventual
	crash.
	(ffmpegdrv_save): Changed non-standard _snprintf to snprintf.

2005-03-09  Dag Lem  <resid@nimrod.no>

	* sound.c (sound_init): Initialize ALSA sound device.

	* sounddrv/Makefile.am: Added soundalsa.c

	* sounddrv/soundalsa.c: New file - ALSA sound device.

2005-03-06  Andreas Matthies  <andreas.matthies@gmx.net>

	* gfxoutputdrv/ffmpeglib.h, arch/unix/ffmpeglib.c,
	arch/win32/ffmpeglib.c: Replaced __av_freep with av_free.

	* arch/win32/ffmpeglib.c (ffmpeglib_load_library): Checks for
	correct version of the dll.

	* gfxoutputdrv/ffmpeg/*.h: Replaced with headerfiles of
	ffmpeg-0.49pre1.

	* gfxoutputdrv/ffmpegdrv.c: Added support for the latest
	ffmpeg library. Code is based on the corresponding
	output_example.c.

2005-03-06  Tibor Biczo  <crown@axelero.hu>

	* tape/tap.c (tap_get_pulse): Report number of bytes read from
	file.
	(tap_cbm_skip_pilot): Keep track of file position by updating
	private counter, instead of using ftell().

2005-02-16  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* c64/reu.c: Correct REU values after reset.

2005-02-13  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/msdos/c128ui.c, arch/msdos/c64ui.c:
	it says I/O extensions at dfxx, but the mouse is in there and
	now my georam extension is in there (which uses $de00-dffff),
	in my opinion this should just be changed to just I/O
	extensions, without any naming of an address.

	* arch/unix/uigeoram.h:
	small typo, it said  '* uireu.h'  changed to  '* uigeoram.h'.

	* arch/win32/resgeoram.rc:
	changed some of the sizes of the elements of the dialog to
	make things fit better.

	* c64/c64io.c:
	georam only reacts in the range of $df80-$dfff with it's 2
	registers being mirrored, fixes made.

	* c64/georam.c:
	fixed the adresses the georam registers react to.

	* arch/msdos/ui.c:
	halftracks were not divided by 2, therefor the track display
	for the drive was wrong, fix made.

	* c128/c128-resources.c, c64/c64-resources.c:
	the ACIA is mapped into I/O-1 space when active, therefore it
	should be handled by c64export to avoid I/O-conflicts, fixes
	made.

	* c64/c64export.c, sid/sid-resources.c, sid/sid-resources.h:
	since the entire I/O-1 or I/O-2 is blocked when something is
	using that line the stereo-sid should not be excluded by the
	checking in c64export, if the stereo-sid is mapped into I/O-1
	then I/O-1 should be blocked for other hardware that wants to
	use this region, to avoid I/O conflicts, fixes made.

	* cbm2/cbm2.c:
	dummy c64export needed for the above fix.

2005-02-13  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.1.

	* c128/c128mem.c (mem_initialize_memory): In C64 mode writes
	to the last page should call `ram_hi_store()'.
	(ram_hi_store): New function.

2005-01-30  Michael Klein  <michael.klein@puffin.lb.shuttle.de>

	* keyboard.c: Use `keyc_num' to count keysyms.

2005-01-24  Marco van den Heuvel  <blackystardust68@yahoo.com>

	* arch/beos/c128ui.cc, arch/beos/c64ui.cc,
	arch/beos/constants.h, arch/beos/vicemenu.cc,
	arch/msdos/Makefile.am, arch/msdos/c128ui.c,
	arch/msdos/c64ui.c, arch/msdos/uigeoram.c,
	arch/msdos/uigeoram.h, arch/os2/dialogs/menubar.c,
	arch/os2/dialogs/menubar.h, arch/os2/dialogs/menubar.rc,
	arch/os2/vac++/incl/c64.icc, arch/os2/vac++/x128/X128.ICC,
	arch/riscos/uiconfig.c, arch/riscos/uiconfig.h,
	arch/riscos/uihelp.c, arch/riscos/uisharedef.h,
	arch/unix/Makefile.am, arch/unix/c128ui.c, arch/unix/c64ui.c,
	arch/unix/uigeoram.c, arch/unix/uigeoram.h,
	arch/win32/Makefile.am, arch/win32/arch.dsp,
	arch/win32/c128ui.c, arch/win32/c64.dsp,
	arch/win32/c64c128.dsp, arch/win32/c64ui.c, arch/win32/res.h,
	arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/resgeoram.rc, arch/win32/uigeoram.c,
	arch/win32/uigeoram.h, c128/c128-resources.c, c128/c128.c,
	c128/c128mem.c, c128/c128memsnapshot.c, c64/Makefile.am,
	c64/c64-resources.c, c64/c64.c, c64/c64io.c,
	c64/c64memsnapshot.c, c64/georam.c, c64/georam.h: Added GEORAM
	support.

2005-01-23  Andreas Boose  <viceteam@t-online.de>

	* Version 1.16.

	* video/video-resources.c [video_resources]: Initialize
	`delayloop_emulation' with proper value.

	* main.c (main_program): Removed debug output.

2005-01-22  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.15.

	* arch/unix/x11/xaw/about.c, arch/unix/x11/gnome/about.c,
	info.c, arch/os2/dialogs/dialogs.rc, arch/beos/ui.cc,
	arch/msdos/menudefs.c, arch/win32/res.rc: Updated.

	* arch/unix/uited.c, arch/unix/uivic.c:
	#include "resources.h".

2005-01-18  Dominik Vogt  <dominik.vogt@gmx.de>

	* arch/unix/x11/xaw/x11ui.c (ui_select_file):
	removed trailing period as in other error messages

	* arch/unix/x11/gnome/x11ui.c (ui_select_contents_cb):
	fixed core dump
	fixed ascending the path by one level each time a file dialog
	was called

2005-01-16  Dag Lem  <resid@nimrod.no>

	* arch/unix/x11/video.c (init_xv_settings): Moved
	initialization code for XVideo settings from
	video_canvas_create() to separate function. Also called from
	video_canvas_resize() to ensure initialization when hardware
	scaling is not enabled at startup.

	* video/video-color.c (video_calc_ycbcrtable,
	video_calc_palette, video_color_update_palette): Modified to
	work with YCbCr instead of CBM palette, in order to make
	external palettes work with PAL emulation and hardware
	scaling.
	(video_ycbcr_palette_create, video_ycbcr_palette_free,
	video_convert_rgb_to_ycbcr, video_palette_to_ycbcr,
	video_cbm_palette_to_ycbcr): New functions.

	* video-render-pal.c (video_render_pal_main): Commented out
	disable of PAL emulation for external palettes.

	* video-resources.c (set_hwscale_enabled): Added call to
	video_color_update_palette() to update palette on switch from
	hardware to software scaling (the screen went black when
	hardware scaling was enabled at startup and disabled by the
	GUI).

2005-01-16  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/ui.c: savebox handling consistent over drags,
	clicks and keyboard presses for the various save modes.

2004-12-29  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.14.

	* vicii/viciitypes.h, vicii/vicii.c, vicii/vicii-fetch.c:
	Added support for phi1 and phi2 screen base.

	* raster/raster-sprite-status.h, vicii/vicii.c: Removed unused
	member `ptr_base'.

	* vicii/viciitypes.h, vicii/vicii-timing.c: Moved timing
	constants to source file.

	* raster/raster-cache-const.h, vdc/vdc-draw.c: Removed useless
	`src_step' parameter.

	* c64/c64memrom.h, c128/c128memrom.h, vic20/vic20memrom.h:
	Fixed typo.

	* plus4/plus4memrom.c, plus4/plus4memrom.h: New files.

	* plus4/Makefile.am, arch/win32/plus4.dsp: Updated.

	* plus4/plus4mem.c, plus4/plus4mem.h, plus4/plus4.c,
	plus4/plus4rom.c: Added support for separate trap ROM.

	* arch/unix/x11/xaw/uimenu.c, arch/unix/x11/xaw/uimenu.h,
	arch/unix/x11/xaw/x11ui.c: Added support for dynamic menu
	structure allocation.

	* resources.c (write_resource_item): Use `fputs()' to write
	resource lines as `fprintf()' chokes on resource values that
	look like format specifiers.

	* arch/unix/uivicii.c, arch/unix/uivic.c, arch/unix/uited.c:
	Added proper color set UI greying.

2004-12-25  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.13.

	* vicii/vicii.c (vicii_update_memory_ptrs): Fixed char ROM
	display bug.

	* plus4/plus4.c, tape/tap.c: Removed C++ style comments.

	* vic20/vic20rom.c, vic20/vic20mem.c, vic20/vic20.c,
	vic20/vic.c, vic20/vic20memsnapshot.c: Added support for
	separate trap ROM.

	* c128/c128rom.c, c128/c128mem.c, c128/c128.c, c128/c128mmu.c,
	c128/c128memsnapshot.c, c128/c128meminit.c: Added support for
	separate trap ROM.

	* vic20/vic20memrom.c, vic20/vic20memrom.h,
	c128/c128memrom.c, c128/c128memrom.h: New files.

	* vic20/Makefile.am, arch/win32/vic20.dsp, c128/Makefile.am,
	arch/win32/c128.dsp: Updated.

	* c64/c64memrom.c, c64/c64memrom.h, c64/c64rom.c,
	c64/patchrom.c, c64/c64mem.c, c64/c64mem.h, c128/c128mem.c,
	c64/c64meminit.c, c128/c128rom.c: Renamed some variables.

2004-12-23  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/imagecontents.dsp: Removed unnecessary file
	grouping from project file.

	* plus4/plus4.c (tapeinit): Set proper tape pulse widths.

	* tape/tap.c: Added support for C16 tapes, half and whole
	waves as well. Moved debug logging from stderr to log file.

2004-12-21  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/res.rc: Added "read only" checkbox to the
	attach template.

	* arch/win32/uilib.h, uilib.c (uilib_select_file_autostart)
	Added parameter for "read only" resource name.
	(uilib_select_hook_proc) uses this to toggle the resource.
	(uilib_select_file): Call uilib_select_file_autostart with
	NULL resource name.

	* arch/win32/uiattach.c (uiattach_disk_dialog): Call
	uilib_select_file_autostart with corresponding read only
	resource name.
	(uiattach_tape_dialog, uiattach_autostart_dialog): No resource
	so the parameter is NULL.

2004-12-19  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.12.

	* keyboard.c (keyboard_key_released): Do not check shift state
	to abort keymap search.
	(keyboard_keymap_dump): Added new shift flags comments.

	* arch/win32/kbd.h, arch/msdos/kbd.h, arch/unix/kbd.h,
	arch/beos/kbd.h, arch/riscos/kbd.h, arch/os2/kbd.h,
	c64/c64-resources.c, pet/pet-resources.c,
	cbm2/cbm2-resources.c, arch/win32/resc64.rc: Changed
	definition names.

2004-12-19  Andreas Matthies  <andreas.matthies@gmx.net>

	* drive/drive-snapshot.c (drive_snapshot_read_module),
	(drive_snapshot_write_module): Include byte_ready_edge
	and byte_ready_active in the snapshot.

2004-12-05  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/joy.c: Joystick fire button can be selected for
	HW joysticks.

	* arch/win32/res.h: Added IDs for joystick fire button UI.

	* arch/win32/res.rc, arch/win32/uijoystick.c: Added UI for
	joystick fire button.

2004-12-05  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.11.

	* arch/win32/uikeyboard.c (end_mapping_dialog): Set index.

	* keyboard.c (keyboard_parse_set_pos_row): Allow same keysym
	to be added if `ALLOW_OTHER' was specified.
	(keyboard_keyconvmap_free): Set `keyconvmap' to NULL.

	* arch/win32/c64ui.c, c64/c64-resources.c, c64/c64.c,
	arch/unix/kbd.h, arch/win32/kbd.h, arch/msdos/kbd.h,
	arch/riscos/kbd.h, arch/os2/kbd.h, arch/beos/kbd.h,
	arch/win32/res.h, arch/win32/resc64.rc,
	c64/c64-cmdline-options.c: Added support for German symbolic
	keyboard mapping.

	* datasette.c, parallel/parallel.c, parallel/parallel-trap.c,
	parallel/parallel-trap.h, drive/drivemem.c, drive/drivemem.h,
	drive/iec/iec-resources.c, drive/drive-snapshot.c,
	drive/drivecpu.c, monitor/mon_ui.c, monitor/mon_breakpoint.c,
	monitor/mon_breakpoint.h, monitor/mon_memory.c, fliplist.c,
	fliplist.h, machine.c, attach.c, arch/unix/uifliplist.c,
	arch/riscos/ui.c, arch/os2/dialogs/dlg-drive.c, autostart.c.
	arch/msdos/kbd.c, arch/msdos/uiattach.c, init.c, video.h,
	arch/win32/uifliplist.c, arch/os2/dialogs/menubar.c,
	arch/os2/dialogs/dlg-fileio.c, arch/unix/uisettings.c,
	arch/beos/ui.cc, kbdbuf.c, kbdbuf.h, monitor/monitor.c,
	c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	pet/petmemsnapshot.c, pet/petrom.c, plus4/plus4.c,
	cbm2/cbm2rom.c, arch/os2/unused/vsync.c, arch/os2/vsyncarch.c,
	arch/beos/vsyncarch.c, arch/unix/vsyncarch.c, drive/drive.c,
	arch/msdos/vsync.c, arch/win32/vsyncarch.c,
	arch/riscos/vsync.c, drive/ieee/riot2d.c, drive/ieee/riotd.h,
	drive/ieee/ieee.c, drive/drivecpu.c, drive/drivecpu.h,
	drive/drive-resources.c, drive/drive-snapshot.c,
	drive/driverom.c, drive/driverom.h, drive/drivesync.c,
	drive/iec/via1d1541.c, video/video-resources.c,
	video/video-canvas.c, arch/unix/x11/video.c, raster/raster.h,
	raster/raster.c, raster/raster-line.c, arch/os2/video.c,
	arch/win32/video.c, arch/riscos/video.c, vicii/vicii.c,
	vic20/vic.c, vic20/vic-mem.c, vicii/vicii-draw.c,
	arch/beos/video.cc, raster/raster-line-changes.c,
	raster/raster-line-changes-sprite.c: Small changes.

2004-12-05  Andreas Dehmel  <zarquon@t-online.de>

	* arch/unix/uirs232user.c: missing NULL terminator, causes
	crashes with ICC6.

2004-11-30  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/uihelp.c: missing include

	* arch/riscos/uiimage.c: replaced usage of non-standard dirent
	fields with stat-call

2004-11-21  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.10.

	* arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/resvic20.rc: Fixed mingw32
	compile.

	* arch/win32/resc128.rc: Resized function ROM dialog.

2004-11-07  Dag Lem  <resid@nimrod.no>

	* arch/beos/archdep.h, arch/msdos/archdep.h,
	arch/os2/archdep.h, arch/riscos/archdep.h,
	arch/unix/archdep.h, arch/win32/archdep.h:
	Define ARCHDEP_<videochip>_HWSCALE.

	* arch/unix/uited.c, arch/unix/uivic.c, arch/unix/uivicii.c:
	Toggle "<videochip>HwScale".

	* arch/unix/x11/gnome/gnomevideo.c,
	arch/unix/x11/gnome/x11ui.c, arch/unix/x11/xaw/x11video.c,
	arch/unix/x11/xaw/x11ui.c:
	Replaced use_xvideo with canvas->videoconfig->hwscale.

	* arch/unix/x11/video.c: Removed XVIDEO resource and -xvideo
	option. Added support for interactive selection of hardware
	scaling.

	* crtc/crtc-resources.c, plus4/ted-resources.c,
	vdc/vdc-resources.c, vic20/vic-resources.c,
	vicii/vicii-resources.c: Initialization of
	video_chip_cap.hwscale_allowed.

	* video/video-cmdline-options.c: Added <videochip>HwScale
	resource and -<videochip>hwscale option.

2004-11-06  Andreas Boose  <viceteam@t-online.de>

        * Version 1.15.9.

	* fsdevice/fsdevicetypes.h, fsdevice/fsdevice-open.c,
	fsdevice/fsdevice-read.c, fsdevice/fsdevice.c: Fixed directory
	mask bug.

	* vdrive/vdrive-dir.c (vdrive_dir_create_directory):
	Simplified.

	* interrupt.c, interrupt.h (get_int): Removed.

	* kbdbuf.c, kbdbuf.h, monitor/monitor.c (kbd_buf_feed_string):
	Renamed.

	* drive/iecieee/via2d.c, drive/viad.h, drive/ieee/via1d2031.c,
	drive/iec/via1d1541.c (viad2_update_pcr): Renamed.

2004-10-30  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/res.h: New IDs for debug menu.

	* arch/win32/res<machine>.rc: Added menu items for debug mode.

	* arch/win32/ui.c: Added debug mode items to the list of
	mutual exclusive menues.

	* event.h, event.c: New event EVENT_OVERFLOW which is recorded
	in the new overflow callback.
	(event_snapshot_read_module): Fixed insertion of timestamps
	in overflow condition.

2004-10-17  Michael Klein  <michael.klein@puffin.lb.shuttle.de>

	* findpath.c: Fixed some buffer size.

2004-10-17  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.8.

	* arch/win32/uikeyboard.c, arch/win32/uikeyboard.h,
	arch/win32/c64ui.c, arch/win32/c128ui.c, arch/win32/vic20ui.c,
	arch/win32/petui.c, arch/win32/plus4ui.c, arch/win32/cbm2ui.c,
	arch/win32/uilib.c, arch/win32/uilib.h: More keyboard UI.

	* arch/win32/uifliplist.c (uifliplist_save_dialog): Fixed wide
	char bug.

	* arch/win32/uireu.c, arch/win32/uisound.c,
	arch/win32/uic128.c, arch/win32/uirom.c, arch/win32/uisid.c,
	arch/win32/uiperipheral.c, arch/win32/ui.c,
	arch/win32/video.c, arch/win32/videoarch.h,
	arch/win32/fullscrn.c, arch/win32/uisnapshot.c: Minor changes.

	* serial/serial-iec-bus.c, serial/serial-iec-bus.h,
	serial/serial-trap.c, serial/serial-iec-device.c,
	serial/serial-iec.c, serial/realdevice.c, serial/realdevice.h:
	Separated listen and talk functions.

	* dma.c, vicii/vicii-fetch.c, interrupt.h, vice.h: New
	interrupt routines are standard now.

2004-10-16  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/ui.c: Size of Accelerator tables are calculated
	compile time, no need to update #define values anymore.

	* drive/drive-check.c (drive_check_idle_method): Added 1551
	drive.

	* drive/drive.h: (rom_idle_trap): Increased size to accomodote
	1551 ROM patch bytes.

	* drive/drivecpu.c (drive_trap_handler): Added support for
	1551 drive.

	* drive/driverom.c (drive_rom_initialize_traps): Added 1551
	and 1541-II drives.

	* drive/iec/iec-resources.c (set_drive_idling_method): Added
	1551 and 1541-II drives.

2004-10-12  Tibor Biczo <crown@axelero.hu>

	* vicii/vicii-timing.c (vicii_timing_set): Set screen_height
	when selecting OLD NTSC-M. This was missing.

2004-10-09  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.7.

	* arch/win32/res.rc, arch/win32/res.h, arch/win32/resc64.rc,
	arch/win32/resc128.rc, arch/win32/resvic20.rc,
	arch/win32/respet.rc, arch/win32/resplus4.rc,
	arch/win32/rescbm2.rc, arch/win32/ui.c, arch/win32/c64ui.c,
	arch/win32/c128ui.c, arch/win32/vic20ui.c, arch/win32/petui.c,
	arch/win32/plus4ui.c, arch/win32/cbm2ui.c: Added keyboard UI.
	
	* arch/win32/uikeyboard.c, arch/win32/uikeyboard.h: New files.

	* arch/win32/Makefile.am, arch/win32/arch.dsp: Added new
	files.

	* arch/win32/uisid.c: Small changes.

	* arch/win32/uiperipheral.c (uiperipheral_dialog): Drive #8
	page is default.

	* c128/z80.c (z80_mainloop): Clear DMA during opcode counter.

2004-10-06  Andreas Matthies  <andreas.matthies@gmx.net>

	* dma.c: Include 6510core.h.
	(dma_maincpu_steal_cycles): Trigger immediate start of IRQ
	after DMA even for instructions with delayed interrupt.

	* interrupt.c: Include 6510core.h
	(interrupt_fixup_int_clk): Fixed calculation of
	num_cycles_left which was wrong for INTREQ inside CPU cycles.
	Trigger immediate start of IRQ even for instructions with
	delayed interrupt.

2004-10-03  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/ui.c (handle_wm_command): Removed unused
	variable.

	* arch/win32/uihelp.c: Include version.h.

	* datasette.c (datasette_internal_reset): Reset
	motor_stop_clk.

	* monitor/mon_parse.y: Initialize the child nodes of a new
	conditional node.

2004-10-02  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.6.

	* arch/win32/resdrivec64vic20.rc, arch/win32/resc128.rc,
	arch/win32/resdrivepetcbm2.rc, arch/win32/resplus4.rc,
	arch/win32/resrs232user.rc: Fixed some window geometry.

	* arch/win32/rs232.c: Fixed resource bug.

	* serial/realdevice.c (realdevice_enable, realdevice_disable):
	Print device name.

	* arch/win32/opencbmlib.c: Disabled `cbm_get_driver_name()'
	workaround.

	* arch/win32/uidriveplus4.c, arch/win32/uisid.c,
	arch/win32/uivicii.c, arch/win32/uivideo.c,
	arch/win32/uiide64.c, arch/win32/uic128.c,
	arch/win32/uidrivec128.c, arch/win32/uiplus4mem.c,
	arch/win32/uicbm2set.c,arch/win32/uidrivepetcbm2.c,
	arch/win32/uivicset.c, arch/win32/uisound.c,
	arch/win32/uidatasette.c, arch/win32/uidrivec64vic20.c,
	arch/win32/uidrivec64vic20.c, arch/win32/uipetset.c:
	arch/win32/uihelp.c, arch/win32/uihelp.h: Small changes.

	* arch/win32/uiperipheral.c, arch/win32/uiperipheral.h
	arch/win32/uifliplist.c, arch/win32/uifliplist.h,
	arch/win32/uidatasette.c, arch/win32/uidatasette.h,
	arch/win32/uiattach.c, arch/win32/uiattach.h,
	arch/win32/ui.c: Moved some commands to separate files.

	* arch/win32/uievent.c, arch/win32/uievent.h: New files.

	* arch/win32/Makefile.am, arch/win32/arch.dsp: Added new
	files.

	* arch/win32/uiperipheral.c (dialog_proc): Fixed greying bug.

2004-09-26  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/c1541.dsp, arch/win32/petcat.dsp: Added
	version.lib to be linked against.

2004-09-26  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.5.

	* arch/win32/res.rc, arch/win32/res.h, arch/win32/ui.c,
	arch/win32/resc64.rc, arch/win32/resc128.rc,
	arch/win32/resvic20.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/rescbm2.rc: Added RS232
	settings dialog.

	* arch/win32/uirs232.c, arch/win32/uirs232.h,
	arch/win32/uiattach.c, arch/win32/uiattach.h,
	arch/win32/uiquicksnapshot.c, arch/win32/uiquicksnapshot.h,
	arch/win32/uihelp.c, arch/win32/uihelp.h: New files.

	* arch/win32/Makefile.am, arch/win32/arch.dsp: Added new
	files.

	* arch/win32/uirs232user.c, arch/win32/uiacia.c: Fixed RS232
	device name.

	* arch/win32/ui.c: Moved attach, quicksnapshot and help
	specific code to separate files.

	* arch/win32/uiperipheral.c, arch/win32/res.h,
	arch/win32/res.rc: Added opencbmlib settings.

	* arch/win32/opencbmlib.c, opencbmlib.h
	(opencbm_is_available): New function.

	* arch/win32/winhack.h: Removed.

	* arch/win32/uisnapshot.c, arch/win32/uisnapshot.h,
	arch/win32/ui.c, arch/win32/ui.h: Moved more snapshot specific
	code to separate file.

2004-09-25  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.4.

	* rs232drv/rsuser.c, arch/unix/uirs232c64c128.c,
	arch/unix/uirs232user.c, arch/unix/uirs232user.h,
	arch/unix/vic20ui.c: Changed resource code.

	* arch/win32/resrs232user.rc, arch/win32/uirs232user.c,
	arch/win32/uirs232user.h: New files.

	* arch/win32/Makefile.am, arch/win32/arch.dsp: Added new
	files.

	* arch/win32/res.h, arch/win32/resc64.rc,
	arch/win32/resc128.rc, arch/win32/resvic20.rc,
	arch/win32/c64ui.c, arch/win32/c128ui.c, arch/win32/vic20ui.c:
	Added RS232 userport UI.

	* arch/win32/uiacia.c (enable_acia_controls): Fixed some bug.

2004-09-12  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.3.

	* c64/c64export.c: #include <string.h>.

	* arch/win32/uiacia.c, arch/win32/uiacia.h,
	arch/win32/resacia.rc: New files.

	* arch/win32/Makefile.am, arch/win32/arch.dsp: Added new
	files.

	* arch/win32/res.h, arch/win32/resc64.rc,
	arch/win32/resc128.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/rescbm2.rc,
	arch/win32/c64ui.c, arch/win32/c128ui.c, arch/win32/petui.c,
	arch/win32/plus4ui.c, arch/win32/cbm2ui.c,
	c64/c64-resources.c, c64/c64-cmdline-options.c,
	c128/c128-resources.c, c128/c128-cmdline-options.c,
	arch/unix/uirs232c64c128.c, arch/riscos/uiconfig.c: Added
	win32 ACIA settings dialog.

	* arch/win32/uireu.c, arch/win32/uiram.c, arch/win32/uitfe.c:
	Removed some includes.

	* version.h.in: Fixed as suggested by Tibor.

2004-09-11  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/uiimage.c: read filelength with stat() rather
	than dirent extension field.

2004-09-07  Tibor Biczo  <crown@axelero.hu>

	* configure.in: Build VICE_VERSION and VERSION_RC from version
	nibbles.

	* arch/win32/archdep.c (archdep_boot_path): Verify exe on NT4
	path as well.

	* version.h.in: Define VERSION_RC_NUMBER.

2004-09-06  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/c1541.dsp, arch/win32/petcat.dsp: Added
	version.lib to be linked against.

2004-09-06 Andreas Matthies  <andreas.matthies@gmx.net>

	* c64/c64memsnapshot.c (c64_snapshot_write_module),
	(c64_snapshot_read_module): Include pport.data_out,
	pport.data_read and pport.dir_read in snapshots.

	* c64/c64pla.c (c64pla_pport_reset): Initialize
	pport.data_out, pport.data_read and pport.dir_read.

2004-09-04  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.2.

	* arch/win32/resdrivepetcbm2.rc: New files.

	* arch/win32/Makefile.am, arch/win32/xvic.dsp: Updated.

	* arch/win32/res.h, arch/win32/res.rc, arch/win32/respet.rc,
	arch/win32/rescbm2.rc, arch/win32/resc64.rc,
	arch/win32/uidrivec64vic20.c: Moved resources.

	* arch/win32/resvic.rc: Renamed.

	* plus4/plus4acia.c: Changed `MYACIA' define.

	* arch/unix/uirs232c64c128.c, arch/unix/uirs232c64c128.h,
	arch/unix/uirs232petplus4cbm2.c, arch/unix/uiacia1.c,
	arch/unix/uirs232petplus4cbm2.h, arch/unix/uiacia1.h,
	arch/unix/uirs232user.c, arch/unix/uirs232user.h: New files.

	* arch/unix/c64ui.c, arch/unix/c128ui.c, arch/unix/petui.c,
	arch/unix/cbm2ui.c, arch/unix/vic20ui.c, arch/unix/plus4ui.c:
	Moved RS232 specific code.

	* arch/unix/Makefile.am: Added new files.

2004-09-02  Andreas Matthies  <andreas.matthies@gmx.net>

	* datasette.c (datasette_read_bit): Stops motor if
	motor_stop_clk is reached.
	(datasette_start_motor): Use MOTOR_DELAY instead of 1000.
	(datasette_set_motor): flag=1 will reset motor_stop_clk,
	flag=0 won't stop the motor immediatlely but delay it by
	setting motor_stop_clk.

2004-09-01  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* c64/c64export.c: In c64export_query(), do not reject as busy
	if the ressource is queried by the one who is actually holding
	the ressource.

2004-09-01  EMILIANO PERUCH  <EMILIANO.PERUCH@softway.it>

	* fsdevice/fsdevice-read.c (command_directory_get): Fixed some
	crash.

2004-09-01  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.1.

	* interrupt.h [INTRRUPT_MAX_DMA_PER_OPCODE]: Increased.

2004-08-28  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/unix/x11/vidmode.c: vidmode_init() calculates the video
	frequency depending on dotclock, htotal and vtotal. On some
	machines, these are reported as null, resulting in a floating
	point exception on startup. Now, there is a workaround: If
	this occurs, we just report 0 Hz (which is better than an
	exception).

2004-08-27  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/archdep.c (verify_exe): New function, simple
	check of Vice executable validity.
	(archdep_boot_path): Verify that first module is the Vice
	executable, keep searching for it, but report first module as
	a possible trojan to the user.

	* arch/win32/res.rc: Added VersionInfo resource, it is used
	for checking Vice executable validity.

	* arch/win32/ui.c (window_proc): Fixed WM_PAINT message
	processing. Wrong rect was used for updating the screen, on
	dual CPU systems this resulted in some painting artifacts.

	* arch/win32/x128.dsp, arch/win32/x64.dsp,
	arch/win32/xcbm2.dsp, arch/win32/xpet.dsp,
	arch/win32/xplus4.dsp, arch/win32/xvic.dsp:
	Link with version.lib.

	* plus4/ted-mem.c (ted3e_store, ted3f_store): Update ted
	pointers on memory configuration switch.

	* plus4/ted.c (ted_update_memory_ptrs): Fixed $ff14
	calculation.

	* version.h: Added VERSION_RC_NUMBER definition, it is used in
	win32 Version resource.

2004-08-22  Andreas Boose  <viceteam@t-online.de>

	* Version 1.15.

	* c64/cart/final.c (final_v3_io2_store): Call
	`cartridge_trigger_freeze_nmi_only'.

	* c64/cart/c64cart.c, cartridge.h
	(cartridge_trigger_freeze_nmi_only): New function.

	* arch/win32/res.rc: Commented out `Other' button.

	* petcat.c (p_tokenize): Fixed a warning.

2004-08-22  Andreas Matthies  <andreas.matthies@gmx.net>

	* event.c (event_snapshot_read_module): Fixed initialization
	of data and  next_timestamp_clk.

2004-08-21  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.40.

	* debug.h: Undefined `DEBUG'.

	* debug.c, vicii/vicii-fetch.c: Added missing `DEBUG' define.

	* event.c (destroy_image_list): Fixed prototype.

	* info.c: Updated.

2004-08-20  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* petcat.c: ctrl characters are braced consistently with { and
	} now (before, it was <> and (), depending upon if we
	tokenized or detokenized). This allows petcat to detokenize,
	edit and tokenize the same source again (not possible before).
	The command-line help now prints all available parameters.
	Examples are added. The petcat version contains the VICE
	version now, too.

2004-08-18  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* petcat.c: Fixed a bug where REM and DATA statements where
	not processed correctly. The are a type of "quote" mode,
	meaning that keywords are not tokenized between REM and
	newline or DATA and colon ':' (or newline, if there is no
	colon). Fixed this.

2004-08-14  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/<arch>/ui.c, uiapi.h (ui_display_playback): Added
	parameter for version string.

	* arch/unix/uicommands.c, arch/win32/res<machine>.rc,
	arch/win32/res.h, arch/win32/uic: Added menuitem for new
	history start mode.

	* event.c, event.h: Version of VICE is written into data
	portion of EVENT_INITIAL by new function event_write_version.
	Version is presented by new parameter in ui_display_playback.
	Timestamps aren't recorded anymore but inserted when event
	snapshot is loaded. New funtion cut_list() to remove all
	events from current.
	(event_initial_write): record_active needs to be set earlier
	otherwise EVENT_INITIAL isn't loaded.
	Added new mode EVENT_START_MODE_PLAYBACK that records from a
	running playback.
	Some fixes to repair buggy histories.

	* log.c: New function log_file_open. set_log_file_name()
	closes existing log file and opens new one.

	* main.c (main_program): Call log_init before
	initcmdline_check_args to avoid error messages when opening
	(cart-)zfiles via commandline.

2004-08-08  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.39.

	* arch/win32/res.h, arch/win32/res.rc, arch/win32/uirom.c,
	arch/win32/uirom.h, arch/win32/c64ui.c, arch/win32/c128ui.c,
	arch/win32/vic20ui.c, arch/win32/petui.c,
	arch/win32/plus4ui.c, arch/win32/cbm2ui.c, romset.c,
	arch/win32/resc64.rc, arch/win32/resc128.rc,
	arch/win32/resvic.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/rescbm2.rc: Added support
	for computer and drive romset resources.

2004-08-08  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/ui.cc: Deleted ui_cmdline_options_show using its
	code directly.

	* vic20/vic20mem.c (mem_powerup): Initialize the fake RAM
	area with 0 to make the VIC read correct values from
	non-existing color RAM.

2004-08-07  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.38.

	* serial/realdevice.c: Added debugging.

	* vdrive/vdrive-internal.c (vdrive_internal_open_disk_image):
	Flush machine drive cache.

	* machine-drive.h, c64/c64drive.c, c128/c128drive.c,
	vic20/vic20drive.c, pet/petdrive.c, plus4/plus4drive.c,
	cbm2/cbm2drive.c, c1541.c (machine_drive_flush): New function.

2004-08-03  Andreas Matthies  <andreas.matthies@gmx.net>

	* vic20/vic.c (vic_raster_draw_alarm_handler): Once the
	graphic area has started ycounter is incremented even in
	blank lines but memptr isn't incremented in that case.

2004-07-26  Dieter Baron  <dillo@danbala.ifoer.tuwien.ac.at>

	* arch/unix/Makefile.am, arch/unix/vic20ui.c, arch/unix/joy.h,
	arch/unix/uijoystick2.c, arch/unix/joy_usb.c, arch/unix/joy.c:
	Added BSD USB joystick support.

2004-07-17  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.37.

	* opencbmlib.h, arch/unix/opencbmlib.c,
	arch/win32/opencbmlib.c, arch/win32/opencbm.h: New files.

	* Makefile.am, arch/unix/Makefile.am, arch/win32/Makefile.am,
	arch/win32/arch.dsp: Added new files.

	* arch/win32/serial.dsp: Added `realdevice.c'.

	* serial/serial-trap.c, serial.h, c64/c64.c, c128/c128.c,
	vic20/vic20.c, plus4/plus4.c, c1541.c: Moved initialization of
	`serial_iec_bus_init()'.

	* arch/win32/archdep.c (archdep_file_is_chardev): Added dummy
	char device `/dev/cbm'.

	* arch/win32/msvc/config.h: Define `HAVE_OPENCBM'.

2004-07-17  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.36.

2004-07-12  Rami Rasanen  <raipe@neutech.fi>

	* vic20/vic20sound.c: Rewritten.

2004-07-08  Roberto Muscedere  <cococommie@cogeco.ca>

	* cbmdos.c: cbmdos_command_parse() was fixed to skip parsing
	the text after the record size was processed.  IE: opening
	"FILENAME,L,P" would result in a program file, not a REL file
	of record length 80.

	* cbmdos.c: cbmdos_command_parse() was fixed to not allow
	the creation of REL files less than 2 bytes.  This is
	noted in one of the CBM drive manuals, although most drives
	don't check for it.

	* parallel/parallel-trap.c: parallelattention() was corrected
	to call the vdrive->listenf function after unlistens also.

	* serial/fsdrive.c: fsdrive_unlisten() was corrected to call
	the vdrive->listenf function after unlistens also.

	* vdrive/vdrive-dir.c: vdrive_dir_create_slot() changed
	malloc to calloc to clear out the sequential write buffer.
	This keeps the disk images a little more cleaner.

	* vdrive/vdrive-iec.c: iec_open_write() changed malloc to
	calloc to clear out the sequential write buffer on replace
	mode.

	* vdrive/vdrive-iec.c: iec_open_write() changed the method
	used to update the block count of a sequential file during
	append mode.  We now recount the block number when following
	the links to find the end of the file.

	* vdrive/vdrive-rel.c: vdrive_rel_add_sector() fixed not to
	update the block count.  Deferred to vdrive_rel_grow()
	function.

	* vdrive/vdrive-rel.c: vdrive_rel_add_sector() corrected
	signed/unsigned variable assignments.

	* vdrive/vdrive-rel.c: vdrive_rel_grow() added block count
	update code here.  Also removed excessive writes to disk.

	* vdrive/vdrive-rel.c: vdrive_rel_open_existing() added DOS
	error message if sector couldn't be read.

	* vdrive/vdrive-rel.c: vdrive_rel_close() removed excessive
	disk writes.

	* vdrive/vdrive-rel.c: vdrive_rel_listen() removed block
	count code and placed it in vdrive_rel_grow() function.

2004-07-08  <fabrizio.ge@tiscali.it>

	* sound.c, sounddrv/sounduss.c: Added support for
	`HAVE_SYS_SOUNDCARD_H' define.

2004-06-30  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.35.

	* monitor/mon_file.c: Declare `mon_file_read_eof' int.

	* vdrive/vdrive-command.c, vdrive/vdrive-iec.c, cbmdos.c,
	fsdevice/fsdevice-open.c, fsdevice/fsdevice-read.c,
	arch/win32/rs232.c, c64/c64io.c, 6510core.c: Fixed minor
	warnings.

	* vdrive/vdrive-rel.c, vdrive/vdrive-rel.h (vdrive_rel_open,
	vdrive_rel_open_new): `name' is unsigned char.

	* cbmdos.h: Member `cmd' is unsigned char.

2004-06-28  Roberto Muscedere  <cococommie@cogeco.ca>

	* vdrive/vdrive-command.c: vdrive_command_copy() Fixed "copy"
	error which copied all but the last byte of a file.  This was
	due to the new CBM EOF introduced in 1.14.25.

	* c1541.c: Fixed copy_cmd(), extract_cmd() and read_cmd()
	error which read/copied all but the last byte of a file.
	This was due to the new CBM EOF introduced in 1.14.25.

	* monitor/mon_file.c: Added static mon_file_read_eof[4][16]
	to support CBM EOFs.  Initialised new variables in
	mon_file_open() and used in mon_file_read() to support CBM
	EOFs from "vdrive" to standard EOFS in "mon_file".

	* vdrive/vdrive-iec.c: iec_close_sequential() Initialised
	conditional variable - just in case.

	* vdrive/vdrive-rel.c: vdrive_rel_grow(), vdrive_rel_read()
	and vdrive_rel_write() Initialised conditional variable -
	just in case.

	* c1541.c: split_args() corrected to support "spaces" in
	quoted arguments.

2004-06-28  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.34.

	* cbmdos.c (cbmdos_command_parse): Fixed compile errors.

	* dma.c (dma_maincpu_steal_cycles): Fixed write cycles.

	* vicii/vicii-fetch.c (do_matrix_fetch): Pass `sub' parameter
	to DMA function.

	* machine.h, c64/c64.c, c128/c128.c, vic20/vic20.c,
	plus4/plus4.c, pet/pet.c, cbm2/cbm2.c
	(machine_tape_type_default): New function.

	* tape.h: Moved tape program type defines here.

	* tape/tape.c (tape_find_header_trap): Get machine specific
	program type define.

2004-06-25  Roberto Muscedere  <cococommie@cogeco.ca>

	* vdrive/vdrive-command.c: Changed argument type in
	declaration and function vdrive_command_block() to keep
	command chars unsigned.  Also added B-(shift)R and B-(shift)W
	(from 1581) to function since they operate as U1/UA and U2/UB.
	Also corrected bufferpointers for U1/UA and U2/UB.

	* vdrive/vdrive-command.c: vdrive_command_position() corrected
	to return DOS Error 50.

	* vdrive/vdrive-dir.c: Made vdrive_dir_free_chain() global so
	that save/replace can use it.

	* vdrive/vdrive-dir.h: Added SLOT entries for save and replace
	as well as GEOS slots for date/time.  CMD uses same slots.
	Also added vdrive_dir_free_chain() declaration.

	* vdrive/vdrive-command.c: vdrive_command_execute() added true
	B-R and B-W, corrected U1/UA and U2/UB.

	* vdrive/vdrive-command.c: added cursor-left to white-space in
	vdrive_get_block_parameters() - this is used in 1541 firmware.

	* vdrive/vdrive-iec.c: vdrive_iec_open() The buffer pointer of
	a newly opened buffer set to 1, not 0.  Probably relates to
	DOS1 and B-R, B-W commands.  Also fixed vdrive_iec_read() for
	this too as well as vdrive_iec_write().

	* vdrive/vdrive-iec.c: iec_open_write() changed to support
	append and save and replace.  Also creates directory entry
	before close to support SPLAT files.

	* vdrive/vdrive-iec.c: vdrive_iec_open() corrected NULL
	pointer reference if a new REL file was created.

	* vdrive/vdrive-iec.c: iec_write_sequential() changed to
	support save/replace as well as append mode.

	* vdrive/vdrive-iec.c: iec_close_sequential() changed to
	support save/replace as well as append mode.

	* vdrive/vdrive-iec.c: moved iec_read_relative() to
	vdrive-rel.c and renamed to vdrive_rel_read().

	* vdrive/vdrive-iec.c: Changed vdrive_iec_write() to call
	REL file write routing.

	* vdrive/vdrive-iec.c: Added vdrive_iec_listen() to call
	vdrive_rel_listen.

	* vdrive/vdrive-iec.c: Added vdrive_iec_update_dirent() to
	update REL and SEQ/PRG/USR directory entries (ie. splat files,
	block sizes).

	* cbmdos.c: cbmdos_command_parse() corrected signed
	declaration of input text to unsigned. This caused problems
	with the REL file length.  Also a case for append (",a").

	* vdrive/vdrive-iec.h: added declaration for
	vdrive_iec_listen(), and vdrive_iec_update_dirent().

	* vdrive/vdrive-rel.c: created vdrive_close_relative() to
	clean up closing of REL files (flushed side sectors and write
	buffers).

	* vdrive/vdrive-rel.c: vdrive_rel_read() changed to support
	REL file writing.  Added some code to return DOS Error 50 if
	we go past the end of a file.  Also added buffer wrapping if
	we position the REL pointer past the end of record on the last
	record.  On 1541/71/81, we end up getting data from another
	buffer (e.g. directory).

	* vdrive/vdrive-rel.c: Added vdrive_rel_write() to support
	REL file writes.

	* vdrive/vdrive-rel.c: Added vdrive_rel_listen() to move
	REL file to next record when an listen occurs.  Function
	performs other house keeping operations.

	* vdrive/vdrive-rel.c: Added vdrive_rel_has_super() to
	determine if the disk image requires a super-side-sector.

	* vdrive/vdrive-rel.c: Added vdrive_rel_blocks_max() to limit
	the size of growing REL files for a particular disk image.

	* vdrive/vdrive-rel.c: Changed vdrive_rel_open_existing() to
	support REL writing.

	* vdrive/vdrive-rel.c: Changed vdrive_rel_open() to support
	REL file creation and writing.  Also changed arguments so that
	name is passed so directory slot can be created.

	* vdrive/vdrive-rel.c: Changed vdrive_rel_record_max() to
 	support REL file creation and fixed an error with
	super-side-sectors.

	* vdrive/vdrive-rel.c: Added vdrive_rel_add_sector() to add
	one sector (254 bytes) to the end of a REL file.

	* vdrive/vdrive-rel.c: Added vdrive_rel_grow() to grow a REL
	file to a specific number of records.

	* vdrive/vdrive-rel.c: Added vdrive_rel_commit() to commit
	dirty buffers.

	* vdrive/vdrive-rel.c: Added vdrive_rel_fillrecord() to fill
	the remainer of a record with zeros.

	* vdrive/vdrive-rel.c: Changed vdrive_rel_position() toi
	support REL file writes and creation.

	* vdrive/vdrive-rel.h: Added declaration of:
	vdrive_rel_listen().

	* vdrive/vdrive.h: Added dir_track, dir_sector and dir_slot to
	struct bufferinfo_s so that we can remember where the
	directory entry is on the disk for the current REL or
	SEQ/PRG/USR file.  Also added *needsupdate to indicate if
	memory buffers are dirty.

	* cbmdos.h: Added DOS Error 52 - File Too Large.

	* drive/ieee/memieee.c: memieee_init() corrected oversight in
	memory read/write function that would map $5000 - $50ff out
	to RAM instead of unconnected.

	* fsdevice/fsdevice.c: fsdevice_error_get_byte() corrected to
	handle buffered reads to support CBM EOFs.  Missed this when
	all others were corrected back in 1.14.25.

	*** In order to support REL file reads, a new function had to
	added so that when an listen occured on the serial bus during
	a REL write, the REL pointer has to move to the next record.
	The following are the files change for this.

	* machine-bus.h: Added "listenf" to
	machine_bus_device_attach() prototype.

	* machine-bus.c: machine_bus_device_attach() Added "listenf"
	to argument list and code for setup.	

	* machine-bus.c: machine_bus_init() Added default
	initialization of new "listenf" member.

	* fsdevice/fsdevice.c: fsdevice_attach() Added NULL to
	argument list for new "listenf" function.

	* serial/fsdrive.c: fsdrive_listentalk() added code to call
	"p->listen" when an listen is sent.

	* parallel/parallel-trap.c: parallelattention() added code to
	call "p->listen" when an listen/talk is sent.

	* serial.h: added "listenf" member to struct serial_s.

	* printerdrv/interface-serial.c: interface_serial_attach()
	Added NULL to argument list for "listen" function for
	device 4 and 5.

	* c1541.c: machine_bus_device_attach() added "listenf"
	to function arguments.

2004-06-25  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.33.

	* fileio/cbmfile.c (cbmfile_find_file): Set path if no path is
	present.

	* interrupt.c, interrupt.h (interrupt_fixup_int_clk): Fixed
	interrupt clock calculation.

	* dma.c (dma_maincpu_steal_cycles): Likewise.

	* vice.h: Define `NEW_INTERUPT'.

	* vicii/vicii-fetch.c (handle_fetch_sprite): Removed obsolete
	cruft.

	* arch/win32/uilib.c, arch/win32/msvc/config.h: Fixed PATH
	defines as suggested by AndreasM.

2004-06-23  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.32.

	* Makefile.am: Added `crc32.h'.

	* parallel/parallel-trap.c, fileio/cbmfile.c, fileio/p00.c,
	vicii/vicii-irq.c, monitor/mon_file.c, serial/fsdrive.c,
	vic20/vic-mem.c, plus4/ted-irq.c, arch/unix/uicommands.c,
	c1541.c, drive/iecieee/via2d.c, drive/drivecpu.c, traps.c,
	vicii/vicii-sprites.c, printerdrv/interface-serial.c,
	findpath.c, vic20/vic20ieeevia1.c, vic20/vic20ieeevia2.c,
	vic20/vic20via1.c, vic20/vic20via2.c, drive/iec/via1d1541.c,
	drive/ieee/via1d2031.c: Fixed some warnings.

	* arch/win32/uirom.c, arch/win32/res.rc, arch/win32/res.h:
	Further ROM set work.

	* arch/win32/uilib.c, arch/win32/uilib.h (uilib_dialogbox):
	New function.

	* arch/win32/uispeed.c (ui_speed_settings_dialog): Use
	`uilib_dialogbox()'.

	* arch/win32/uilib.c, arch/win32/uilib.h,
	arch/win32/uiide64.c, arch/win32/uic128.c, arch/win32/uireu.c,
	arch/win32/uirom.c (uilib_select_browse): Added filter
	parameter.

	* sound.h: Include C standard file `stdio.h' instead of
	`unistd.h' to define `size_t'.

2004-06-23  pottendo  <pottendo@utanet.at>

	* sound.h: Added `unistd.h' for size_t.

	* arch/unix/x11/gnome/x11ui.c: include `uifliplist.h'.
	Fixed signature of `enter_window_callback',
	`exposure_callback_app', `exposure_callback_canvas',
	`fliplist_popup_cb', `tape_popup_cb', `update_menu_cb',
	filesel_autostart_cb', `speed_popup_cb' to proper
	callbacks.
	(fliplist_popup_cb): made static, introduced proper prototype.

	* arch/unix/x11/gnome/uiarch.h: Changed `ui_callback_t' to
	`GtkSignalFunc'.
	(UI_CALLBACK): Removed unused 3'rd parameter.
	This fixes the `-O2' gcc optimizer triggered bug.

2004-06-20  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/types.h: added PATH_MAX macro

	* arch/riscos/ui.c, arch/riscos/uiimage.c,
	arch/riscos/video.c: missing limits.h include

	* fsdevice/fsdevice-cmdline-options.c: include types.h

2004-06-20  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.31.

	* core/riotcore.c (riotcore_reset): Clear ports.

	* ioutil.c, ioutil.h (ioutil_maxpathlen): New function.

	* vice.h, c1541.c, findpath.c, arch/win32/uiconsole.c,
	fsdevice/fsdevicetypes.h, fsdevice/fsdevice-flush.c,
	fsdevice/fsdevice-open.c, fsdevice/fsdevice-read.c,
	fsdevice/fsdevice.c, arch/unix/uicommands.c, vsync.c,
	arch/unix/uikeyboard.c, arch/msdos/ui.h, arch/os2/config.h,
	arch/msdos/uiattach.c, arch/msdos/uisnapshot.c: Removed
	inclusion of `limits.h' and `sys/param.h' from `vice.h'.

	* crc32.c, crc32.h: New files.

	* util.c, util.h, c64/tfe.c: Moved crc specific code to
	separate file.

	* Makefile.am, arch/win32/base.dsp: Updated.

	* arch/unix/archdep.h, arch/win32/archdep.h,
	arch/msdos/archdep.h, arch/riscos/archdep.h,
	arch/beos/archdep.h, arch/os2/archdep.h, findpath.c,
	printerdrv/output-text.c, sysfile.c, arch/unix/archdep.c,
	arch/win32/archdep.c, arch/msdos/archdep.c,
	arch/beos/archdep.c, arch/os2/archdep.c: Fixed defines.

	* c64/c64tpi.c, cbm2/cbm2tpi1.c, cbm2/cbm2tpi2.c, cia.h,
	via.h: Added regparm patch contributed by Adam Sampson.

	* arch/os2/ui.h: #include "types.h".

2004-06-20  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/archdep.c:
	- replaced PATH_MAX by CCHMAXPATH

	* arch/os2/archdep.h:
	- removed obsolete MPS803_DEFAULT_OUTPUT_NAME

	* arch/os2/dialogs/dlg-fileio.c:
	- fixed VIDEO_PALETTE ambiguity for xcbm2
	- replaced vice2.fon by vice2.dll

	* arch/os2/dialogs/menubar.[h,c,rc]:
	- added NL-10 to printer devices
	- added 8580+digiboost
	- added Fast Resampling

	* arch/os2/fonts/vice-cbm.cmd:
	- do not create font-dll anymore

	* arch/os2/makedist.cmd:
	- copy nl10 rom

	* arch/os2/Makefile.am:
	- removed signals.h

	* arch/os2/signals.c:
	- moved arrays from signal.h to source file
	- ignore SIGINT

	* arch/os2/signals.h:
	- removed

	* arch/os2/vac++/*/*.icc:
	- updated

	* arch/os2/vac++/incl/monitor.icc:
	- found a fix for 'fileno'

	* arch/os2/vac++/incl/raster.icc:
	- udated
	- removed special optimization treatment

	* arch/os2/vac++/RESID.ICC:
	- updated version number

	* arch/os2/vac++/vicedll.ICC:
	- added info.c
	- added fonts

	* printerdrv/interface-serial.c:
	- fixed a typo

	* printerdrv/output-graphics.c:
	- made comment around obsolete code. Andreas B
	some time ago promised to reinvent this kind of
	rendering when the printer code is finished

	* raster/raster-line.c:
	- introduced a workaround for a os2 compiler bug

	* resid/sid.cc:
	- log(int) is not defined! Replaced by log(2.)

2004-06-17  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.30.

	* arch/unix/uiromset.c, arch/unix/uiromset.h, romset.c,
	romset.h, arch/win32/res.h, arch/win32/res.rc,
	arch/win32/uirom.c, machine.h, c64/c64romset.c,
	c128/c128romset.c, vic20/vic20romset.c, pet/petromset.c,
	plus4/plus4romset.c, cbm2/cbm2romset.c: More ROM set work.

	* util.c, util.h (util_addline): New function.
	(util_concat): Skip copy if list is empty.

	* arch/unix/archdep.h, arch/win32/archdep.h,
	arch/msdos/archdep.h, arch/riscos/archdep.h,
	arch/os2/archdep.h, arch/beos/archdep.h: Added standard line
	delimiter define.

	* arch/unix/x11/xaw/x11ui.c, arch/unix/x11/gnome/x11ui.c,
	arch/unix/ui.c, arch/unix/ui.h (ui_common_init): New function.

2004-06-14  Dag Lem  <resid@nimrod.no>

	* sid/resid.cc (resid_state_write): Use defaults for
	rate_period and exponential_counter_period in old snapshots.

	* sid/sid-snapshot.c (sid_snapshot_read_module_extended):
	Blank out sid_state before reading snapshot.

2004-06-14  Dag Lem  <resid@nimrod.no>

	* resid/: Compilation workaround for MSVC.

2004-06-12  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.29.

	* sid/sid-snapshot.c (sid_snapshot_write_module_extended,
	sid_snapshot_read_module_extended): Fixed forward and
	backward compatibility.

	* info.c: Updated.

2004-06-11  Dag Lem  <resid@nimrod.no>

	* resid/: Actually read sustain value in SID::read_state.
	Final reSID 0.16. Finally.

2004-06-08  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/{beos|msdos|riscos|unix|win32}/uimon.c,
	monitor/mon_util.c: fixed a vulnerability: calls to
	uimon_out() and console_out did not specify a format string,
	thus, any input with "%" could cause errors to VICE; even
	arbitrary code execution on the host machine was possible!

	* arch/win32/{x128|x64|xcbm2|xpet|xplus4|xvic}.dsp: Added
	wsock32.lib as library to make MSVC compile again.

2004-06-08  Dag Lem  <resid@nimrod.no>

	* resid/: Added fields to SID::State - final reSID 0.16?

	* sid/sid-snapshot.c, sid/sid-snapshot.h: Added
	rate_counter_period and exponential_counter_period to extended
	snapshot. Increased SNAP_MINOR_EXTENDED to 1.

2004-06-06  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.28.

	* video/render1x1.c, video/render1x1pal.c, video/render1x2.c,
	video/render2x2.c, video/render2x2pal.c: Fixed some warnings.

	* interrupt.c (interrupt_cpu_status_int_new): Fixed array size
	calculation.

	* arch/win32/rs232.c: Added patch contributed by Tim Newsham.

2004-06-05  Dag Lem  <resid@nimrod.no>

	* arch/unix/x11/video.c, video/renderyuv.c, video/renderyuv.h,
	video/video-render.c: Restored blur in XVideo PAL rendering.

2004-06-01  Roberto Muscedere  <cococommie@cogeco.ca>

	* vdrive/vdrive-dir.h: Added offset for REL file record size.

	* vdrive/vdrive-command.c: Updated REL record position command
	to compensate for default values and ORing of the channel
	number by 96.

	* vdrive/vdrive.h: Moved "side_sector" pointer from the vdrive
	structure to the buffer structure and added somemore
	variables.  The primary reason for this is so we can have more
	than one REL file opened at one time (1581's can do this, but
	not 1541's).

	* vdrive/vdrive-iec.c: Corrected REL file open command.
	Checks both requested and current record lengths and errors
	out it they are different.

	* vdrive/vdrive-iec.c: Removed closing of all channels if
	command channel is closed.  This caused problems with REL
	files in BASIC 7.0 with the RECORD command.

	* vdrive/vdrive-iec.c: Added iec_read_relative() to read REL
	files.

	* cbmdos.c: Corrected cbmdos_command_parse() not to set the
	default file type (base on secondary address) unless in write
	mode.  This solves several problems, for example, a load"$",8
	which would only show PRG files since the secondary address is
	1.

	* vdrive/vdrive-rel.c: Re-written to support efficient
	buffered reads of REL files (with super side sector support).
	Write abilility not included - it will give an error if you
	try to open a new REL file, but the code is ready for write
	modifications.

2004-05-31  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.27.

	* vicii/vicii-fetch.c (handle_fetch_sprite): Fixed DMA length
	calculation.  Disabled for now.

	* debug.c, interrupt.c, keyboard.c: Fixed warnings.

	* arch/win32/rs232.c: Added file contributed by Tim Newsham.
	Fixed several warnings.

	* arch/win32/Makefile.am, arch/win32/arch.dsp: Added new file.

	* arch/win32/msvc/config.h: Define `HAVE_RS232'.

	* arch/win32/uivideo.c (ui_video_settings_dialog): Reordered
	property sheet.

2004-05-26  Dag Lem  <resid@nimrod.no>

	* resid/: Restored full accuracy in resampling filter table
	lookup.

2004-05-24  Andreas Matthies  <andreas.matthies@gmx.net>

	* vicii/vicii.c (clk_overflow_callback): Handle overflow for
	sprite_fetch_clk.

	* vicii/vicii-snapshot.c (vicii_snapshot_read_module): Set
	sprite_fetch_clk one line earlier and recalculate
	vicii.sprite_fetch_idx.

2004-05-23  Andreas Matthies  <andreas.matthies@gmx.net>

	* c1541.c (write_cmd): Allocate memory for dest_name as
	finfo->name ist freed in fileio_close.

2004-05-23  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.26.

	* fsdevice/fsdevice-open.c (fsdevice_open_directory): Fixed
	memory corruption.

	* dma.c (dma_maincpu_steal_cycles): Call DMA debug.
	Remember all DMA events within one opcode.

	* debug.c, debug.h (debug_dma): New function.
	(debug_int, debug_irq, debug_nmi): Print clock.

	* 6510core.c [TRACE_NMI, TRACE_IRQ]: Added clock parameter.

	* interrupt.h: Added `num_cycles_left' to
	`interrupt_cpu_status_s'.
	(interrupt_set_irq, interrupt_set_nmi): Fixed calculation of
	`irq_clk' if DMA has happened.  This is not enabled yet.

	* interrupt.c (interrupt_cpu_status_reset): Reset
	`num_cycles_left'.
	(interrupt_fixup_int_clk): New function.

	* maincpu.c (maincpu_mainloop): Clear DMA per opcode counter
	after any opcode.

2004-05-22  Andreas Matthies  <andreas.matthies@gmx.net>

	* drive/drive-snapshot (drive_snapshot_write_module,
	drive_snapshot_read_module): Moved attach_detach_clk value
	to the very end of the module.

2004-05-21  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.25.

	* keyboard.h, joystick.h: Fixed declaration of `snapshot_s'.

	* cbm2/cbm2mem.c: Added SID patch contributed by Marco van den
	Heuvel.

2004-05-20  Roberto Muscedere  <cococommie@cogeco.ca>

	* serial/fsdrive.c: Removed EOF buffering in fsdrive_read();
	all *(p->getf) functions must return SERIAL_EOF on last byte
	now

	* parallel/parallel-trap.c: Removed EOF in
	parallelreceivebyte();
	all *(p->getf) functions must return SERIAL_EOF on last byte
	now

	* fsdevice/fsdevicetypes.h: Added 1-byte read ahead buffering
	variables to struct fs_buffer_info_s

	* fsdevice/fsdevice-read.c: Added 1-byte read ahead buffering
	in command_read() to present CBM EOF on last byte (for
	serial/fsdrive.c)

	* fsdevice/fsdevice-open.c: Added 1-byte read ahead buffering
	initialisation to fsdevice_open_file()

	* vdrive/vdrive-iec.c: Modified iec_read_sequential() to send
	CBM EOF with last byte

	* vdrive/vdrive-iec.c: Modified vdrive_iec_read() to send CBM
	EOF with last byte

2004-05-20  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.24.

2004-05-18  Dag Lem  <resid@nimrod.no>

	* resid/: reSID 0.16 - even faster resampling.

	* arch/beos/ui_sid.cc: Added "fast resampling" to
	samplingmode.

	* arch/msdos/uisid.c (toggle_ResidSampling_callback): Allow
	value = 3.

	* arch/unix/uisid.c: Added "Fast Resampling" to
	sid_resid_sampling_submenu.

	* arch/win32/uisid.c: Added "fast resampling" to
	ui_sid_samplemethod.

2004-05-17  Andreas Matthies  <andreas.matthies@gmx.net>

	* joystick.h, joystick.c: New functions
	joystick_snapshot_write_module, joystick_snapshot_read_module.

	* keyboard.h, keyboard.c: New functions
	keyboard_snapshot_write_module, keyboard_snapshot_read_module.

	* <machine>/<machine>-snapshot.c (<machine>_snapshot_read):
	Read keyboard and joystick snapshot module.
	(<machine>_snapshot_write): Write keyboard and joystick
	snapshot module.

2004-05-15  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* c64/tfe.c: Make sure tfe_reset() is only called in the
	ressource handling functions if tfe has been initialized
	before; before, there were some cases where selecting tfe
	crashed the emulator.

2004-05-14  Andreas Matthies  <andreas.matthies@gmx.net>

	* debug.c, debug.h: Replaced resource AutoPlaybackLogs with a
	frame based AutoPlaybackFrames. Added new function
	debug_check_autoplay_mode that handles changes between
	recording and playback.

	* vsync.c (vsync_do_vsync): Call debug_check_autoplay_mode if
	DEBUG is defined.

	* drive/drive-snapshot.c (drive_snapshot_write_module,
	drive_snapshot_read_module): Read/write the drives
	attach_detach_clk value.

	* drive/driveimage.c (drive_image_detach): Reset the drive
	struct even if drive->imgae is NULL. This is especially needed
	when you detach a disk and need a correct detach_clk after you
	have read a snapshot, which reads the gcr data but leaves
	data->image empty.

	* maincpu.c (maincpu_snapshot_read_module): Temporary removed
	the "mighty kludge" as it causes problems with some snapshots.
	FIXME: Needs further investigation.

	* vicii/vicii-snapshot.c (vicii_snapshot_read_module): Don't
	use vicii_irq_set_raster_line to restore the raster IRQ as it
	would delay IRQ on line 0 for one frame.

2004-05-13  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/uimon.c: Don't call EnumChildWindows if monitor
	isn't open.

	* datasette.c (datasette_read snapshot): Don't set tape sense
	if no image is attached.

	* debug.c, debug.h: New resource AutoPlaybackLogs, new
	functions debug_set_milestone, debug_reset_milestone which
	handle milestones while debugging history.
	debug_history_step and debug_stop_playback handle new trace
	mode DEBUG_AUTOPLAY: Switch from recording to playback and
	vice versa if number of logs has reached AutoPlaybackLogs.

	* event.c (event_record_set_milestone_trap): Call
	debug_set_milestone.
	(event_record_reset_milestone_trap): Call
	debug_reset_milestone.

2004-05-10  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.23.

2004-05-10  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/ui.c (handle_wm_command): Fixed memory leak.

	* arch/win32/uifliplist.c: Include util.h.
	(uifliplist_save_dialog). Append default file extension.

	* arch/win32/uilib.c: Fixed memory leak.

	* c128/c128.c, c64/c64.c, cbm2/cbm2.c, pet/pet.c,
	plus4/plus4.c, vic20/vic20.c, tape/tape.c, tape.h: Made
	tape_image_detach_internal public and use it to avoid memory
	leaks when playing back history file.

	* datasette.c (datasette_read_snaphot): Call
	datasette_set_tape_sense depending on image->mode.

	* fliplist.c, resources.c, tape-snapshot.c, zfile.c: Fixed
	more memory leaks.

2004-05-06  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/archdep.c:
	- fixed archdep_default_fliplist_file_name
	- fixed IsDir check

	* arch/os2/config.h:
	- do not define HAVE_TFE by default

	* arch/os2/dialogs/dlg-color.c, arch/os2/dialogs/dlg-color.h
	arch/os2/dialogs/dlg-color.rc:
	- added PALScanLineShade and PALBlur

	* arch/os2/dialogs/dlg-fileio.c:
	- fixed names of PaletteFile

	* arch/os2/dialogs/menubar.[h,c,rc]:
	- fixed Pal mode access
	- added tfe stuff

	* arch/os2/mousedrv.c:
	- fixed a strange crash when startup
	- fixed resource handling

	* arch/os2/vac++/incl/*.icc, arch/os2/vac++/incl/*/*.icc:
	- fixed

	* arch/os2/vac++/incl/monitor.icc:
	- set correct options for mon_parse.c

	* arch/os2/vac++/incl/raster.icc:
	- do not optimize raster-line.c (COMPILER BUG?)

	* arch/os2/video.c:
	- fixed and simplified initialisation of canvas
	- fixed correct resizing and double-scan

	* ioutil.c:
	fixed for OS/2

2004-05-05  Dag Lem  <resid@nimrod.no>

	* resid/: reSID 0.16 - faster resampling.

	* arch/unix/x11/gnome/uiscreenshot.c (uiscreenshot_shutdown):
	free of buttons variable instead of nonexisting
	driver_buttons variable.

2004-05-04  pottendo  <pottendo@utanet.at>

	* arch/unix/x11/gnome/uiscreenshot.c (uiscreenshot_shutdown):
	Fixed `driver_buttons' -> `buttons'.

	* info.c: Added `Paul Dub' to the credits list.

2004-05-02  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.22.

	* arch/unix/ui.h: Fixed prototype.

	* raster/raster.c, raster/raster.h, vicii/vicii.c,
	vic20/vic.c, crtc/crtc.c, vdc/vdc.c, plus4/ted.c
	(raster_set_title): Take machine name.

	* pet/pet.c, arch/unix/uisettings.c, arch/unix/tfearch.c,
	arch/unix/uiprinteriec.c, arch/unix/uiprinterieee.c,
	arch/msdos/c64ui.c, arch/msdos/video.c, arch/win32/ui.c:
	Fixed includes.

	* arch/unix/ui.c, arch/unix/uiscreenshot.h,
	arch/unix/x11/xaw/uiscreenshot.c,
	arch/unix/x11/gnome/uiscreenshot.c: Fixed memory leak.

2004-05-02  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/archdep_shutdown: Free some string variables.

	* arch/win32/fullscrn.c, fullscrn.h: New function
	ui_fullscreen_shutdown to free the device and mode lists.

	* arch/win32/ui-resources.c: Implemented function
	ui_resources_shutdown.

	* arch/win32/ui.c (ui_exit): Free the hwnd_title strings and
	call ui_fullscreen_shutdown and uilib_shutdown.

	* arch/win32/uilib.c: Free contents buffer after usage, added
	new function uilib_shutdown.

	* arch/win32/fullscrn.c, arch/win32/joy.c, tape/tap.c,
	screenshot.c: Replaced generic memory allocation with the
	lib_* functions.

	* c64/c64.c, c128/c128.c (machine_specific_shutdown): Call
	tfe_shutdown.

	* c64/tfe.c (tfe_shutdown): Free tfe_interface string.

	* event.c (event_image_append): Allocate a new string for
	mapped_name.
	(event_playback_attach_image): Free filename after usage.

	* fliplist.c, fliplist.h: New function
	fliplist_resources_shutdown.

	* romst.c, romset.h: New function romset_resources_shutdown.

	* machine.c: Include romset.h.
	(machine_shutdown): Call fliplist_resources_shutdown and
	romset_resources_shutdown.

2004-05-01  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/uirom.c: Fixed typo.

	* attach.c (file_system_attach_disk_internal): Call
	event_record_attach_image instead of recoding the filename.
	(file_system_event_playback): Gets unit and filename parameter
	directly now.

	* tape/tape.c: Changed likewise.

	* attach.h, tape.h: Changed *_event_playback prototypes.

	* c64/tfe.c: Removed crc32 helper and use the one in util.

	* event.h: New ID EVENT_ATTACHIMAGE. New prototypes.

	* event.c: Added event_image_list to remember the attached
	images, created and destroyed with the event_list.
	New function event_image_append which is used to add new
	image names to the list, find previously attached images,
	and store the mapped filenames in the playback session.
	New funtions event_record_attach_image,
	event_playback_attach_image to store new images in the history
	when recording and to create temporary files from the stored
	image when playing back.
	(event_alarm_handler): Uses these funtions to handle
	EVENT_ATTACHIMAGE.

	* util.c, util.h: New funtions util_get_extension,
	util_crc32, util_crc32_file.

2004-04-25  pottendo  <pottendo@utanet.at>

	* arch/unix/ui.h: Added prototype for `ui_restore_mouse()'.

	* arch/unix/uimon.c (uimon_window_close): Check whether mouse
	shall be enabled.

	* arch/unix/uicommands.c (active_monitor): Restore mouse.

2004-04-24  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.21.

2004-04-19  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* c64/tfe.c: tfe_deactive() now calls tfe_deactive_i() if
	should_activate is not 1; there was an "else" missing, causing
	VICE to bugcheck whenever TFE was activated afterwards. The
	c64export functions are moved from TFE/RR selection to the
	enabling/disabling of the whole cartridge itself. As both
	cards use the same memory area, this makes more sense than the
	behaviour before. Don't disable tfe_as_rr_net when the TFE
	cartridge is disabled.  Depending on the UI selection code, it
	might be the tfe_as_rr_net is not restored when the card is
	selected again.

	* arch/unix/tfearch.c: new implementation, now uses libpcap
	and libnet to access the network. This should be more portable
	for other platforms than Linux.

2004-04-18  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.20.

	* arch/unix/uiromset.c, arch/unix/uiromset.h,
	arch/unix/c64ui.c, arch/unix/c128ui.c, arch/unix/vic20ui.c,
	arch/unix/petui.c, arch/unix/plus4ui.c, arch/unix/cbm2ui.c:
	More romset UI.

	* romset.c, romset.h, c64/c64romset.c, c128/c128romset.c,
	vic20/vic20romset.c, pet/petromset.c, plus4/plus4romset.c,
	cbm2/cbm2romset.c, machine.h, arch/os2/dialogs/dlg-fileio.c,
	arch/unix/uiromset.c, arch/msdos/menudefs.c, arch/riscos/ui.c:
	Romset archive changes.

2004-04-17  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/res<machine>.rc: Changed menu item for event
	history file and directory selection.

	* arch/win32/statusbar.c: Fixed warning.

	* arch/win32/ui.c (handle_wm_command): IDM_EVENT_DIRECTORY
	will also be used to select start and end snapshot file.

	* arch/win32/uilib.c: Added new member file_resource to
	uilib_fs_style_type_t and replaced UILIB_SELECTOR_STYLE_EVENT
	with UILIB_SELECTOR_STYLE_EVENT_START and
	UILIB_SELECTOR_STYLE_EVENT_END.
	(uilib_select_file_autostart): file_resource is used for
	initial file selection and to change resource with selected
	file.

	* event.c: More precise error messages. Reset UI if something
	fails at startup of playback or recording.
	(event_playback_start_trap): Try both the filename inside the
	history snapshot module and the EventStartSnapshot resource
	to open start snapshot. This makes it possible to rename
	snapshot files after recording.

2004-04-14  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/ui.c: protected ui_update_menus() against
	premature calls (VIC20 crash on startup)

2004-04-11  Andreas Boose  <viceteam@t-online.de>

        * Version 1.14.19.

	* arch/win32/uirom.c, arch/win32/res.rc: More romset UI.

	* arch/win32/uilib.c, arch/win32/uilib.h
	(uilib_select_browse): New function.

	* arch/win32/uireu.c, arch/win32/uiide64.c,
	arch/win32/uic128.c: Use filename browse function.

	* resources.c, resources.h (string_resource_item,
	resources_write_item_to_string): New function.

	* romset.c, romset.h (romset_file_list): New function.

	* c64/c64romset.c, c128/c128romset.c, vic20/vic20romset.c,
	pet/petromset.c, plus4/plus4romset.c, cbm2/cbm2romset.c,
	machine.h (machine_romset_file_list): New function.

	* arch/unix/uiromset.c, arch/unix/uiromset.h: New files.

	* arch/unix/Makefile.am: Added new files.

	* arch/unix/uisettings.c, arch/unix/uisettings.h: Moved romset
	code to separate file.

	* arch/unix/c64ui.c, arch/unix/c128ui.c, arch/unix/vic20ui.c,
	arch/unix/petui.c, arch/unix/plus4ui.c, arch/unix/cbm2ui.c,
	arch/unix/uidrivec128.c, arch/unix/uidrivec64vic20.c,
	arch/unix/uidrivepetcbm2.c, arch/unix/uidrivepetcbm2.h,
	arch/unix/uidriveplus4.c, arch/unix/uidriveplus4.h,
	arch/unix/uidrivec128.c: Reorganized romset settings.

2004-04-10  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.18.

	* arch/win32/res.rc, arch/win32/res.h, arch/win32/uirom.c,
	romset.c, romset.h: Further romset improvements.

	* init.c (init_resources): initialize romset resources.

2004-04-10  Andreas Matthies  <andreas.matthies@gmx.net>

	* uiapi.h, arch/beos/ui.cc, arch/msdos/ui.c, arch/os2/ui.c,
	arch/riscos/ui.c, arch/unix/ui.c: Added new prototype and
	dummies for ui_display_event_time.

	* arch/win32/statusbar.c, statusbar.h: New functions
	statusbar_event_status, statusbar_event_time.
	(SetStatusWindowParts): Handles another part for the event
	playback and recording UI.
	(statusbar_handle_WMDRAWITEM): Event UI implemented,
	statustext uses DT_WORDBREAK now, some code cleanup.

	* arch/win32/ui.c (ui_display_event_time): New function using
	the statusbar to display recording/playback time.

	* event.h: New event ID EVENT_TIMESTAMP. Renamed
	event_playback_reset_ack to event_reset_ack as this is even
	used when recording.

	* event.c: Implemented another event EVENT_TIMESTAMP.
	event_alarm is used to record these events once a second.
	Recording and playing back these events is used to update the
	event UI. Counting these events in the end snapshot file is
	used to determine the total playing time.

	* machine.c (machine_reset) Fixed call.

2004-04-05  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/statusbar.c (statusbar_create): Send WM_SIZE
	message after height is set.

2004-04-03  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.17.

	* c64/c64-resources.c, c128/c128-resources.c,
	vic20/vic20-resources.c, pet/pet-resources.c,
	plus4/plus4-resources.c, cbm2/cbm2-resources.c,
	drive/iec/iec-resources.c, drive/ieee/ieee-resources.c,
	drive/iec128dcr/iec128dcr-resources.c,
	drive/tcbm/tcbm-resources.c: Added romset resources.

	* c64/c64romset.c, c64/c64romset.h, c128/c128romset.c,
	c128/c128romset.h, vic20/vic20romset.c, vic20/vic20romset.h,
	pet/petromset.c, pet/petromset.h, plus4/plus4romset.c,
	plus4/plus4romset.h, cbm2/cbm2romset.c, cbm2/cbm2romset.h:
	New files.

	* c64/Makefile.am, c128/Makefile.am, vic20/Makefile.am,
	pet/Makefile.am, plus4/Makefile.am, cbm2/Makefile.am,
	arch/win32/c64.dsp, arch/win32/c128.dsp, arch/win32/vic20.dsp,
	arch/win32/pet.dsp, arch/win32/plus4.dsp, arch/win32/cbm2.dsp:
	Added new files.

	* c64/c64mem.c, c128/c128mem.c, vic20/vic20mem.c,
	pet/petmem.c, plus4/plus4mem.c, cbm2/cbm2mem.c, mem.h: Removed
	broken romset definitions.

	* init.c (init_main): Initialize romset handling.

	* arch/os2/dialogs/dlg-fileio.c, arch/unix/uisettings.c,
	arch/msdos/menudefs.c, arch/riscos/ui.c, machine.h: Changed to
	new romset API.

	* romset.c, romset.h: First changes for better romset support.

	* arch/win32/petui.c, arch/win32/plus4ui.c,
	arch/win32/statusbar.c, arch/win32/uivideo.c,
	arch/win32/vic20ui.c, arch/win32/c64ui.c, arch/win32/c128ui.c,
	arch/win32/cbm2ui.c: Fixed warnings.

2004-03-28  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.16.

	* arch/win32/uilib.c, arch/win32/uiide64.c,
	arch/win32/uic128.c: Use common file selector.

	* arch/win32/uicmdline.c, arch/win32/uilib.c, uicmdline.h,
	arch/win32/uilib.h, arch/win32/ui.c, c1541.c, petcat.c: Moved
	`uilib_show_options()'.

	* arch/win32/uirom.c, arch/win32/resc64.rc,
	arch/win32/resc128.rc, arch/win32/resvic.rc,
	arch/win32/respet.rc, arch/win32/resplus4.rc,
	arch/win32/rescbm2.rc, arch/win32/res.h, arch/win32/uirom.h,
	arch/win32/c64ui.c, arch/win32/c128ui.c, arch/win32/vic20ui.c,
	arch/win32/petui.c, arch/win32/plus4ui.c, arch/win32/cbm2ui.c:
	Added drive firmware ROM UI.

2004-03-27  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.15.

	* c64/tfe.c: #include "util.h".

	* arch/win32/uilib.c, arch/win32/uilib.h, arch/win32/ui.c,
	arch/win32/uivideo.c, arch/win32/vic20ui.c,
	arch/win32/uic64cart.c, arch/win32/uiplus4cart.c,
	arch/win32/uirom.c, arch/win32/uiperipheral.c,
	arch/win32/uisnapshot.c, arch/win32/uifliplist.c,
	arch/win32/uirom.h, arch/win32/c64ui.c, arch/win32/c128ui.c,
	arch/win32/vic20ui.c, arch/win32/petui.c,
	arch/win32/plus4ui.c, arch/win32/cbm2ui.c, arch/win32/uireu.c,
	arch/win32/ui-resources.c: Reorganized file selector API.

	* arch/win32/uicart.c, arch/win32/uicart.h: New files.

	* arch/win32/Makefile.am, arch/win32/arch.dsp: Added new
	files.

	* uicmdline.h: Fixed warning.

2004-03-27  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/ui.cc, arch/msdos/ui.c, arch/os2/ui.c,
	arch/riscos/ui.c, arch/unix/ui.c, arch/win32/ui.c: Added
	dummies or implementations for ui_display_joyport.

	* arch/beos/joy.cc, arch/beos/ui.h: Removed arch dependent
	joystick display.

	* arch/beos/statusbar.cc: Adapted to common joystick display.

	* arch/win32/Makefile.am, arch.dsp: Added new file.

	* arch/win32/statusbar.c: Rearranged statusbar to display all
	four drives and the joystick status.

	* arch/win32/statusbar.h: Added prototype for
	statusbar_display_joyport.

	* arch/win32/ui-resources.c: New file.

	* arch/win32/ui.c: Moved resource and cmdline stuff to
	seperate file. Removed unused code.
	(ui_display_speed, ui_display_statustext): Clear status text
	after 5 seconds.

	* joystick.c(joystick_latch_matrix): Call ui_display_joyport.

	* uiapi.h: New prototype ui_display_joyport.

2004-03-21  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.14.

	* arch/unix/uitfe.c, arch/unix/uitfe.h, arch/unix/uilib.c,
	arch/unix/uilib.h: New files.

	* arch/unix/Makefile.am: Added new files.

	* arch/unix/c64ui.c, arch/unix/c128ui.c: Added TFE menu.

	* c64/tfe.c, arch/unix/archdep.h, arch/win32/archdep.h,
	arch/msdos/archdep.h, arch/riscos/archdep.h,
	arch/os2/archdep.h, arch/beos/archdep.h: Added Ethernet
	default device.

	* arch/unix/uireu.c, arch/unix/uiide64.c, arch/unix/uirs232.c,
	arch/unix/uiperipheral.c, arch/unix/uiprinter.c: Use uilib.

	* drive/ieee/fdc.c, drive/drive-writeprotect.c, iecbus.h,
	iecbus/iecbus.c, c64/c64cia2.c, c64/c64iec.h,
	plus4/plus4iec.h, c64/reloc65.c: Removed warinings.

2004-03-21  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* c64/tfe.c: Don't activat tfe if tfe_init() has not yet been
	called.

	* c64/tfearch.c: As it is done in tfe.c know, don't test if
	tfe_arch_init() has been called before activating.
	tfe_arch_enumadapter() and tfe_arch_enumadapter_open() and
	tfe_arch_enumadapter_close() now do something usefull

2004-03-21  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.13.

	* drive/drive.c, drive/drive.h (drive_current_track_size_set):
	New function.

	* drive/drive-snapshot.c (drive_snapshot_read_module): Also
	set current track size as suggested by AndreasM.

	* drive/drive-writeprotect.c, drive/drive-writeprotect.h: New	
	files.

	* drive/Makefile.am, arch/win32/drive.dsp: Added new files.

	* drive/drive.c, drive/drive.h, drive/iecieee/via2d.c,
	drive/tcbm/glue1551.c: Moved write protect code to separate
	file.

	* drive/drivecpu.c, 6510core.c: Fixed naming.

	* 6510core.c: Simplified JSR and JMP opcodes.

	* pet/petvideo.c (machine_video_init): Init 2x2 render.

	* crtc/crtc.c (crtc_set_screen_options): Refresh double size
	settings after the window geometry has been updated.

	* video/video-resources.c (set_double_size_enabled): Resize
	viewport even if only one dimensions has changed.

2004-03-15  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.12.

	* 6510core.c: Fixed branch and RTS opcodes.

	* arch/unix/uiattach.c, arch/unix/uiattach.h,
	arch/unix/uikeyboard.c, arch/unix/uikeyboard.h: New files.

	* arch/unix/Makefile.am: Added new files.

	* arch/unix/ui.c (ui_common_shutdown): Shutdown attach UI.

	* arch/unix/uicommands.c, arch/unix/uicommands.h: Moved attach
	specific code to separate file.

	* arch/unix/c64ui.c, arch/unix/c128ui.c, arch/unix/petui.c,
	arch/unix/vic20ui.c, arch/unix/plus4ui.c, arch/unix/cbm2ui.c:
	Changed calls to attach UI.

	* arch/unix/uisettings.c, arch/unix/uisettings.h: Moved
	keyboard code to separate file.

2004-03-14  Dag Lem  <resid@nimrod.no>

	* resid/: Fixed bug in fast envelope clocking.

	* arch/unix/uicommands.c: Moved GNOMEUI toggles to
	uifliplist.c

	* arch/unix/uifliplist.c: Added include of "uidrive.h". Moved
	GNOMEUI toggles from uicommands.c

2004-03-14  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.11.

	* 6510core.c: Fixed indirect indexed addressing mode.

	* arch/unix/uiide64.c, arch/unix/uiide64.h,
	arch/unix/uifliplist.c, arch/unix/uifliplist.h: New files.

	* arch/unix/Makefile.am: Added new files.

	* arch/unix/c64ui.c, arch/unix/c128ui.c: Added IDE64 submenu.

	* arch/unix/uicommands.c: Added menu entries to reset drive
	#10 and #11.  Moved fliplist code to separate file.

	* arch/unix/ui.c (ui_common_shutdown): Shutdown fliplist UI.

	* arch/unix/x11/xaw/x11ui.c, arch/unix/x11/gnome/x11ui.c,
	arch/unix/ui.h (ui_update_flip_menus): Renamed.

2004-03-13  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.10.

	* 6510core.c: Fixed indexed indirect addressing mode.

2004-03-11  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/unix/Makefile.am: Added tfearch.c

	* arch/unix/tfearch.c: new file

2004-03-08  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* c64/tfe.c, c64/tfe.h, arch/win32/tfearch.c: Added support
	for output each and every TFE frame into the vice log,
	allowing for using this to paste into ethereal for debugging
	purposes.

	* c64/tfe.c: Fixed a warning where &A-1 was used: Now, it is
	&(A-1).

	* c64/tfe.c: Fixed uninitialized variables in
	tfe_should_accept().

2004-03-08  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.9.

	* arch/win32/ui.c, arch/win32/uiconsole.c,
	arch/win32/uimediafile.c, arch/win32/uiperipheral.c,
	arch/win32/winmain.c, arch/win32/winmain.h: Fixed some
	multibyte char issues.

	* monitor/monitor.c, monitor.h, monitor/mon_util.c, signals.h,
	arch/unix/signals.c, arch/win32/signals.c,
	arch/msdos/signals.c, arch/riscos/signals.c,
	arch/os2/signals.c, arch/beos/signals.c: Moved signal specific
	code from monitor to separate files.

	* vicii/vicii-badline.c (switch_to_display_state): Fixed typo
	as spotted by AndreasM.

	* vice.h, arch/os2/archdep.c, arch/beos/archdep.c,
	arch/msdos/menudefs.c, arch/msdos/archdep.c,
	arch/msdos/uisnapshot.c, arch/msdos/uiattach.c,
	arch/win32/archdep.c, util.c: Removed `GET_PATH_MAX' define.

	* arch/msdos/joy.c: Fixed some warning.

	* cbmdos.c (cbmdos_command_parse): Fixed hack.

	* monitor.h, monitor/monitor.c, c128/z80.c, 6510core.c,
	monitor/mon_breakpoint.c, c64/c64mem.c, c128/c128mem.c,
	vic20/vic20mem.c, pet/petmem.c, plus4/plus4mem.c,
	cbm2/cbm2mem.c, drive/drivemem.c, monitor/montypes.h: Fixed
	some function names.

2004-03-03  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/archdep.c (archdep_boot_path): Added alternative
	method for NT4 systems without psapi.dll.

2004-02-29  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.8.

	* signals.h, arch/unix/signals.c, arch/win32/signals.c,
	arch/msdos/signals.c, arch/riscos/signals.c,
	arch/os2/signals.c, arch/beos/signals.c: New files.

	* Makefile.am, arch/unix/Makefile.am, arch/win32/Makefile.am,
	arch/win32/arch.dsp, arch/msdos/Makefile.am,
	arch/riscos/Makefile.am, arch/os2/Makefile.am,
	arch/beos/Makefile.am: Added new files.

	* init.c (init_main): Use new signal init function.

	* archapi.h, arch/unix/archdep.c, arch/win32/archdep.c,
	arch/msdos/archdep.c, arch/riscos/archdep.c,
	arch/os2/archdep.c, arch/beos/archdep.c: Moved signal code to
	separate files.

	* c1541.c (write_cmd): Fixed destination file name.

2004-02-29  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/ui.c (reset_dialog_proc): Don't clear keyboard
	matrix before reset.

	* fliplist.c (flip_load_list): Check if filename is empty.

	* gfxoutputdrv/bmpdrv.c (bmpdrv_write_bitmap_info): Set DPI in
	BMP header.

	* printerdrv/drv-ascii.c (drv_ascii_open): Set DPI to 100x100.
	This is not used, it's set just to have some default values.

	* printerdrv/drv-mps803.c (drv_mps803_open): Set DPI to 72x72.

	* printerdrv/drv-nl10.c (drv_nl10_open): Set DPI to 300x300.

	* printerdrv/output-graphics.c (output_graphics_open): Forward
	DPI settings to screenshot structure.

	* output.h (output_parameter_t): Added tags for DPI
	resolution.

	* raster/raster.c (raster_screenshot): Set DPI to 100x100.

	* screenshot.h (screenshot_t): Added tags for DPI resolution.

2004-02-29  Andreas Matthies  <andreas.matthies@gmx.net>

	* c1541 (split_args): Added \r to the whitespace characters.
	A whitespace doesn't reset begin_of_args.

2004-02-28  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.7.

	* sounddrv/soundsdl.c (sdl_write): Added big endian patch
	provided by Daniel Aarno.

	* arch/win32/dirent.c, arch/win32/evc/system.h,
	arch/win32/ui.c, arch/win32/uic128.c, arch/win32/uiconsole.c,
	arch/win32/uilib.c, arch/win32/uimediafile.c,
	arch/win32/uiperipheral.c, arch/win32/uisnapshot.c,
	arch/win32/uisnapshot.h, arch/win32/uispeed.c,
	arch/win32/uivideo.c, arch/win32/archdep.c: Use multi byte
	functions.

	* c1541.c, petcat.c: Added some temporary kludge.

2004-02-28  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/resc128.rc, resc64.rc, rescbm2.rc, respet.rc,
	resplus4,rc, resvic.rc, ui.c: Fixed shortcuts to avoid
	conflicts with menu navigation. Debugging toggles are on
	Alt+F10..Alt+F12 now, milestone shortcuts are Alt+G, Alt+H.

2004-02-26  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/Makefile.am: Added new files to makefile.

	* arch/win32/arch.dsp: Added new files to project.

	* arch/win32/plus4.dsp: Added new files to project.

	* arch/win32/plus4ui.c (plus4_ui_specific, plus4_ui_init):
	Call cart ui functions.

	* arch/win32/res.h: Added IDs for Plus4 cartridge menu items.

	* arch/win32/resplus4.rc: Added Plus4 cartridge menu items.

	* arch/win32/uiplus4cart.c, arch/win32/uiplus4cart.h: New
	files, handles Plus4 cartridge UI.

	* gfxoutput.h (gfxoutput_early_init): New function.

	* gfxoutputdrv/gfxoutput.c (gfxoutput_early_init,
	gfxoutput_init): Split initializations into to functions.

	* main.c (main_program): Call gfxoutput_early_init.

	* plus4/Makefile.am: Added new files to makefile.

	* plus4/plus4-cmdline-options.c: Added new commandline options
	for cartridges.

	* plus4/plus4-resources.c: Added new resources for cartridge
	support.

	* plus4/plus4cart.c, plus4/plus4cart.h: New files, implements
	plus4 cartridge support.

	* plus4/plus4rom.c (plus4rom_load_3plus1lo,
	plus4rom_load_3plus1hi):
	Empty resources are accepted for C16 support.
	(mem_load): Load cartridges as well.

	* plus4/ted-mem.c (ted06_store, ted07_store): Recalculate
	memory pointers if certain bits do change.

	* plus4/ted.c (ted_update_memory_ptrs): Fixed char base
	address calculation for all cases.

2004-02-25  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.6.

	* arch/win32/evc/system.c, arch/win32/evc/system.h,
	arch/win32/system.c, arch/win32/mingw32/system.h,
	arch/win32/msvc/system.h: Added more multi byte utility
	functions.

	* arch/win32/uireu.c, arch/win32/uirom.c, arch/win32/uisid.c,
	arch/win32/uisnapshot.c, arch/win32/uispeed.c,
	arch/win32/uivideo.c, arch/win32/dirent.c, arch/win32/ui.c,
	arch/win32/ui.h, arch/win32/statusbar.c, arch/win32/uilib.c,
	arch/win32/uic128.c, arch/win32/uiide64.c, arch/win32/kbd.c,
	arch/win32/kbd.h, arch/win32/uijoystick.c,
	arch/win32/uimediafile.c, arch/win32/uiperipheral.c,
	arch/win32/winmain.c, arch/win32/winmain.h: Use multi byte
	functions.

	* arch/win32/evc/config.h: Removed `sys/types.h' define.

	* c64/tfe.c (set_tfe_rr_net): Use expansion port resource
	management.

2004-02-24  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* autostart.c: When autostarting, put a colon after the run
	command to prevent programs that write on the screen to fail
	to run.

2004-02-23  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* c64/tfe.c: The CS8900a does not allow writing the packetpage
	pointer register with an odd address. Until now, an assertion
	failed if this was the case. Now, we only log this event, but
	do not fail VICE.

2004-02-23  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* c64/tfe.c: Fixed a bug where the maximum receive packet
	length was overwritten while calling tfe_arch_receive(). This
	resulted in many corrupt packages received.

2004-02-22  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.5.

	* vic20/vic20iec.c, c64/c64iec.c, drive/iec/iec.c,
	plus4/plus4iec.c, iecdrive.h, drive/drivetypes.h,
	drive/iec/cia1581d.c, drive/iec/via1d1541.c: Added VIC20 four
	drives support.

	* c64/c64parallel.c, pet/petiec.c, cbm2/cbm2iec.c, iecdrive.h,
	drive/iec/iec.c, drive/drive-snapshot.c, vic20/vic20iec.c,
	plus4/plus4parallel.c, drive/iec/via1d1541.c,
	drive/drivetypes.h: Added parallel cable four drives support.

	* arch/win32/uivideo.c, arch/win32/uireu.c: Replaced some char
	usage.

	* arch/win32/system.c (system_wcstombs, system_mbs_free,
	system_mbstowcs, system_mbs_free): New functions.

	* arch/win32/system.h: Moved to msvc and mingw32 directory.

	* arch/win32/evc/system.c, arch/win32/evc/system.h: New files.

	* arch/win32/Makefile.am: Updated.

	* debug.c (debug_history_step, debug_open_new_file): Fixed
	prototypes.

2004-02-16  Tibor Biczo  <crown@axelero.hu>

	* fliplist.c (fliplist_resources_init): Fixed memory
	corruption caused by freeing default factory_value resource
	tag.

2004-02-15  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.4.

	* c64/c64export.c, c64/c64export.h: New files.

	* c64/Makefile.am, arch/win32/c64.dsp, arch/win32/c64c128.dsp:
	Added new files.

	* c64/cart/actionreplay.c, c64/cart/actionreplay.h,
	c64/cart/atomicpower.c, c64/cart/atomicpower.h,
	c64/cart/epyxfastload.c, c64/cart/epyxfastload.h,
	c64/cart/expert.c, c64/cart/expert.h, c64/cart/final.c,
	c64/cart/final.h, c64/cart/generic.c, c64/cart/generic.h,
	c64/cart/ide64.c, c64/cart/kcs.c, c64/cart/kcs.h,
	c64/cart/magicformel.c, c64/cart/magicformel.h,
	c64/cart/retroreplay.c, c64/cart/retroreplay.h,
	c64/cart/supergames.c, c64/cart/supergames.h,
	c64/cart/supersnapshot.c, c64/cart/supersnapshot.c,
	c64/cart/zaxxon.c, c64/cart/zaxxon.h: Use C64 export resource
	functions.

	* c64/c64.c, c128/c128.c (machine_resources_init): Init export
	resources.

	* c64/cart/c64cartmem.c (cartridge_detach): Detach carts.

	* c64/c64io.c (io2_read, io2_store): Moved up REU access.

	* c64/cart/supersnapshot.c, c64/cart/expert.c: Removed IO2
	hack.

	* c64/reu.c (set_reu_enabled): Use C64 export resource
	functions.

	* arch/unix/uic64cart.c (attach_cartridge): Fixed error
	message.

	* vdrive/vdrive-iec.c (iec_open_read_directory): Pass
	`CBMDOS_FT_DEL' to the directory creation routine.
	(vdrive_iec_open): Honour file type is opened for reading.

	* vdrive/vdrive-dir.c (vdrive_dir_name_match): Cosmetics.

	* arch/win32/evc/config.h: Removed defines.

	* arch/win32/msvc/config.h: Added defines.

2004-02-08  Andreas Matthies  <andreas.matthies@gmx.net>

	* 6510core.c: Call debug_drive with more parameters.

	* debug.c, debug.h: Fixed commandline option -trace_mode,
	(debug_drive): Added more parameters and implemented history
	mode.

	* core/viacore.c (via_reset): Set tal, tbl as the register
	values need it.

2004-02-07  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.3.

	* arch/win32/iec128dcr.dsp, arch/win32/iecieee.dsp,
	arch/win32/Makefile.am: Fixed.

	* c64/cart/crt.c (crt_attach): Attach Magic Formel cart.

	* c64/cart/magicformel.c, c64/cart/magicformel.h: New files.

	* c64/cart/Makefile.am, arch/win32/c64cart.dsp: Added new
	files.

	* c64/cart/c64cartmem.c (cartridge_attach): Setup MF cart.
	(cartridge_init_config): Init MF cart config.
	(cartridge_read_io1, cartridge_store_io1, roml_read,
	roml_store, ultimax_1000_7fff_read, ultimax_1000_7fff_store,
	ultimax_a000_bfff_read, ultimax_a000_bfff_store,
	ultimax_c000_cfff_read, ultimax_c000_cfff_store,
	ultimax_d000_dfff_read, ultimax_d000_dfff_store, romh_read):
	Added MF support.

	* c64/c64mem.c, c64/c64mem.h, c64/c64cart.h
	(mem_store_without_ultimax, mem_read_without_ultimax): New
	functions.  (store_bank_io, read_bank_io): Made global.

	* c128/c128mem.c: Changed likewise.

	* c64/c64meminit.c (c64meminit): More hooks for Ultimax mode.

	* drive/drive.c, drive/drive.h (drive_gcr_data_writeback_all):
	New function.

	* drive/drive-snapshot.c (drive_snapshot_write_module,
	drive_snapshot_read_module): Write back GCR track first.

	* arch/win32/archdep.c, arch/win32/msvc/config.h,
	arch/win32/winmain.c: Use checked header files.

2004-02-06  Andreas Matthies  <andreas.matthies@gmx.net>

	* debug.c, debug.h: Changed resource TraceSmall to TraceMode.
	This is now also used to select history debugging.
	(debug_maincpu): Handles three different debug modes NORMAL,
	SMALL and HISTORY now.
	(debug_text, debug_int): Handle history mode.
	New functions debug_close_file, debug_create_new_file,
	debug_open_new_file, debug_history_step, debug_stop_playback,
	debug_start_playback, debug_stop_recording,
	debug_start_recording

	* event.c: Include debug.h.
	The start/stop_recording/playback code calls
	debug_start/stop_recording/playback function if DEBUG is
	defined.

2004-02-03  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.2.

	* drive/iec128dcr.h, drive/iec128dcr/iec128dcr.c,
	drive/iec128dcr/Makefile.am, arch/win32/iec128dcr.dsp,
	drive/iec128dcr/iec128dcr-resources.c,
	drive/iec128dcr/iec128dcr-resources.h,
	drive/iec128dcr/iec128dcr-cmdline-options.c,
	drive/iec128dcr/iec128dcr-cmdline-options.h: New files.

	* drive/Makefile.am, Makefile.am, arch/win32/vice.dsw:
	Updated.

	* drive/ieee/iec-resources.c, drive/ieee/ieee-resources.c,
	drive/tcbm/tcbm-resources.c, drive/iec/iec.c: Fixed includes.

	* c128/c128drive.c: New file.

	* c128/Makefile.am, c64/Makefile.am, arch/win32/c128.dsp,
	arch/win32/c64c128.dsp: Updated.

	* drive/iec/iec-resources.c, drive/iec/iecrom.c,
	drive/iec/iecrom.h, drive/iec/iec-cmdline-options.c: Removed
	C128DCR specific code.

	* arch/win32/evc/config.h: New file.

	* vice.h, arch/win32/msvc/config.h: Moved win32 specific
	define to config file.

	* event.c, event.h, machine.c [EVENT_RESET]: Renamed.

	* arch/win32/uiide64.c, arch/win32/uic128.c,
	arch/win32/uiconsole.c, arch/win32/uimediafile.c,
	arch/win32/uilib.c, arch/win32/uisnapshot.c,
	arch/win32/uireu.c: #include <commdlg.h>.

	* main.c (main_program): Replaced call to `perror()'.

	* c1541.c, pet/pet-snapshot.c, cbm2/cbm2-snapshot.c,
	vic20/vic20-snapshot.c: Removed call to `perror()'.

2004-02-01  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.1.

	* screenshot.c: Fixed warning.

	* fileio/p00.c (p00_compare_wildcards): Removed.

	* vdrive/vdrive-iec.c, vdrive/vdrive-iec.h, machine-bus.c,
	machine-bus.h, serial.h, cbmdos.h, fsdevice/fsdevice-open.c,
	fsdevice/fsdevice-open.h, printerdrv/interface-serial.c:
	Changed some prototypes.

	* vdrive/vdrive-dir.c, vdrive/vdrive.h (vdrive_dir_name_match,
	vdrive_dir_find_first_slot): Use CBMDOS API.

	* cbmdos.c (cbmdos_parse_wildcard_compare): Also return match
	if both slots reach 0xa0.

	* diskimage/fsimage-create.c (fsimage_create_gcr): Minor
	cleanups.

	* arch/unix/x11/xaw/uiedisk.c (save_callback): Fixed number of
	formats.

	* vdrive/vdrive-command.c (vdrive_command_validate): Fixed old
	BAM define.

	* diskimage/fsimage-check.c, diskimage/fsimage-check.h
	(fsimage_check_sector): Take image struct.

	* diskimage/diskimage.c (disk_image_check_sector): Pass image
	struct to `fsimage_check_sector()'.

	* diskimage/fsimage-check.c (fsimage_check_sector): Added G64
	case.

2004-01-27  Andreas Matthies  <andreas.matthies@gmx.net>

	* screenshot.h, screenshot.c: New functions
	screenshot_prepare_reopen, screenshot_try_reopen.
	(screenshot_save): Remeber filename, drivername and canvas
	for the *_reopen function.

	* sid/sid-snapshot.c: Include screeshot.h.
	(sid_snapshot_read_module_simple): Try to reopen the
	screenshot.

2004-01-25  Andreas Boose  <viceteam@t-online.de>

	* Version 1.14.

	* fliplist.c (flip_load_list): Always continue loop if "UNIT "
	is found.

	* arch/win32/reside64.rc: Fixed title.

	* arch/win32/uifliplist.c: Use flip list filter.

2004-01-24  Andreas Dehmel  <zarquon@t-online.de>

	* info.c: updated my email-address

2004-01-24  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.49.

	* arch/win32/reside64.rc, arch/win32/uiide64.c,
	arch/win32/uiide64.h: New files.

	* arch/win32/Makefile.am, arch/win32/arch.dsp: Added new
	files.

	* arch/win32/resc64.rc, arch/win32/resc128.rc,
	arch/win32/res.h, arch/win32/c64ui.c, arch/win32/c128ui.c:
	Added IDE64 UI.

	* arch/win32/uireu.c: Added greying.

2004-01-24  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/c64ui.cc, vsidui.cc: Moved the vsid specific
	stuff from c64ui.cc to vsidui.cc.

2004-01-22  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/fullscrn.c (init_fullscreen_dialog,
	dialog_fullscreen_proc): Handle DirectX primary surface
	rendering checkbox.

	* arch/win32/res.h: Added IDC_TOGGLE_VIDEO_DX_PRIMARY.

	* arch/win32/res.rc (IDD_FULLSCREEN_SETTINGS_DIALOG): Added
	checkbox for DirectX primary surface rendering selection.

	* arch/win32/ui.c (NUM_OF_COMMON_HOTKEYS): Updated value.

	* arch/win32/video.c (set_dx_primary_surface_rendering): New
	function for setting new resource.
	(resources): Added DXPrimarySurfaceRendering resource.
	(real_refresh): Primary surface rendering try only happens if
	resource allows it.
	Changed primary surface render failure from error reporting to
	a simple warning into the log file.

2004-01-21  pottendo  <pottendo@utanet.at>

	* arch/unix/uicommands.c
	(events_set_ms,events_return_ms,events_select_dir):
	New functions implementing the event record UI.
	
2004-01-18  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.48.

	* arch/os2/dialogs/dialogs.rc, arch/os2/install.cmd,
	arch/beos/ui.cc, arch/unix/x11/xaw/about.c, arch/msdos/ui.c,
	arch/unix/x11/gnome/about.c, arch/msdos/menudefs.c,
	resid/THANKS, arch/win32/res.rc, info.c: Updated.

	* arch/win32/resc64.rc, arch/win32/resc128.rc: Moved cart
	settings to separate popup.

	* cbmdos.c, cbmdos.h, fileio/p00.c, fileio/cbmfile.c: Fixed
	wildcard support.

2004-01-16  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.47.

	* arch/win32/res.h, arch/win32/resvic.rc,
	arch/win32/vic20ui.c, arch/win32/respet.rc,
	arch/win32/petui.c, arch/win32/resplus4.rc,
	arch/win32/plus4ui.c, arch/win32/rescbm2.rc,
	arch/win32/cbm2ui.c

	* c128/c128-cmdline-options.c: Fixed BASIC ROM command line
	switch.

	* c64/cart/ide64.c: Make autodetecting image size a resource.

	* tape/tap.c (tap_cbm_print_error): Removed trigraph.

	* vicii/vicii-draw.c (_draw_idle): Added fix provided by
	AndreasM.

2004-01-13  pottendo  <pottendo@utanet.at>

	* arch/unix/x11/xaw/x11ui.c (x11ui_open_canvas_window):
	Adjusted layout.
	(ui_display_drive_current_image): Allow widgets up to
	NUM_DRIVES.

2004-01-13  David Hansel  <david@hansels.net>

	* tape/tap.c: improved error tolerance for reading
	TurboTape encoded files

2004-01-12  David Hansel  <david@hansels.net>

	* tape/tap.c: fixed warnings

2004-01-12  Fabrizio Gennari  <fabrizio.ge@tiscali.it>

	* printerdrv/drv-nl10.c: fixed crash when ROM image
	can't be found

	* arch/msdos/archdep.c (archdep_default_fliplist_file_name):
	Added fliplist name.

	* arch/msdos/menudefs.c (create_ui_video_submenu): Fixed line
	wrap.

	* drive/iec/cia1571d.c (cia1571_setup_context): Initialize CIA
	struct.

	* drive/iec/cia1581d.c (cia1581_setup_context): Initialize CIA
	struct.

2004-01-11  pottendo  <pottendo@utanet.at>

	* event.c: Prepared strings for translations for calls to
	function ui_error().

	* gfxoutputdrv/ffmpegdrv.c: Prepared strings for translations
	for calls to function ui_error().

	* sound.c: Prepared strings for translations for calls to
	functions ui_error() and sound_error().

	* autostart.c (load_snapshot_trap): Prepared UI string for
	translations.
	* screenshot.c (screenshot_save): Likewise.

	* arch/unix/x11/gnome/x11ui.c (x11ui_open_canvas_window):
	Initialize ui style green.
	Added color to labels of event rec/playback buttons.
	Added ui statusbar widgets for event recording.

	* arch/unix/x11/gnome/uiscreenshot.c
	(build_screenshot_dialog):
	Changed to vbox and label buttons with driver->displayname.

2004-01-11  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.46.

	* ioutil.c (ioutil_access): Use archdep access modes.

2004-01-10  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/res.h, resc128.rc, resc64.rc, rescbm2.rc,
	respet.rc, resplus4.rc, resvic.rc: Added menuitem to select
	directory for the event history.

	* arch/win32/uilib.c, uilib.h: Added another file selector
	style for the event history directory.

	* arch/win32/ui.c: Uses this ui_select_file with this new
	style.

	* event.c: New resource EventSnapshotDir. Removed obsolete
	resource EventMilestoneSnapshot, this is now implemeted with
	the end snapshot.
	Reading from and writing to a snapshot uses new function
	event_snapshot_path, which concatenates the snapshot dir with
	the snapshot filename.
	Fixed a bug in event_record_reset_milestone_trap.

2004-01-08  David Hansel  <david@hansels.net>

	* arch/unix/x11/xaw/x11ui.c: Fixed compile error

	* autostart.c (autostart_tape): Fixed off-by-one error
	when calling tape_seek_to_file

	* tape.h, tape/tapeimage.c, tape/tap.c, 
	imagecontents/tapecontents.c:  When listing contents 
	of TAP file, list turbo-tape files as "TPRG" instead of "PRG"
		
2004-01-07  David Hansel  <david@hansels.net>

	* arch/unix/uisettings.c,
	arch/unix/x11/ui-cmdline-options.c,
	arch/unix/x11/ui-resources.c,
	arch/unix/x11/xaw/x11ui.c, arch/unix/x11/gnome/x11ui.c:
	Added "Confirm on exit" resource, command-line parameter
	and menu entry.

	* arch/unix/x11/gnome/x11ui.c (delete_event): Fixed bug that
	made VICE exit even if user chose "No" in confirmation dialog
	after closing VICE via the window manager (i.e. clicking 
	the top-right-corner "x" of the emulator window)
	
	* tape/tap.c (tap_cbm_read_file_seq):  Fixed reading of SEQ
	files

2004-01-06  David Hansel  <david@hansels.net>

	* tape/tap.c:  Added support for TurboTape encoded files
	
2004-01-06  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.45.

	* arch/unix/archdep.h, arch/msdos/archdep.h,
	arch/win32/archdep.h, arch/riscos/archdep.h,
	arch/beos/archdep.h, arch/os2/archdep.h: Moved access mode
	definitions to archdep headers.

	* vice.h: Do not include "lose32.h" anymore.  Removed obsolete
	`XPM' define.

	* arch/win32/lose32.h: Removed.

	* arch/win32/Makefile.am: Updated.

	* drive/iec/wd1770.c, drive/iec/wd1770.h
	(wd1770_attach_image): Added attach clock.
	(wd1770_disk_change): New function.
	(clk_overflow_callback): Added `attach_clk'.

	* drive/iec/cia1581d.c (read_ciapa): Proper disk change
	emulation.

	* interrupt.c (interrupt_trigger_reset): Check if CPU status
	is present.

2004-01-06  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/statusbar.c: Statusbar can have six parts, so
	the posx array needs six fields.

2004-01-05  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/archdep.c: initialize the default fliplist
	name

2004-01-02  David Hansel  <david@hansels.net>

	* tape/tap.c (tap_read):  improved error recovery, 
	  timing refinements

2004-01-02  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/joy.cc, ui.cc, ui_file.cc, ui_sid.cc, ui_video.cc,
	vicewindow.cc, videoarch.h, sounddrv/soundbeos.cc: Fixed
	typos.

	* arch/beos/ui.cc, statusbar.cc, ui_drive.cc: Extended to
	handle four drives.

	* arch/beos/ui_video.cc: Changed according to new resource
	names.

	* arch/beos/video.cc (video_canvas_destroy): Don't free the
	canvas.

	* arch/beos/vicewindow.cc: Calls mouse driver functions when
	button is used.

2003-12-31  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.44.

	* c1541.c (write_cmd): Fixed printed file names.

	* fliplist.c, fliplist.h (set_fliplist_file_name,
	fliplist_resources_init, fliplist_cmdline_options_init): New
	functions.

	* main.c (main_program): Removed fliplist hook.

	* init.c (init_resources, init_cmdline_options): Init flip
	list resources and command line options.

	* arch/win32/uifliplist.c, arch/win32/uifliplist.h,
	arch/win32/uic64cart.c, arch/win32/uic64cart.h,
	arch/win32/uirom.c, arch/win32/uirom.h: New files.

	* arch/win32/Makefile.am, arch/win32/arch.dsp: Added new
	files.

	* arch/win32/resc64.rc, arch/win32/resc128.rc,
	arch/win32/resvic.rc, arch/win32/respet.rc,
	arch/win32/resplus4.rc, arch/win32/rescbm2.rc,
	arch/win32/res.h, arch/win32/ui.c: Added fliplist, drive reset
	and firmware ROM UI.

	* arch/win32/uilib.c, arch/win32/uilib.h: Added fliplist file
	selector style.

	* arch/win32/c64ui.c, arch/win32/c128ui.c: Moved C64 cart UI
	to separate file.  Added firmware ROM settings.

	* arch/win32/ui.c, arch/win32/ui.h, arch/win32/plus4ui.c,
	arch/win32/vic20ui.c, arch/win32/c64ui.c, arch/win32/cbm2ui.c,
	arch/win32/c128ui.c, arch/win32/petui.c,
	arch/win32/uic64cart.c: Fixed struct names.

	* arch/win32/uivideo.c: Grey out external palette UI if
	external palette is not selected.

2003-12-31  David Hansel  <david@hansels.net>

	* tap.h, tape/tap.c, tape/tapeimage.c: implemented tap_read()

	* imagecontents/tapecontents.c: correctly list tape SEQ files

	* c1541.c: differentiate between PRG and SEQ files when
	copying from tape

	* fsdevice/fsdevice-open.c:  when reading from tape, ignore
	load address for sequential files.

2003-12-30  David Hansel  <david@hansels.net>

	* iecbus.h, iecbus/iecbus.c, serial/serial-iec-device.c:
	More warning fixes

	* arch/win32/uiperipheral.c:  Disable "Formfeed" button
	when printer is off.

2003-12-29  David Hansel  <david@hansels.net>

	* fsdevice/fsdevice-open.c:  Fixed tape access via fsdevice

2003-12-29  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/spritedrv.c: removed recording call from driver

2003-12-28  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.43.

	* arch/msdos/uiperipherial.c, arch/msdos/uiperipherial.h,
	arch/msdos/uiprinter.c, arch/msdos/uiprinter.h,
	arch/msdos/uisound.c, arch/msdos/uisound.h,
	arch/msdos/uijoystick.c, arch/msdos/uijoystick.h,
	arch/msdos/uidrive.c, arch/msdos/uidrive.h,
	arch/msdos/uic64cart.c, arch/msdos/uic64cart.h: New files.

	* arch/msdos/Makefile.am: Updated.

	* arch/msdos/menudefs.c: Moved peripherial and sound code to
	separate file.  Added drive #10 and #11 reset.

	* arch/msdos/c64ui.c, arch/msdos/c128ui.c: Moved C64 cart code
	to separate file.

	* uicmdline.h, arch/unix/uicmdline.c (ui_cmdline_show_help):
	Changed first parameter to `unsigned int'.

	* zfile.c, arch/unix/joy.c: Made some variables static.

	* pet/petvia.c, pet/petsound.h, pet/petsound.c, pet/pet.c:
	pet/petmem.c, pet/petmem.h, pet/petrom.c, pet/petrom.h,
	pet/petmemsnapshot.c: Fixed some names.

	* cbmdos.c, cbmdos.h (cbmdos_filetype_get): New function.

	* vdrive/vdrive-dir.c, imagecontents/diskcontents-block.c,
	vdrive/vdrive.c: Use cbmdos file type function.

	* petcat.c: Removed cruft.

	* machine.c, machine.h, c64/c64.c, c128/c128.c, vic20/vic20.c,
	pet/pet.c, plus4/plus4.c, cbm2/cbm2.c (machine_specific_init):
	New function.

	* machine.c, machine-video.h, c64/c64video.c,
	c128/c128video.c, vic20/vic20video.c, pet/petvideo.c,
	plus4/plus4video.c, cbm2/cbm2video.c (machine_video_init): New
	function.

	* video/video-render-pal.c, video.h (video_render_pal_init):
	New function.

	* video/video-render.c, video/video-render.h
	(video_render_1x2func_set, video_render_2x2func_set,
	video_render_palfunc_set): New functions.
	(video_render_main): Use function pointer.

	* video/video-render-1x2.c, video-render-2x2.c: New files.

	* video/video-render-pal.h: Removed.

	* video/Makefile.am, arch/win32/video.dsp: Updated.

2003-12-28  David Hansel  <david@hansels.net>

	* serial/serial-iec-device.c, printerdrv/drv-nl10.c:  Fixed
	warnings

2003-12-26  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/archdep.c: fixed archdep_stat()

	* arch/riscos/spritedrv.c: adapted to gfxoutput changes

2003-12-25  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.42.

	* sounddrv/soundallegro.c: #include "log.h".
	(allegro_write): Commented out unused variable.
	Commented out variable `allegro_startup_done'.

	* info.c, arch/msdos/menudefs.c: Updated.

	* arch/msdos/uireu.c, arch/msdos/uireu.h: New files.

	* arch/msdos/Makefile.am: Added new files.

	* arch/msdos/c64ui.c, arch/msdos/c128ui.c: Use separate REU UI
	code.

	* fileio/fileio.c, fileio.h, fileio/cbmfile.c,
	fileio/cbmfile.h, fileio/p00.c, p00.h, rawfile.c, rawfile.h:
	Changed prototypes.

	* fileio/fileio.c (fileio_open): Do not allocate NULL path.

	* fileio/cbmfile.c (cbmfile_open): Fill in name length.

	* fileio/p00.c (p00_open): Changed likewise.

	* c1541.c (read_cmd, write_cmd): Use fileio API.

	* petcat.c (main): Removed p00 code.

	* fileio/p00.h: Moved here.

	* Makefile.am, fileio/Makefile.am: Updated.

	* rawfile.c, rawfile.h (rawfile_seek_set): New function.
	Moved rawfile struct to source and changed the type of `fd' to
	`FILE' to remove all those ugly castings.

	* ioutil.c, ioutil.h (ioutil_stat): New function.
	(ioutil_errno): Add more error cases.

	* archapi.h, arch/unix/archdep.c, arch/win32/archdep.c,
	arch/msdos/archdep.c, arch/riscos/archdep.c,
	arch/os2/archdep.c, arch/beos/archdep.c (archdep_stat): New
	function.

	* fsdevice/fsdevice-read.c (command_directory_get): Use IOUTIL
	stat and access functions.

	* drive/drive.c, snapshot.c: Removed non ISO C includes.

	* fsdevice/fsdevice-flush.c, c1541.c: Use IOUTIL errno
	function.

	* drive/drive-check.c, c64/c64fastiec.c, c64/c64parallel.c,
	c128/c128fastiec.c, plus4/plus4-cmdline-options.c,
	plus4/plus4-resources.c, plus4/plus4datasette.c, pet/petrom.c,
	plus4/plus4memlimit.c, plus4/plus4parallel.c,
	plus4/plus4tcbm.c, cbm2/cbm2-cmdline-options.c,
	arch/unix/x11/xaw/uiscreenshot.c, arch/unix/cbm2ui.c,
	arch/unix/x11/gnome/uiscreenshot.c, arch/unix/plus4ui.c,
	arch/unix/x11/ui-cmdline-options.c, arch/unix/uic64cart.c,
	arch/unix/x11/ui-resources.c, arch/unix/uicmdline.c,
	arch/unix/uicrtc.c: Added missing includes.

	* serial/serial-iec-device.c
	(serial_iec_device_clk_overflow_callback): Made static.

	* parallel/parallel.c [parallel_emu, state]: Made static.

	* vicii/vicii-color.h, vic20/vic-color.h: Fixed definition of
	struct.

	* core/ciatimer.c: Commented out unused code.

	* pet/petmem.c (ram_read, ram_store, read_watch, store_watch,
	superpet_powerup, read_super_io, store_super_io, read_super_9,
	store_super_9, store_io, read_io): Made static.

	* plus4/plus4mem.c (mem_config_rom_set, read_watch,
	store_watch, basic_read, ram_read, ram_read_32k, ram_read_16k.
	ram_store, ram_store_32k, ram_store_16k): Made static.

	* cbm2/cbm2mem.c [_mem_read_tab_watch,
	_mem_read_ind_tab_watch, _mem_write_tab_watch,
	_mem_write_ind_tab_watch]: Made static.

2003-12-24  Andreas Dehmel  <zarquon@t-online.de>

	* rawfile.c: cast rawfile_info_t::fd to FILE* before using it
	in stdio calls.

2003-12-23  David Hansel  <david@hansels.net>

	* printerdrv/drv-nl10.c:  Fixed character upload.
	ixed bottom margin issues.  Reduced border size.  Allocate
	memory for character RAM dynamically instead of static.

	* rawfile.c:  In function rawfile_ferror(), inserted
	(FILE *) cast to make code compile on Visual C++ 7.0

2003-12-23  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.41.

	* cbmdos.c, cbmdos.h: New files.

	* Makefile.am, arch/win32/base.dsp, arch/win32/c1541.dsp:
	Added new files.

	* vdrive/vdrive.c, vdrive/vdrive-bam.c, vdrive/vdrive-command,
	cmvdrive/vdrive-iec.c, vdrive/vdrive-internal.c,
	fsdevice/fsdevice-close.c, fsdevice/fsdevice-flush.c,
	fsdevice/fsdevice-open.c, fsdevice/fsdevice.c, c1541.c,
	vdrive/vdrive-command.h, fsdevice/fsdevice-read.c,
	fileio/p00.c, vdrive/vdrive-dir.c,
	imagecontents/diskcontents-block.c: Use cbmdos functions.

	* fileio/fileio.c, fileio.h, fileio/cbmfile.c, fileio/p00.c,
	fileio/cbmfile.h, p00.h, fsdevice/fsdevice-read.c,
	fsdevice/fsdevice-write.c, fsdevice/fsdevice-close.c,
	fsdevice/fsdevice-open.c, fsdevice/fsdevicetypes.h: Added read
	and write support to fileio API.

	* c1541.c (raw_cmd, list_cmd): Fixed.

	* diskimage/diskimage.c, diskimage.h (disk_image_name_get):
	New function.

	* c64/cart/ide64.c, c64/cart/ide64.h: Added resources and
	command line options to set geometry.

	* c64/cart/c64cart.c (cartridge_resources_init,
	cartridge_cmdline_options_init): Initialize ide64 resources
	and command line options.

	* c64/cart/c64cart.c, c64/c64cart.h, c64/cart/ide64.c,
	c64/cart/ide64.h: Moved existing resources to ide64 file.

2003-12-20  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.40.

	* fsdevice/fsdevice-flush.c, fileio/fileio.c, fileio.h,
	fileio/p00.c, p00.h, fileio/cbmfile.c, fileio/cbmfile.h,
	rawfile.c, rawfile.h, ioutil.c, ioutil.h: Moved scratch and
	rename functionallityy to fileio layer.

	* fsdevice/fsdevice.c, fsdevice/fsdevicetypes.h, util.c:
	Removed some now obsolete cruft.

2003-12-18 Andreas Matthies <andreas.matthies@gmx.net>

	* arch/win32/uimediafile.h, uimediafile.c: New files. Removed
	mediafile related stuff from uisnapshot to these files.

	* arch/win32/res<machine>.rc: Changed mediafile menu item.

	* arch/win32/res.h, res.rc: Changed mediafile dialog.

	* arch/win32/Makefile.am, arch/win32/arch.dsp,
	arch/win32/vice.dsw: Added missing files and projects.

	* arch/win32/msvc/config.h: Define HAVE_DIRENT_H.

	* gfxoutput.h, gfxoutputdrv/bmpdrv.c, gfxoutputdrv/pngdrv.c:
	Added new member display_name to the driver struct.

	* gfxoutputdrv/ffmpeglib.h, gfxoutputdrv/ffmpegdrv.c,
	arch/unix/ffmpeglib.c, arch/win32/ffmpeglib.c: Removed all
	the global function pointers and replaced them by a static
	struct. Added new function ffmpegdrv_shutdown. Registers
	multiple gfxoutput drivers with different display_name for
	all the useful file types. Only force MP3 audio stream for
	AVI files.

	* screenshot.c (screenshot_save): Test if a movie is still
	recording.

2003-12-13  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.39.

	* fileio/fileio.c, fileio.h, fileio/cbmfile.c, fileio/p00.c,
	fileio/cbmfile.h, p00.h, fsdevice/fsdevicetypes.h,
	fsdevice/fsdevice-open.c, fsdevice/fsdevice-close.c,
	fsdevice/fsdevice.c: Added more P00 functionallity to the
	fileio layer.

2003-12-13  Andreas Dehmel  <zarquon@t-online.de>

	* resid/filter.cc: init f0_6581 and f0_8580 to avoid floating
	point exceptions later on in set_w0()

2003-12-13  David Hansel  <david@hansels.net>

	* printerdrv/drv-nl10.c:  implemented vertical tabs,
	top and bottom margins.  Fixed bug in mapping table.

2003-12-10  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.38.

	* fileio/fileio.c, fileio.h, fileio/p00.c, p00.h
	fileio/cbmfile.c, fileio/cbmfile.h, rawfile.c, rawfile.h,
	autostart.c: Added path to fileio API.

	* fsdevice/fsdevice-read.c, fsdevice/fsdevice.c,
	fsdevice/fsdevicetypes.h, fsdevice/fsdevice-open.c,
	fsdevice/fsdevice-read.c, fsdevice/fsdevice-close.c:
	Reorganized to use fileio API.

	* ioutil.c, ioutil.h (ioutil_opendir, ioutil_readdir,
	ioutil_closedir): New functions.

2003-12-07  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/petui.c: enable true drive icons for PET

	* arch/riscos/ui.c: init message windows as early as possible

	* arch/riscos/uiconfig.c: removed Catweazel engine

	* arch/riscos/video.c: cleanup (const pointers, explicit
	initialization)

2003-12-06  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.37.

	* fileio.h, fileio/Makefile.am, fileio/fileio.c, fileio/p00.c,
	fileio/cbmfile.c, fileio/cbmfile.h, rawfile.c, rawfile.h,
	arch/win32/fileio.dsp: New files.

	* Makefile.am, arch/win32/base.dsp, arch/win32/c1541.dsp,
	arch/win32/petcat.dsp, arch/win32/vice.dsw,
	arch/win32/Makefile.am: Updated.

	* p00.h: Added new function.

	* p00.c: Moved to `fileio' directory.

	* autostart.c, autostart.h (autostart_prg): Use new fileio
	API.  (autostart_shutdown): New function.

	* machine.c (machine_shutdown): Call `autostart_shutdown()'
	and `zfile_shutdown()'.

	* zfile.c, zfile.h (zfile_list_destroy, zfile_shutdown): New
	functions.

	* initcmdline.c (cmdline_free_autostart_string): New function.
	(initcmdline_check_attach): Free autostart string.

2003-12-04  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.36.

	* video.h, vicii/vicii-resources.c, vdc/vdc-resources.c,
	vic20/vic-resources.c, crtc/crtc-resources.c,
	plus4/ted-resources.c, video/video-resources.c: Added PAL
	capability.

	* c64/c64video.c, c128/c128video.c, vic20/vic20video.c,
	pet/petvideo.c, plus4/plus4video.c, cbm2/cbm2video.c,
	machine-video.h: New files.

	* c64/Makefile.am, c128/Makefile.am, vic20/Makefile.am,
	pet/Makefile.am, plus4/Makefile.am, cbm2/Makefile.am,
	arch/win32/c64.dsp, arch/win32/c128.dsp, arch/win32/vic20.dsp,
	arch/win32/pet.dsp, arch/win32/plus4.dsp, arch/win32/cbm2.dsp:
	Added new files.

	* c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	plus4/plus4.c, cbm2/cbm2.c, machine.h, arch/unix/plus4ui.c,
	arch/unix/vic20ui.c, arch/unix/c64ui.c, arch/unix/cbm2ui.c,
	arch/unix/c128ui.c, arch/unix/petui.c: Changed to use new
	machine video API.

	* drive/iec/iec.c, drive/iec.h, c64/c64drive.c,
	vic20/vic20drive.c, plus4/plus4drive.c, cbm2/cbm2drive.c,
	pet/petdrive.c, machine-drive.h: Removed job code function.

2003-12-01  David Hansel  <david@hansels.net>

	* fsdevice/fsdevice-open.c, fsdevice/fsdevice-read.c,
	fsdevice/fsdevice-close.c, fsdevice/fsdevicetypes.h:
	Added code to read contents (first file) of tape files.

	* arch/win32/res.rc:  fixed size of "printer" peripheral
	dialog page

	* arch/win32/uidrivec128.c, src/arch/win32/uidriveplus4.c:
	disable drive options if iec device is enabled.

2003-11-30  pottendo  <pottendo@utanet.at>

	* arch/unix/x11/gnome/x11ui.c (ui_create_status_bar): small
	fix to show PAL control checkbox.

	* arch/unix/x11/gnome/uipalcontrol.c (build_pal_ctrl_widget):
	Properly set pal mode radio button when creating the widget.

2003-11-29  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.35.

	* gfxoutputdrv/ffmpeglib.h: Use external avformat header file
	if available.

	* gfxoutputdrv/ffmpegdrv.h: Fixed prototypes.

2003-11-29  Andreas Matthies  <andreas.matthies@gmx.net>

	* c128/c128memsnapshot.c, c64/c64memsnapshot.c,
	cbm2/cbm2memsnapshot.c, pet/petmemsnapshot.c,
	vic20/vic20memsnapshot.c: Really disable traps before reading
	or writing rom from/to snapshot.

	* attach.c, tape/tape.c, machine.c, datasette.c: Don't
	execute recordable user events when we're in playback mode.

2003-11-29  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/arch.dsp: Added/removed files.

	* arch/win32/statusbar.c: Fixed to handle more drives.

	* arch/win32/uiperipheral.c: Fixed warnings.

	* drive/drive.c (drive_disable): Fixed update of drive UI as
	Thomas did in drive_enable. FIXME: Still no DOUBLE_DRIVE (is
	this needed?)

	* drive/drivecpu.c, drive/ieee/memieee.c: Include
	drive-check.h.

2003-11-27  David Hansel  <david@hansels.net>

	* printer.h, printerdrv/printer.c:
	Added new function "printer_formfeed"

	* printerdrv/driver-select.h, printerdrv/driver-select.c:
	Added new function "driver_select_formfeed"

	* printerdrv/drv-ascii.c, printerdrv/drv-mps803.c,
	Added new function "drv_*_formfeed"

	* printerdrv/output-graphics.c:  Delay opening the output
	file until something is about to be written.  This avoids 
	creating empty output files.

	* printerdrv/drv-nl10.c:  Implemented some new control
	sequences.  Don't do anything in "close" function.
	Added new function "drv_nl10_formfeed".

	* arch/unix/uiprinter.c, arch/unix/uiprinter.h:
	Renamed function uiprinter_flush to uiprinter_formfeed

	* arch/unix/uiprinteriec.c, arch/unix/uiprinterieee.c:
	Renamed "Flush printer..." menu items to "Formfeed".
	Added keyboard shortcuts Alt-4, Alt-5 for formfeed.
	Call "printer_formfeed" when selected.

	* arch/win32/res.h, arch/win32/res.rc, arch/win32/ui.c, 
	arch/win32/uiperipheral.c:  Added "Send Formfeed" buttons.
	Added keyboard shortcuts Alt-4, Alt-5 for formfeed.
	Call "printer_formfeed" when selected.

2003-11-27  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.34.

	* drive/drive-resources.c (drive1_resources_type): Update IEC
	bus for given unit.

	* drive/drive.c, drive/drive.h, drive/drive-check.c,
	iecdrive.h, drive/drive-resources.c, plus4/plus4iec.c,
	drive/ieee/fdc.c, drive/ieee/riot2d.c, drive/ieee/ieee.c,
	drive/ieee/memieee.c, drive/drivecpu.c: Changed drive type
	macros to functions and moved to source file.

	* drive/drive-check.h: New file.

	* drive/Makefile.am: Added new file.

	* raster/raster-sprite.c (raster_sprite_reset): Initialize
	internal sprite x coordinate to "8" as this corresponds to "0"
	in the VICII sprite x register.

2003-11-27  pottendo  <pottendo@utanet.at>

	* drive/drive.c (drive_enable): Derive enabled drives and pass
	information to the UI. Fixme: dual drives are not respected with
	this!

	* arch/unix/uicommands.c (ui_update_flip_menus): Use new more
	general ui_drive_menu interface.

	* arch/unix/x11/gnome/x11ui.c (fliplist_popup_cb): ditto.
	(ui_create_status_bar): fixed bug. Show PAL control widget
	depending in resource "PALEmulation".

2003-11-26  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/videoarch.h, arch/riscos/video.c,
	arch/riscos/mousedrv.c: some more mouse driver work

2003-11-26  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.33.

	* machine-bus.c: New file.

	* serial/serial.c, serial/serial-trap.c, serial.h,
	machine-bus.h, c64/c64bus.c, vic20/vic20bus.c, pet/petbus.c,
	plus4/plus4bus.c, cbm2/cbm2bus.c, vdrive/vdrive-iec.c,
	fsdevice/fsdevice.c, printerdrv/interface-serial.c, c1541.c:
	Moved bus independent code to separate file.

	* Makefile.am, arch/win32/base.dsp: Added new files.

	* serial/serial.c, fsdevice/fsdevice-write.c,
	fsdevice/fsdevice-read.c: Removed obsolete includes.

	* serial/Makefile.am: Removed vdrive include path.

2003-11-26  David Hansel  <david@hansels.net>

	* arch/win32/uiperipheral.c:  Only add printer-userport page
	if emulated actually has a userport.  Hide "Use IEC Device"
	checkbox if emulated machine does not support IEC.  Fixed
	some grey-out bugs.

	* iecbus/iecbus.c: In function iecbus_cpu_write_conf3(),
	only invoke drive functions and manipulate iecbus if
	iecbus_device[unit] == IECBUS_DEVICE_TRUEDRIVE (otherwise
	bus will lock up if TDE is off, drive "unit" is on
	and peripheral "unit" is on).  In function 
	calculate_callback_index(),  added devices 4-7 (otherwise
	IEC printer emulation will not work if no other IEC devices
	are enabled)
	
	* drive-resources.c: In functions drive0_resources_type() and
	drive1_resources_type(), when calling
	machine_bus_status_drivetype_set(), changed second parameter
	to type!=DRIVE_TYPE_1551, since 1551 drive does not use the bus.
	
2003-11-25  David Hansel  <david@hansels.net>

	* arch/win32/uiattach.c, arch/win32/uiattach.h:
	renamed to uiperipheral.c/h

	* arch/win32/uiprinter.c, arch/win32/uiprinter.h:
	deleted files. moded code into uiperipheral.c/h

	* arch/win32/Makefile.am:  added/removed files

	* resc64.rc, resc128.rc, resplus4.rc, rescbm2.rc, respet.rc,
	resvic.rc: removed "Printer Settings..."
	renamed "Device Settings..." to "Peripheral settings..."

	* uidrivec64vic20.c: grey out drive settings if
	(NOT TrueDriveEmulation) or (IECDevice)

	* res.rc, res.h, uiperipheral.c:
	Unified PRINTER4_SETTINGS_DIALOG, PRINTER5_SETTINGS_DIALOG, 
	PRINTERUSERPORT_SETTINGS_DIALOG to PRINTER_SETTINGS_DIALOG.
	Added "Use IEC Device" checkbox to all peripheral pages
	(except printer-userport)
	Fixed "Cancel" button.
	Grey out controls if (TrueDriveEmulation OR (NOT VirtualTraps))
	AND (NOT IECDevice).
	Added "Output" selection box for printer settings.
	Fixed saving of "PrinterTextDevice*" resources.

	* printerdrv/output-graphics.c:  Use "Printer*TextDevice"
	and "PrinterTextDevice*" settings to determine output
	filename.

2003-11-24  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.32.

	* printerdrv/printer-serial.c, printer.h, serial/serial.c,
	printerdrv/interface-serial.c, printerdrv/interface-serial.h,
	arch/unix/uiprinter.c, c64/c64printer.c, vic20/vic20printer.c,
	pet/petprinter.c, plus4/plus4printer.c, cbm2/cbm2printer.c,
	printerdrv/printer-userport.c, c64/c64cia2.c, pet/petvia.c,
	cbm2/cbm2cia1.c, plus4/plus4.c, vic20/vic20via2.c,
	printerdrv/printer-userport.h: Fixed function names.

	* printerdrv/printer-userport.c, printer.h, c64/c64printer.c,
	printerdrv/interface-userport.c, pet/petprinter.c
	printerdrv/interface-userport.h, cbm2/cbm2printer.c
	c64/c64cia2.c, pet/petvia.c, cbm2/cbm2cia1.c, plus4/plus4.c,
	vic20/vic20printer.c, vic20/vic20via2.c: Added callback for
	busy flag.

	* machine.c, c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	plus4/plus4.c, cbm2/cbm2.c: Moved IEC/IEEE bus functions to
	separate files.

	* machine-bus.h, c64/c64bus.c, vic20/vic20bus.c, pet/petbus.c,
	plus4/plus4bus.c, cbm2/cbm2bus.c: New files.

	* Makefile.am, c64/Makefile.am, vic20/Makefile.am,
	pet/Makefile.am, plus4/Makefile.am, cbm2/Makefile.am,
	arch/win32/c64.dsp, arch/win32/c64c128.dsp,
	arch/win32/vic20.dsp, arch/win32/pet.dsp,
	arch/win32/plus4.dsp, arch/win32/cbm2.dsp: Added new files.

	* init.c (init_main): Initialize machine IO bus.

	* diskimage/realimage.c, traps.c, drive/drive-resources.c,
	drive/drive-snapshot.c, autostart.c, drive/drive.c, machine.c,
	vdrive/vdrive.c, vdrive/vdrive-command.c, vdrive/vdrive.h,
	tape/tape.c, vdrive/vdrive-rel.c, fsdevice/fsdevice-flush.c,
	fsdevice/fsdevice-open.c, fsdevice/fsdevice-read.c, c1541.c,
	monitor/mon_file.c, imagecontents/diskcontents.c, serial.h,
	arch/unix/uicommands.c, serial/fsdrive.c, serial/serial.c,
	parallel/parallel-trap.c, arch/win32/uidriveplus4.c,
	arch/win32/uidrivec128.c, arch/win32/uidrivepetcbm2.c,
	arch/win32/uidrivec64vic20.c, arch/win32/uiconsole.c,
	arch/win32/uisnapshot.c, arch/win32/uiattach.c: Adopted to new
	serial API.

	* serial/serial-trap.c, serial/serial.c, serial.h, parallel.h,
	parallel/parallel-trap.c: Moved serial trap specific code to
	`serial-trap.c'.

	* c128/c128mem.c (mem_rom_trap_allowed): Improved.

	* c128/c128io.c, c128/c128io.h: Removed.

	* c64/Makefile.am, c128/Makefile.am, arch/win32/c128.dsp,
	arch/win32/c64c128.dsp: Updated.

	* c128/c128meminit.c, c128/z80mem.c, c128/c128mem.c: Changed
	to use common IO functions.

	* c64/c64io.c, c64/c64io.h (c64io_ioreg_add_list): New
	function.

	* c64/c64mem.c, c128/c128mem.c (mem_ioreg_list_get): Use
	`c64io_ioreg_add_list()'.

2003-11-23  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.31.

	* printerdrv/drv-nl10.c: Fixed prototypes.

2003-11-23  David Hansel  <david@hansels.net>

	* arch/unix/uiperipheralieee.c, arch/unix/uiperipheraliec.c, 
	arch/unix/uiperipheral.c, arch/unix/uiperipheral.h, 
	arch/unix/uiprinteriec.c, arch/unix/uiprinterieee.c, 
	arch/unix/uiprinter.c, arch/unix/uiprinter.h:
	Corrected naming of exported global functions

2003-11-22  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/mousedrv.c, arch/riscos/video.c,
	arch/riscos/videoarch.h:
	corrected mouse driver coordinate calculation

	* arch/riscos/uiconfig.{c,h}: added mouse configuration

2003-11-22  Andreas Matthies  <andreas.matthies@gmx.net>

	* event.c (event_record_set_milestone): Don't write an
	EVENT_LIST_END marker.
	event_resources_shutdown renamed to event_shutdown as it also
	frees the event list.

	* vicii/vicii-snapshot.c (vicii_snapshot_read_module): Close
	the module.

2003-11-22  David Hansel  <david@hansels.net>

	* drive/drive.c: reversed return values of
	drive_write_protect_sense for pull-out/put-in sequence and
	no-disk-in-drive.  Removed disk change hack.

	* drive/drive.h, drive/driveimage.c: Removed
	drive_t.have_new_disk

	* printerdrv/drv-nl10.c: log warning when receivingi
	unsupported control sequence.  Improved "bold" and
	"emphasized" printing.

	* arch/win32/uiprinter.c:  Include "NL10" in list of printer
	drivers.

	* arch/unix/uiperipheral.c, arch/unix/uiperipheral.h, 
	arch/unix/uiprinter.c, arch/unix/uiprinter.h:  Moved IEC and
	IEEE specific content to ui*ieee.c/h and ui*iec.c/h
	
	* arch/unix/uiperipheralieee.c, arch/unix/uiperipheralieee.h, 
	arch/unix/uiperipheraliec.c, arch/unix/uiperipheraliec.h, 
	arch/unix/uiprinterieee.c, arch/unix/uiprinterieee.h, 
	arch/unix/uiprinteriec.c, arch/unix/uiprinteriec.h: new files

	* arch/unix/c64ui.c, arch/unix/c128ui.c, arch/unix/vic20ui.c,
	arch/unix/plus4ui.c:  Use ui_peripheraliec_settings_menu

	* arch/unix/petui.c, arch/unix/cbm2ui.c: Use 
	ui_peripheralieee_settings_menu

	* arch/unix/Makefile.am:  Added new files
	
2003-11-22  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.30.

	* core/viacore.c (viacore_reset): Reset PB7 variables.

	* drive/drivecpu.c (drive_cpu_setup_context): Clear large
	drive struct.

	* c64/reu.c (reu_activate): Clear newly allocated RAM.

	* cbm2/cbm2.c (machine_specific_reset): Reset TPI before ACIA
	is reseted.

	* raster/raster-changes.c (raster_changes_shutdown): Only free
	changes if the changes struct exists.

	* raster/raster.c (raster_draw_buffer_alloc): Marked hack.

2003-11-22  Andreas Matthies  <andreas.matthies@gmx.net>

	* raster/raster.c (raster_draw_buffer_alloc): Allocate one
	more line for the draw buffer to avoid access violations in
	Scale2x renderer.

	* vicii/viciitypes.h: Increase VICII_MAX_SPRITE_WIDTH to 56
	inlcluding the repeated pixels in the bug area.

	* vicii-draw.c: Append the sprite wrap area to
	GFX_MSK_LEFTBORDER_SIZE.

	* vicii/vicii-sprites.c (draw_sprite_partial): Fixed msk_ptr
	respecting new gfx_msk offset.

2003-11-21  David Hansel  <david@hansels.net>

	* arch/unix/uidrivec128, arch/unix/uidrivec64vic20,
	arch/unix/uidriveplus4, uiperipheral.c, uiprinter.c:
	Moved "Enable IEC device" from "drive" settings to
	"peripheral" settings.  Added "Enable IEC device"
	to printer settings

2003-11-20  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.29.

	* printer.h, c64/c64printer.c, vic20/vic20printer.c,
	pet/petprinter.c, plus4/plus4printer.c, cbm2/cbm2printer.c,
	printerdrv/printer-serial.c
	(printer_serial_interface_shutdown): New function.

	* printerdrv/drv-nl10.c: Fixed prototypes.

2003-11-20  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/mousedrv.{c,h}, arch/riscos/video.c,
	arch/riscos/videoarch.h, arch/riscos/vsync.c:
	started mouse driver implementation

	* arch/riscos/ui.c: impromptu fix for VSID (crashes on
	machine_shutdown())

	* arch/riscos/ui.h, arch/riscos/uisharedef.h: moved callback
	structure

	* arch/riscos/vsidui.c: mouse click and key press handlers
	fixed

	* arch/riscos/config.h: added HAVE_MOUSE define

2003-11-20  Andreas Matthies  <andreas.matthies@gmx.net>

	* vicii/vicii-draw.c: GFX_MSK_LEFTBORDER_SIZE needs to inlude
	extra_offscreen_border_left area. This was removed in 1.10.5
	and forgotten when this area was indroduces to sprite
	coordinates later.

	* vicii/vicii-sprites.c (draw_sprite_partial): Fixed msk_ptr
	respecting new gfx_msk offset.

2003-11-20  David Hansel  <david@hansels.net>

	* drive/iec/via1d1541.c, drive/iec/cia1581d.c:  
	When calculating cpu_port value, run loop from
	4-11 instead of 8-11

2003-11-20  David Hansel  <david@hansels.net>

	* serial/serial-iec-device.c:  
	- Calculate correct number of timeout-cycles from microseconds
	- Use clkguard interface to handle clock-overflows
	- Delay enabling a device if serial_iec_device_init() has not
	yet been called
	
	* serial/serial-trap.c: In serial_traps_reset(), call
	serial_iec_device_reset()

	* serial.h: Added serial_iec_device_set_machine_parameter()
	
	* c128/c128.c, c64/c64.c, vic20/vic20.c, plus4/plus4.c:
	In machine_change_timing(), call 
	serial_iec_device_set_machine_parameter()
	
	* iecbus/iecbus.c:  In iecbus_device_write(), use
	IECBUS_NUM instead of hardcoded '16'

2003-11-19  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.28.

	* drive/drivecpu.c (drive_cpu_setup_context): Initialize CPU
	status by using `lib_calloc'.

	* gcr.c (gcr_create_image): Initialize GCR struct by using
	`lib_calloc'.

	* raster/raster-sprite-status.c (raster_sprite_status_init):

	* raster/raster.c (raster_realize_frame_buffer): Clear fake
	draw buffer line.

	* raster/raster-cache.c (raster_cache_new): Initialize whole
	cache.

	* serial/serial-iec-device.c: Include `string.h' instead of
	`ctype.h'.  (get_st): Fixed prototype.  Define
	`serial_iec_device_log' only if debugging is enabled.

	* iecbus/iecbus.c (iecbus_status_set): Removed hack.

2003-11-19  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/ui.{c,h}, arch/riscos/uiconfig.{c,h},
	arch/riscos/uihelp.c, arch/riscos/uihelp.c,
	arch/riscos/video.c: added support for four truedrives

	* arch/riscos/uiconfig.c: added new drive ROM types

	* fsdevice/fsdevice.c, fsdevice/fsdevice-close.c,
	fsdevice/fsdevice-open.c, vdrive/vdrive.c: removed superfluous
	RISC OS ui.h include

2003-11-19  David Hansel  <david@hansels.net>

	* iecbus.h, iecbus/iecbus.c:  Added functions
	BYTE iecbus_device_read(void);
	int  iecbus_device_write(BYTE unit, BYTE data);
	void (*iecbus_update_ports) (void);

	* serial/serial-iec-device.c:  Inserted implementation
	of iec bus protocol that serves as a medium between iecbus
	and serial-iec-bus

	* c64/c64iec.c, plus4/plus4iec.c:  In function
	iec_update_ports, run "for" loop from 4-11 instead of 8-11

	* c64/c64iec.c, vic20/vic20iec.c, plus4/plus4iec.c:
	In function *iec_init(), initialize iecbus_update_ports
	function pointer

2003-11-18  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.27.

	* serial/serial-iec-device.c, serial/serial-iec-device.h: New
	files.

	* serial.h, serial/serial-trap.c: Initialize IEC device.

	* serial/Makefile.am, arch/win32/serial.dsp: Added new file.

	* c64/c64.c, c128/c128.c, vic20/vic20.c, plus4/plus4.c:
	Initialize resources and command line options.

	* drive/drive-resources.c, drive/drive-snapshot.c, traps.c:
	Report resource status.

	* machine.h, c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	plus4/plus4.c, cbm2/cbm2.c (machine_bus_status_truedrive_set,
	machine_bus_status_drivetype_set,
	machine_bus_status_virtualdevices_set): New functions.

	* iecbus/iecbus.c (iecbus_status_set,
	calculate_callback_index): New functions.

	* iecbus/iecbus.c, iecbus.h, pet/petiec.c, cbm2/cbm2iec.c,
	drive/drive.c, drive/drive-snapshot.c,
	drive/drive-resources.c (iecbus_calculate_callback_index):
	Removed.

	* c64/c64cia2.c, c64/c64iec.c, c64/c64iec.h, c64/c64.c,
	c128/c128.c, plus4/plus4iec.c, plus4/plus4iec.h,
	plus4/plus4mem.c: Changed IEC interface to use `iecbus_*'
	routines.

	* arch/unix/uidrivec64vic20.c, arch/unix/uidrivec128.c,
	arch/unix/uidriveplus4.c: Added IEC device UI.

2003-11-17  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.26.

	* plus4/ted-draw.c: Do not use `gfx_msk'.

	* raster/raster-line-changes-sprite.c
	(update_for_minor_changes_sprite): Changed calculation of
	`changed_start'.

	* raster/raster-line-changes.c (update_for_minor_changes):
	Removed cruft.

	* machine-printer.h, printerdrv/printer.c, c64/c64printer.c,
	vic20/vic20printer.c, pet/petprinter.c, plus4/plus4printer.c,
	cbm2/cbm2printer.c, printerdrv/printer-serial.c,
	printerdrv/printer-userport.c: Use machine_* fuctions for
	initialization.

	* serial/iec-bus.c, serial/iec-bus.h: Renamed.

	* serial/serial-iec.c, serial/serial-trap.c: Changed `iec_bus'
	function names.

	* serial/Makefile.am, arch/win32/serial.dsp: Updated.

2003-11-16  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.25.

	* raster/raster-canvas.c, raster/raster-canvas.h,
	raster/raster.h, raster/raster.c, raster/raster-line.c: Moved
	update area struct.

	* raster/raster-changes.c, raster/raster-changes.h,
	raster/raster.c, raster/raster.h, raster/raster-line.c,
	crtc/crtc.c, plus4/ted.c, plus4/ted-mem.c, vicii/vicii.c,
	vicii/vicii-sprites.c, vicii/vicii-badline.c, vic20/vic.c,
	vicii/vicii-fetch.c, vicii/vicii-mem.c: Dynamic allocation of
	raster changes.

	* raster/raster-line.c (handle_blank_line_cached): New
	function.  (handle_blank_line): Only draw a blank line if
	there are border changes or the cache is dirty.

	* iecbus/iecbus.c, printer.h, c64/c64.c, c64/c64.h,
	c128/c128.c, c128/c128.h, vic20/vic20.c, vic20/vic20.h,
	pet/pet.c, pet/pet.h, plus4/plus4.c, plus4/plus4.h,
	cbm2/cbm2.c, cbm2/cbm2.h, printerdrv/printer.c: First cut of
	machine printer API.

	* c64/c64printer.c, vic20/vic20printer.c, pet/petprinter.c,
	plus4/plus4printer.c, cbm2/cbm2printer.c, machine-printer.h,
	printerdrv/printer-serial.c, printerdrv/printer-userport.c:
	New files.

	* c64/Makefile.am, vic20/Makefile.am, pet/Makefile.am,
	plus4/Makefile.am, cbm2/Makefile.am, arch/win32/c64.dsp,
	arch/win32/c64c128.dsp, arch/win32/vic20.dsp,
	arch/win32/pet.dsp, arch/win32/plus4.dsp, arch/win32/cbm2.dsp,
	arch/win32/printerdrv.dsp: Added new files.

	* drive/drive-snapshot.c (drive_snapshot_write_module,
	drive_snapshot_read_module): Fixed size of rotation table.

2003-11-16  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/archdep.c, arch/riscos/spritedrv.c,
	arch/riscos/uicmdline.c, arch/riscos/uihelp.c,
	arch/riscos/uimsgwin.c: use lib_*() heap management functions.

	* arch/riscos/c64ui.c, arch/riscos/vsidui.c,
	arch/riscos/vsidarch.h: Moved vsid-specific stuff from c64ui.c
	to vsidui.c; VSID working again.

	* arch/riscos/ui.c: closedown improvements.

2003-11-15  Andreas Matthies  <andreas.matthies@gmx.net>

	* joystick.c (joystick_set_value_*): Disabled while playback
	runs.

	* sound.c (sound_open): Reset sound_state_changed.

2003-11-15  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.24.

	* drive/ieee/via1d2031.c: Removed dead IEC code.

	* c64/c64cia2.c, c64/c64iec.c, c64/c64iec.h, pet/petiec.c,
	cbm2/cbm2iec.c, drive/iec/iec.c, drive/iec/via1d1541.c,
	drive/iec/cia1581d.c, plus4/plus4iec.c,  plus4/plus4iec.h,
	plus4/plus4mem.c, vic20/vic20iec.c, vic20/vic20iec.h,
	c64/c64.c, plus4/plus4.c, iecbus/iecbus.c, iecbus.h,
	iecdrive.h: Changed code to support more drives.

	* serial/iec-bus.c, serial/iec-bus.h, serial/serial-trap.c,
	serial/serial-iec.c: Renamed iecbus* functions.

	* drive/driveimage.c (drive_image_attach, drive_image_detach):
	Allow more drives.

	* drive/iec/wd1770.c (wd1770_attach_image,
	wd1770_detach_image): Changed likewise.

	* attach.c (attach_disk_image, detach_disk_image): Attach #10
	and #11 too.

	* arch/win32/uimon.c (SetMemspace): Stubs for two additional
	drives.

	* arch/win32/uiattach.c, arch/win32/uidrivec64vic20.c,
	arch/win32/uidrivec128.c, arch/win32/uidriveplus4.c: Enabled
	UI for drive #10 and #11.

	* arch/unix/ui.h, fliplist.c: Increased number of drives.

	* uiapi.h, arch/os2/ui.c, arch/unix/x11/xaw/x11ui.c,
	arch/unix/x11/gnome/x11ui.c, arch/msdos/ui.c, drive/drive.c,
	arch/win32/ui.c, arch/riscos/ui.c, arch/riscos/ui.h,
	arch/beos/ui.cc (ui_display_drive_track): Unified.

	* video/video-viewport.c, arch/msdos/mousedrv.c,
	arch/msdos/statusbar.c: Reordered includes to avoid warnings.

	* sid/sid-snapshot.c (sid_snapshot_read_module_simple): Fixed
	warnings.

	* drive/driverom.c (drive_rom_initialize_traps): Removed dead
	1581 traps.

	* drive/drivecpu.c (drive_trap_handler): Removed old trap.

	* drive/iec/iec.c: Removed 1581 jobcode calls.

	* drive/iec/jobcode1581.c, drive/iec/jobcode1581.h: Removed.

	* drive/iec/Makefile.am, arch/win32/iec.dsp: Updated.

	* arch/win32/msvc/config.h: Define `HAVE_DIRECT_H'.

2003-11-14  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.23.

	* iecbus/iecbus.c, iecbus/Makefile.am, arch/win32/iecbus.dsp:
	New files.

	* Makefile.am, arch/win32/Makefile.am, arch/win32/vice.dsw:
	Added new files.

	* c64/c64iec.c, plus4/plus4iec.c, vic20/vic20iec.c,
	pet/petiec.c, cbm2/cbm2iec.c, c64/c64cia2.c, c64/c64iec.h,
	plus4/plus4iec.h, plus4/plus4mem.c: Moved common IEC code to
	separate file.

	* iecdrive.h, drive/drive.c, drive/drive-snapshot.c,
	drive/drive-resources.c: Updated IEC interface.

	* serial/iecbus.c, serial/iecbus.h: Renamed.

	* serial/Makefile.am, arch/win32/serial.dsp: Updated.

	* serial/serial-trap.c, serial/serial-iec.c: Fixed includes.

	* arch/os2/config.h: Removed obsolete `HAVE_SGTTY_H' define.

	* resources.c: Do not include `strings.h'.

	* arch/win32/lose32.h, arch/win32/archdep.c: Moved includes
	and definitions to source file.

	* gfxoutputdrv/ffmpeglib.h: Undefine `inline' for MSVC.

	* vicii/vicii-snapshot.c, plus4/ted-snapshot.c, vdc/vdc.c,
	crtc/crtc.c, raster/raster.h, arch/win32/hardsid.c: Fixed
	warnings.

	* ioutil.c, arch/win32/archdep.c: #include <direct.h>.

	* event.c (next_alarm_set): Fixed prototype.

2003-11-13  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/ui.c: fixed startup sequence

2003-11-13  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.22.

	* c64/c64iec.c, c128/c128iec.c: Unified. Moved parallel cable
	and fast IEC code to separate files.

	* c64/c64parallel.c, c64/c64parallel.h, c64/c64fastiec.c,
	c64/c64fastiec.h, c128/c128fastiec.c, c128/c128fastiec.h,
	plus4/plus4parallel.c, plus4/plus4parallel.h: New files.

	* c64/Makefile.am, c128/Makefile.am, plus4/Makefile.am,
	arch/win32/c64.dsp, arch/win32/c64c128.dsp,
	arch/win32/c128.dsp, arch/win32/plus4.dsp: Updated.

	* c64/c64.c, c128/c128.c (machine_init): Initialize fast IEC.

	* c64/c64cia2.c, plus4/plus4pio1.c: Fixed includes.

	* drive/drive.c, drive/drive.h (drive_get_drive): Removed.

	* drive/drive-check.c: New file.

	* drive/Makefile.am, arch/win32/drive.dsp: Added new file.

	* drive/drive.c: Moved drive check functions to separate file.

2003-11-13  Andreas Matthies  <andreas.matthies@gmx.net>

	* win32/archdep.c, c64/cart/ide64.c, gfxoutputdrv/bmpdrv.c,
	printerdrv/drv-nl10.c, vic20/vic-mem.c: Fixed warnings by
	adding casts and includes.

	* win32/res.h, resc64.rc, resc128.rc, resplus4.rc, respet.rc,
	rescbm2.rc, resvic.rc, ui.c: Added UI support for recorsing
	milestones.

	* event.c, event.h: Removed EVENT_RESETCONTINUE, this can be
	handled with EVENT_RESET.
	New functiones event_record_set_milestone_trap,
	event_record_set_milestone, event_record_reset_milestone_trap,
	event_record_reset_milestone, set_event_milestone_snapshot.
	New resource EventMilestoneSnapshot.

2003-11-12  Andreas Matthies  <andreas.matthies@gmx.net>

	* core/ciacore.c (ciacore_snapshot_write_module): Stores the
	irq_enabled in the snapshot now. This was introduced in
	1.12.31 and disabled in 1.12.32.

	* attach.c, attach.h: Added file_system_event_playback() and
	event support in file_system_attach_disk and in
	file_system_detach_disk.

	* tape.h, tape/tape.c: Added tape_image_event_playback() and
	event support in tape_image_attach and tape_image_detach.

	* machine.c, machine.h: Added machine_reset_event_playback()
	and event support in machine_trigger_reset.

	* event.h, event.c: New event types EVENT_ATTACHDISK,
	EVENT_ATTACHTAPE, EVENT_RESET, EVENT_RESETCONTINUE.

2003-11-12  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/c128ui.c, arch/riscos/cbm2ui.c,
	arch/riscos/petui.c, arch/riscos/ui.c, arch/riscos/vic20ui.c:
	moved machine-specific from ui.c to machine UI sources.

	* arch/riscos/ui.c: trap missing config windows.

	* arch/riscos/ui.h, arch/riscos/uisharedef.h: extended
	interfaces.

2003-11-11  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.21.

	* drive/tcbm/glue1551.c, drive/ieee/fdc.c, drive/iec/wd1770.c,
	parallel/parallel-trap.c, drive/drive.c, drive/drive.h,
	drive/iec/jobcode1581.c, drive/rotation.c, drive/tcbm.h: Use
	`DRIVE_NUM'.

	* c64/c64cia2.c, c64/c64iec.c, c64/c64iec.h, c128/c128iec.c
	(parallel_cable_cpu_execute): New function.

	* arch/unix/uidrivec64vic20.c, arch/unix/uidrive.h,
	arch/unix/uidriveiec.c, arch/unix/uidriveiec.h,
	arch/unix/uidrive.c, arch/unix/uidrivec128.c,
	arch/unix/uidrivepetcbm2.c, arch/unix/uidriveplus4.c: Added
	menu entries.

	* utils.c, utils.h: Renamed.

	* *.c: Renamed util include.

	* Makefile.am, arch/win32/base.dsp, arch/win32/c1541.dsp,
	arch/win32/petcat.dsp: Updated.

2003-11-11  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.20.

	* monitor.h, monitor/monitor.c, monitor/mon_register6502.c,
	monitor/mon_registerz80.c, c64/c64.c, c128/c128.c,
	vic20/vic20.c, pet/pet.c, plus4/plus4.c, cbm2/cbm2.c,
	drive/drivecpu.c, monitor/mon_ui.c, monitor/mon_parse.y:
	Increased number of drives monitor can handle.

	* drive/drive-resources.c (drive_resources_type,
	drive1_resources_type): Handle more drives.

	* drive/drive.c (drive_check_type): Changed likewise.

	* alarm.c, alarm.h: Added support for call data.

	* c64/cart/c64cart.c, vdc/vdc.c, cbm2/cbm2.c, riot.h, via.h,
	cia.h, crtc/crtc.c, crtc/crtctypes.h, drive/ieee/fdc.c,
	drive/tcbm/glue1551.c, plus4/ted-timer.c, plus4/ted.c,
	plus4/tedtypes.h, plus4/ted-mem.c, plus4/ted-irq.c,
	plus4/ted-fetch.c, plus4/ted-fetch.h, vic20/vic.c,
	vic20/vic.h, vic20/vic-mem.c, vicii/vicii-fetch.c,
	vicii/vicii-fetch.h, vicii/vicii.c, vicii/vicii-mem.c,
	vicii/viciitypes.h, vicii/vicii-irq.c, vicii/vicii-irq.h,
	rs232drv/rsuser.c, rsuser.h, aciacore.c, event.c, datasette.c,
	joystick.c, keyboard.c: Added call data to callback.

	* drive/iec/via1d1541.c, drive/iecieee/via2d.c,
	drive/ieee/via1d2031.c, vic20/vic20via1.c, vic20/vic20via2.c,
	vic20/vic20ieeevia1.c, vic20/vic20ieeevia2.c, pet/petvia.c,
	drive/iec/cia1571d.c, drive/iec/cia1581d.c, c64/c64cia1.c,
	c64/c64cia2.c, c128/c128cia1.c, cbm2/cbm2cia1.c,
	drive/ieee/riot1d.c, drive/ieee/riot2d.c, core/ciacore.c,
	core/viacore.c, core/riotcore.c: Context pointer is now
	delivered via alarm data.

2003-11-10  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/Makefile.am: dropped last dummy file

	* arch/riscos/archdep.{c,h}: machine name for resources and
	drive led stubs

	* arch/riscos/ui.c: improved startup phase

	* vdrive-iec.c: replaced ui_set_drive_leds with
	archdep_set_drive_leds

2003-11-10  pottendo  <pottendo@utanet.at>

	* arch/unix/x11/gnome/uiscreenshot.c (all): made the ffmpeg
	things dependent on `HAVE_FFMPEG'.

2003-11-10  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/printerdrv.dsp: Added missing file.

	* sound.c: Set sdev_open in sound_open.

2003-11-10  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.19.

	* printerdrv/drv-nl10.c: Fixed comments, added header.
	[drv_nl10_charset_mapping_intl, drv_nl10_charset_nlq_italic]:
	Made const.

	* printerdrv/drv-nl10.h: Added header, removed unused include.

	* arch/unix/uiprinter.c: Added new printer.

2003-11-10  David Hansel  <david@hansels.net>

	* printerdrv/drv-nl10.c, printerdrv/drv-nl10.h: New files.

	* printerdrv/Makefile.am: Added new files.

	* gfxoutputdrv/bmpdrv.c: Added support for 1 bit data.

	* printerdrv/printer.c: Added hooks for NL10 printer driver.

	* printerdrv/output-graphics.c (output_graphics_putc): Fixed
	typo.

2003-11-10  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/*: restructured to allow code for all emulators
	in a single arch lib. Builds, but yet untested.

2003-11-10  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.18.

	* drive/drive.c, drive/drive.h, drive/tcbm/glue1551.c,
	drive/iecieee/via2d.c, c64/c64iec.c, c128/c128iec.c,
	drive/iec/wd1770.c, drive/iec/iec-resources.c,
	drive/driveimage.c, drive/drive-snapshot.c: Do not use
	`drive[]' as global variable.

	* drive/drivecpu.c, drive/drivecpu.h, c64/c64.c, c128/c128.c,
	vic20/vic20.c, pet/pet.c, plus4/plus4.c, cbm2/cbm2.c,
	c64/c64cia2.c, drive/iec/via1d1541.c, drive/iec/cia1571d.c,
	drive/iec/cia1581d.c, drive/iec/jobcode1581.c,
	drive/ieee/fdc.c, drive/ieee/via1d2031.c, drive/ieee/ieee.c,
	drive/ieee/riot1d.c, drive/ieee/riot2d.c, drive/drivemem.c,
	drive/tcbm/glue1551.c, drive/iecieee/via2d.c,
	vic20/vic20iec.c, autostart.c, init.c: Dynamically allocate
	drive context struct.

	* monitor.h, monitor/monitor.c, mem.h, drive/drivecpu.c, 
	c64/c64mem.c, c128/c128mem.c, vic20/vic20mem.c, pet/petmem.c,
	plus4/plus4mem.c, cbm2/cbm2mem.c, drive/drivemem.c,
	monitor/mon_breakpoint.c, monitor/mon_register6502.c,
	drive/drivemem.h, c64/c64.c, c128/c128.c, vic20/vic20.c,
	pet/pet.c, plus4/plus4.c, cbm2/cbm2.c: Mae monitor interface
	more flexible.

	* drive/ieee/ieee.c, drive/ieee.h, parallel/parallel.c:
	Changed ATN signal functions.

	* drive/drivecpu.c, drive/drivecpu.h, interrupt.h,
	arch/unix/uicommands.c, arch/msdos/menudefs.c,
	arch/win32/ui.c: Changed drive reset functions.

	* debug.c, debug.h: Increased number drives to debug.

	* arch/unix/console.c (console_in): Allocate line using lib
	functions.

	* arch/unix/readline/editline.h: Do not use lib functions.

	* arch/msdos/mousedrv.c (my_mouse_callback): Fixed typo.

2003-11-09  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.17.

	* drive/drivetypes.h, drive/iec/cia1571d.c, drive/iec/iec.c,
	drive/iec/cia1581d.c, drive/iec/memiec.c, drive/ieee/fdc.c,
	drive/iec/via1d1541.c, drive/iecieee/iecieee.c,
	drive/iecieee/via2d.c, drive/ieee/ieee.c, drive/ieee/riot2d.c,
	drive/ieee/via1d2031.c, drive/tcbm/glue1551.c, drive/drive.c,
	drive/tcbm/tpid.c, drive/drivecpu.c, drive/drivemem.c,
	drive/iec/glue1571.c, drive/iec/glue1571.h, drive/drive.h,
	drive/iec/iec-resources.c, drive/drive-resources.c,
	drive/iec/iec-cmdline-options.c, c64/c64drive.c,
	drive/drive-cmdline-options.c, vic20/vic20drive.c,
	pet/petdrive.c, plus4/plus4drive.c, cbm2/cbm2drive.c,
	drive/driveimage.c, drive/drive-snapshot.c, drive/driverom.c,
	drive/iec/iecrom.c, drive/iec/jobcode1581.c, drive/driverom.h,
	drive/iec/wd1770.c, drive/ieee/ieeerom.c, drive/driveimage.h,
	drive/ieee/ieeerom.h, drive/tcbm/tcbmrom.c, drive/drivesync.c,
	drive/tcbm/tcbmrom.h, drive/drive-overflow.c,
	drive/drivesync.h, drive/rotation.c, parallel/parallel-trap.c,
	parallel/parallel.c, c64/c64cia2.c, c64/c64iec.c,
	c128/c128iec.c, vic20/vic20iec.c, plus4/plus4iec.c,
	plus4/plus4pio1.c, plus4/plus4tcbm.c: Do not use `drive[]' as
	global variable.

2003-11-08  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.16.

	* gfxoutput.h: Fixed prototypes.

	* arch/win32/mousedrv.c (mousedrv_resources_init,
	mousedrv_cmdline_options_init): Return zero.

	* arch/unix/x11/renderxv.c (find_yuv_port): Fixed warning.

2003-11-07  pottendo  <pottendo@utanet.at>

	* arch/unix/x11/gnome/x11ui.c: (ui_style_red): new global.
	(x11ui_open_canvas_window): Set video_ctrl_checkbox label to
	red font.

	* arch/unix/x11/gnome/uiscreenshot.c (build_screenshot_dialog):
	Added widgets for FFMPEG resources.
	(ffmpg_widget): new_function.
	(ui_screenshot_dialog): set resources for ffmpeg in case the
	driver is selected.

2003-11-07  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/mousedrv.{c,h}: new files (ATM dummies only)

	* arch/riscos/Makefile.am: restructured for use on RISC OS

2003-11-06  pottendo  <pottendo@utanet.at>

	* arch/unix/x11/gnome/x11ui.c: New global
	`video_ctrl_checkbox'.

	* arch/unix/x11/gnome/uiscreenshot.c (ui_screenshot_dialog):
	Show video control button in case of recording.

	* arch/unix/x11/gnome/x11ui.c (ui_create_status_bar): Added
	record control button.

2003-11-05  Andreas Matthies  <andreas.matthies@gmx.net>

	* gfxoutputdrv/ffmpegdrv.h: Added prototypes.

	* gfxoutput.h, gfxoutput.c: New functions
	gfxoutput_resources_init, gfxoutput_cmdline_options_init
	calling the ffmpegdrv registration functions.

	* init.c (init_resources): Call gfxoutput_resources_init.
	(init_cmdline_options): Call gfxoutput_cmdline_options_init.

2003-11-04  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.15.

	* arch/unix/ffmpeglib.c: New file.

	* arch/unix/Makefile.am: Added new file.

	* gfxoutputdrv/ffmpegdrv.c: Removed include.

	* mouse.c, mouse.h, arch/unix/mousedrv.c,
	arch/win32/mousedrv.c, arch/msdos/mousedrv.c,
	arch/os2/mousedrv.c: Moved mouse port code to common file.

2003-11-04  Andreas Matthies  <andreas.matthies@gmx.net>

	* sounddrv/soundffmpegaudio.c (ffmpegaudio_close): Stop
	screenshot recording; this will close the movie file if
	sound settings change or the emulator is closed.

2003-11-03  Andreas Matthies  <andreas.matthies@gmx.net>

	* gfxoutputdrv/ffmpegdrv.c: Include cmdline.h.
	Added resources FFMPEFAudioBitrate and FFMPEFVideoBitrate
	and corresponding cmdline options.
	Added error handling to get a controlled shutdown of the
	driver if a stream or the file cannot ne opened.
	Test if MP3 codec is available bedore switching to it.

2003-11-03  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/uiconfig.c: adapted to new VIDEO_RESOURCE_PAL_*
	defines

2003-11-02  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.14.

	* drive/drive.c, drive/drive.h: Removed cruft.

	* drive/iec/glue1571.c, drive/iec/glue1571.h,
	drive/drive-overflow.c: New files.

	* drive/iec/Makefile.am, drive/Makefile.am,
	arch/win32/iec.dsp, arch/win32/drive.dsp: Added new files.

	* arch/unix/x11/xaw/x11ui.c: Fixed warning.
	
	* drive/iec/via1d1541.c: Call new 1571 glue functions.

	* drive/iec/iec.c, drive/iec.h (iec_drive_port_default): New
	function.

	* machine-drive.h, c64/c64drive.c, vic20/vic20drive.c,
	pet/petdrive.c, plus4/plus4drive.c, cbm2/cbm2drive.c
	(machine_drive_port_default): New function.

	* drive/drive.c, drive/drive.h, drive/drive-snapshot.c,
	drive/drive-resources.c (drive_enable, drive_disable): Pass
	drive context pointer.

	* drive/drive.c, drive/drive.h, c64/c64.c, c128/c128.c,
	vic20/vic20.c, pet/pet.c, plus4/plus4.c, cbm2/cbm2.c
	(machine_vsync_hook): Pass drive context pointer.

	* drive/drive.c, drive/drive.h, drive/drive-resources.c
	(drive_set_disk_drive_type): Pass drive context pointer.

	* drive/drive.c, drive/drive.h, autostart.c
	(drive_set_disk_memory, drive_set_last_read): Pass drive
	context pointer.

	* drive/drivesync.c, drive/drivesync.h, drive/drive.c,
	drive/iec/via1d1541.c (drive_sync_factor,
	drive_sync_set_1571): Pass drive context pointer.

	* drive/iec/wd1770.c (wd1770d_init, wd1770d0_init,
	wd1770d1_init, clk_overflow_callback): Simplified.

	* drive/ieee/fdc.c (clk_overflow_callback0,
	clk_overflow_callback1, clk_overflow_callback, fdc_init):
	Changed likewise.

	* arch/unix/mouse.c, arch/unix/mouse.h, arch/win32/mouse.c,
	arch/win32/mouse.h, arch/msdos/mouse.c, arch/msdos/mouse.h,
	arch/beos/mouse.cc, arch/beos/mouse.h, arch/os2/mouse.c,
	arch/os2/mouse.h: Renamed and moved common code to `mouse.c'.

	* arch/unix/Makefile.am, arch/win32/Makefile.am,
	arch/win32/arch.dsp, arch/msdos/Makefile.am,
	arch/beos/Makefile.am, arch/os2/Makefile.am, Makefile.am,
	arch/win32/base.dsp: Updated.

	* arch/unix/x11/xaw/x11ui.c, arch/unix/x11/gnome/x11ui.c,
	arch/win32/ui.c, arch/os2/video.c, arch/win32/vsyncarch.c,
	arch/unix/x11/dga1.c, arch/unix/x11/dga2.c: Fixed includes.

	* vdc/vdc.c: Added include for MSDOS.

	* arch/msdos/menudefs.c: Fixed includes.

2003-11-02  pottendo  <pottendo@utanet.at>

	* arch/unix/uipalemu.c (PAL_control_cb): Simple UI to enter
	scanline shade and PAL blurredness for Xaw. GnomeUI doesn't
	use this as it supports a more convenient PAL control widget.

	* arch/unix/x11/gnome/x11ui.c (ui_update_pal_checkbox): Resize
	window properly.

	* arch/unix/uipalemu.c: Adapted to new PAL resources.

	* arch/unix/x11/gnome/uipalcontrol.c (build_pal_ctrl_widget):
	Respect scale value for setting values of gtk_adjustment.
	`struct pal_res_s': added field `scale'.
	(upd_sb): scale value.

2003-11-01  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.13.

	* gfxoutputdrv/gfxoutput.c: Only include ffmpeg header if
	`HAVE_FFMPEG' is defined.

	* drive/drivetypes.h, drive/drivecpu.h, drive/drivecpu.c,
	c64/c64-snapshot.c, c64/c64cia2.c, c64/c64iec.c, c64/c64tpi.c,
	pet/petpia1.c, pet/petpia2.c, pet/petvia.c, c128/c128iec.c,
	c128/c128cia1.c, cbm2/cbm2tpi1.c, cbm2/cbm2cia1.c,
	drive/drive.c, plus4/plus4-snapshot.c, plus4/plus4iec.c,
	plus4/plus4tcbm.c, vic20/vic20ieeevia1.c,
	vic20/vic20ieeevia2.c, vic20/vic20iec.c, parallel/parallel.c:
	Removed drive CPU execute macro.

2003-11-01  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/mouse.c: New resource Mouseport and commandline
	switch -mouseport to select the port of the emulated mouse.

2003-10-31  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/msvc/config.h: Defines HAVE_FFMPEG.

	* arch/win32/Makefile.am, arch.dsp, ffmpeglib.c: Added new
	file. ffmpeglib_open initialises the function pointers used
	in ffmpegdrv by loading the corresponding dlls.

	* arch/win32/res.h, res<machine>*.rc, ui.c, uisnapshot.c:
	Replaced movie, screenshot and soundshot UI by a general
	media UI. FIXME: The dialog needs further work.

	* gfxoutputdrv/mpegdrv.*: Renamed to ffmpegdrv.*.
	MP3 audio codec is forced now. Resolution of the video is a
	multiple of 16 now. Funktion pointers p_<ffmpeg-function) are
	used now, must be set in arch/*/ffmpeglib.c

	* gfxoutputdrv/ffmpeg/*.h: New header files from the ffmpeg
	library.

	* gfxoutputdrv/ffmpeglib.h: New file declaring the ffmpeg
	functions and pointers.

	* gfxoutputdrv/gfxoutput.c: First initialises the ffmpeg lib,
	then the driver depending on HAVE_FFMPEG.

	* gfxoutputdrv/Makefile.am: Added new files.

	* sound.c: Uses HAVE_FFMPEG.

	* sound.h: Fixed prototype of renamed sound driver.

	* sounddrv/soundmovie.c: Renamed to soundffmpegaudio.c.

2003-10-29  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/video.c (video_canvas_destroy): Fixed call order
	of releasing canvas resources.

	* c128/c128cia1.c, c64/c64cia1.c, c64/c64cia2.c,
	cbm2/cbm2cia1.c, pet/petvia.c, vic20/vic20ieeevia1.c,
	vic20/vic20ieeevia2.c, vic20/vic20via1.c, vic20/vic20via2.c:
	Init prv member of context struct to NULL in setup functions.

2003-10-28  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.12.

	* drive/drivetypes.h, drive/iec/cia1581d.c: Removed obsolete
	IEC struct.

	* drive/drivetypes.h, drive/drivecpu.c: Removed static char
	arrays.

	* drive/drivetypes.h, drive/iec/memiec.c, drive/ieee/fdc.c,
	drive/ieee/memieee.c, drive/tcbm/glue1551.c, drive/drive.c,
	drive/tcbm/mem1551.c, drive/drivecpu.c, drive/drivemem.c,
	drive/drivesync.c: Dynamically allocate drive CPU struct.

	* drive/drivetypes.h, drive/iec/cia1581d.c, drive/iec/iec.c,
	drive/iec/via1d1541.c, drive/ieee/ieee.c, drive/ieee/riot1d.c,
	drive/ieee/riot2d.c, drive/ieee/via1d2031.c: Dynamically
	allocate CPU function struct.

	* drive/iec/iec-cmdline-options.c: Added support for 1570 and
	1571CR drives.

	* drive/iec/iecrom.c (iecrom_load_1571cr): Fixed typo.

	* video/video-render.c (render_yuv_image): Replaced obsolete
	video resource defines.

2003-10-27  John Selck  <selck_j@informatik.haw-hamburg.de>

	* video/video-resources.h: Removed all true PAL emulation
	defines and replaced them by one common PAL emu define.
	Added pal_blur member to video_resources_t.

	* video/video-resources.c: Added default value for pal_blur.

	* video/video-resources-pal.c: Made VIDEO_RESOURCE_PAL_MODE_TRUE
	default setting for PAL emulation mode.
	Added new resource variable PALBlur, default value 0.5 (500).

	* video/video-color.c: video_calc_ycbcrtable() now calculates
	weighted luminance tables for variable blurring.

	* video/render1x1pal.c: Removed render_16_1x1_palyc() and
	render_32_1x1_palyc().
	render_16_1x1_pal() and render_32_1x1_pal() are now able to
	render different degrees of blurriness.

	* video/render2x2pal.c: Removed render_16_2x2_palyc() and
	render_32_2x2_palyc().
	render_16_2x2_pal() and render_32_2x2_pal() are now able to
	render different degrees of blurriness.

	* video/render1x1pal.h: Remove obsolete prototypes.

	* video/render2x2pal.h: Remove obsolete prototypes.

	* video/renderyuv.c: Disabled VIDEO_RESOURCE_PAL_MODE_BLUR
	dependant code.

	* video/video-render-pal.c: Changed PAL emu calls.

	* arch/win32/uivideo.c: Removed old PAL emulation modes and
	replaced them by a single general mode.
	Added code for IDC_VIDEO_ADVANCED_BLUR.
	
	* arch/win32/res.rc: Added PAL Blur EDITTEXT to video dialog.
	
	* arch/win32/res.h: Added IDC_VIDEO_ADVANCED_BLUR define.

2003-10-26  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/*: cleanup: fixed email-address, removed
	superfluous includes, better encapsulation

2003-10-26  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.12.

	* drive/drivetypes.h, drive/iec/cia1581d.c: Removed obsolete
	IEC struct.

	* drive/drivetypes.h, drive/drivecpu.c: Removed static char
	arrays.

	* drive/drivetypes.h, drive/iec/memiec.c, drive/ieee/fdc.c,
	drive/ieee/memieee.c, drive/tcbm/glue1551.c, drive/drive.c,
	drive/tcbm/mem1551.c, drive/drivecpu.c, drive/drivemem.c,
	drive/drivesync.c: Dynamically allocate drive CPU struct.

	* drive/drivetypes.h, drive/iec/cia1581d.c, drive/iec/iec.c,
	drive/iec/via1d1541.c, drive/ieee/ieee.c, drive/ieee/riot1d.c,
	drive/ieee/riot2d.c, drive/ieee/via1d2031.c: Dynamically
	allocate CPU function struct.

	* drive/iec/iec-cmdline-options.c: Added support for 1570 and
	1571CR drives.

	* drive/iec/iecrom.c (iecrom_load_1571cr): Fixed typo.

2003-10-26  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.11.

	* petcat.c, c1541.c: Initialize archdep.

	* arch/win32/archdep.c (archdep_init): Set binary mode for
	stdin and stdout.

	* arch/unix/uivicii.c, arch/unix/uivic.c, arch/unix/uivdc.c,
	arch/unix/uicrtc.c, arch/unix/uited.c, arch/unix/uivicii.h,
	arch/unix/uivic.h, arch/unix/uivdc.h, arch/unix/uicrtc.h,
	arch/unix/uited.h, arch/unix/c64ui.c, arch/unix/c128ui.c,
	arch/unix/vic20ui.c, arch/unix/petui.c, arch/unix/cbm2ui.c,
	arch/unix/plus4ui.c, arch/unix/fullscreenarch.h,
	arch/unix/x11/fullscreen.c, arch/unix/x11/vidmode.c,
	arch/unix/x11/vidmode.h, arch/unix/x11/dga1.c,
	arch/unix/x11/dga1.h, arch/unix/x11/dga2.c,
	arch/unix/x11/dga2.h, arch/unix/c64ui.h, arch/unix/c128ui.h,
	arch/unix/vic20ui.h, arch/unix/petui.h, arch/unix/plus4ui.h,
	arch/unix/cbm2ui.h, c64/c64.c, c128/c128.c, vic20/vic20.c,
	pet/pet.c, plus4/plus4.c, cbm2/cbm2.c: Added fullscreen
	shutdown.

	* arch/*/c64ui.h, arch/*/c128ui.h, arch/*/vic20ui.h,
	arch/*/petui.h, arch/*/plus4ui.h, arch/*/cbm2ui.h: Removed.

	* arch/unix/Makefile.am, arch/win32/Makefile.am,
	arch/msdos/Makefile.am, arch/riscos/Makefile.am,
	arch/os2/ui/Makefile.am, arch/os2/Makefile.am,
	arch/beos/Makefile.am, Makefile.am: Updated makefiles.

	* arch/win32/c64ui.c, arch/msdos/c64ui.c, arch/riscos/c64ui.c,
	arch/beos/c64ui.cc, arch/win32/c128ui.c, arch/msdos/c128ui.c,
	arch/riscos/c128ui.c, arch/beos/c128ui.cc,
	arch/win32/vic20ui.c, arch/msdos/vic20ui.c,
	arch/riscos/vic20ui.c, arch/beos/vic20ui.cc,
	arch/win32/petui.c, arch/msdos/petui.c, arch/riscos/petui.c,
	arch/beos/petui.cc, arch/win32/plus4ui.c,
	arch/msdos/plus4ui.c, arch/riscos/plus4ui.c,
	arch/beos/plus4ui.cc, arch/win32/cbm2ui.c,
	arch/msdos/cbm2ui.c, arch/riscos/cbm2ui.c, arch/os2/ui.c,
	arch/beos/cbm2ui.cc (*ui_shutdown): New functions.

	* arch/unix/ui.c (ui_common_shutdown): Call
	`fullscreen_shutdown()'.

	* arch/unix/unixmain.c (main_exit): Removed call to
	`fullscreen_shutdown()'.

	* drive/drivetypes.h, drive/iec/cia1571d.c,
	drive/iec/cia1581d.c, drive/iec/memiec.c, drive/ieee/fdc.c,
	drive/iec/via1d1541.c, drive/iec/wd1770.c, drive/tcbm/tpid.c,
	drive/iecieee/via2d.c, drive/ieee/memieee.c, drive/drive.c,
	drive/ieee/riot1d.c, drive/ieee/riot2d.c, drive/drivecpu.c,
	drive/ieee/via1d2031.c, drive/tcbm/glue1551.c,
	drive/tcbm/mem1551.c, drive/drivemem.c: Dynamically allocate
	drive struct.

2003-10-26  Andreas Matthies  <andreas.matthies@gmx.net>

	* raster/raster-canvas.c (refresh_canvas): Don't refresh
	video if update area starts behind canvas.

2003-10-25  Andreas Matthies  <andreas.matthies@gmx.net>

	* gfxoutputdrv/gfxoutput.c, mpegdrv.c,
	sounddrv/soundmovie.c: Fixed ffmpeg includes.

2003-10-25  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.10.

	* drive/drivetypes.h, drive/iec/iec.c, drive/iec/cia1571d.c,
	drive/iec/cia1581d.c, c64/c64iec.c, c128/c128iec.c,
	vic20/vic20iec.c, plus4/plus4iec.c, c64/c64.h, c64/c64cia1.c,
	c64/c64cia2.c, c64/c64-snapshot.c, c64/c64datasette.c, tpi.h,
	c128/c128.h, c128/c128cia1.c, c128/c128-snapshot.c,
	cbm2/cbm2.h, cbm2/cbm2-snapshot.c cbm2/cbm2.c, core/ciacore.c,
	cbm2/cbm2datasette.c: Dynamically allocate CIA struct.

	* drive/drivetypes.h, drive/iec/iec.c, drive/iec/via1d1541.c,
	drive/iecieee/iecieee.c, drive/iecieee/via2d.c,
	drive/ieee/ieee.c, drive/ieee/via1d2031.c, c64/c64iec.c,
	c128/c128iec.c, vic20/vic20iec.c, plus4/plus4iec.c,
	vic20/vic20.h, vic20/vic20.c, vic20/vic20via1.c,
	vic20/vic20via2.c, vic20/vic20ieeevia1.c, pet/petvia.c,
	vic20/vic20ieeevia2.c, vic20/vic20-snapshot.c, pet/pet.c,
	vic20/vic20datasette.c, vic20/vic20rsuser.c, pet/pet.h,
	pet/pet-snapshot.c, core/viacore.c: Dynamically allocate VIA
	struct.

	* drive/drivetypes.h, drive/ieee/ieee.c, drive/ieee/riot1d.c,
	drive/ieee/riot2d.c, core/riotcore.c: Dynamically allocate
	RIOT struct.

	* drive/drivetypes.h, drive/tcbm/tpid.c, drive/tcbm/tcbm.c,
	c64/c64.h, c64/c64tpi.c, c64/c64.c, c128/c128.h,
	c128/c128memsnapshot.c, cbm2/cbm2.h, cbm2/cbm2tpi1.c,
	cbm2/cbm2tpi2.c, cbm2/cbm2-snapshot.c, cbm2/cbm2.c,
	cbm2/cbm2acia1.c, cbm2/cbm2cia1.c, core/tpicore.c: Dynamically
	allocate TPI struct.

	* drive/iec/ciad.h: Moved here.

	* drive/iec/via1d1541.h, drive/ieee/via1d2031.h: New files.

	* drive/viad.h: Removed VIA1 specific code.

	* drive/iec/Makefile.am, drive/ieee/Makefile.am,
	drive/Makefile.am: Updated.

	* drive/iec/iec.c, drive/iec/memiec.c, drive/ieee/ieee.c,
	drive/ieee/memieee.c: Fixed includes.

	* drive/drivetypes.h, drive/tcbm/tpid.c, drive/ieee/riot2d.c,
	drive/iec/cia1571d.c, drive/iec/cia1581d.c,
	drive/iec/via1d1541.c, drive/ieee/via1d2031.c,
	drive/iecieee/via2d.c

	* raster/raster-cmdline-options.c, resources.c: Fixed
	warnings.

	* gfxoutputdrv/mpegdrv.c: #include "vice.h".

2003-10-25  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/uisnapshot.c: Use screenshot API to record movie
	file.

	* c128/c128.c, c64/c64.c, cbm2/cbm2.c, pet/pet.c,
	plus4/plus4.c, vic20/vic20.c (machine_vsync_hook): Call
	screenshot_record().

	* gfxoutput.h: Added record to gfxoutputdrv_t.

	* gfxoutputdrv/bmpdrv.c, gfxoutputdrv/pngdrv.c: These drivers
	don't have a record function.

	* gfxoutputdrv/Makefile.am, gfxoutputdrv/mpegdrv.{c|h}: New
	files (added). They implement the screenshot driver to record
	movie files using the FFMPEG library 0.4.8.

	* gfxoutputdrv/gfxoutput.c (gfxoutput_init): Initializes the
	mpeg driver if HAVE_AVCODEC_H is defined.

	* screenshot.c: New variables recording_driver and
	recording_canvas.
	(screenshot_save_core): Depending on the drv parameter it
	saves a screenshot image or records a movie frame.
	(screenshot_save): Sets recording_driver and recording_canvas
	if the driver has a recording function.
	(screenshot_record, screenshot_stop_recording,
	screenshot_is_recording): New functions.

	* screenshot.h: Added prototypes.

	* sound.c (sound_open): Warnings if recording sound device
	doesn't exist or is a realtime device.

	* sound.h: Added prototype.

	* sounddrv/soundmovie.c: Moved every FFMPEG related code to
	the mpeg driver. Now this sound device only registers a
	sample buffer from the mpeg driver and writes to this buffer.

2003-10-23  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/video.c: also NULL draw buffer pointer when
	freeing the frame buffer to fix crashes.

	* raster/raster.c: check draw buffer pointer against NULL
	before freeing it.

2003-10-21  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.9.

	* archapi.h, arch/unix/archdep.c, arch/win32/archdep.c,
	arch/msdos/archdep.c, arch/riscos/archdep.c,
	arch/os2/archdep.c, arch/beos/archdep.c (archdep_shutdown):
	New function.  (archdep_startup): Renamed.

	* machine.c (machine_shutdown): Call `archdep_shutdown()'.

	* main.c (main_program): Call `archdep_init()'.

	* c128/c128.c (machine_resources_shutdown): Call
	`functionrom_resources_shutdown()'.

	* c128/functionrom.c, c128/functionrom.h
	(functionrom_resources_shutdown): New function.

	* vic20/vic20.c (machine_resources_shutdown): Call
	`cartridge_resources_shutdown()'.

	* vic20/vic20cartridge.c (cartridge_resources_shutdown): New
	function.

	* core/tpicore.c (tpicore_shutdown): Free private structure.

	* tape/tape.c (tape_init): Can be called several times.

	* pet/pet-resources.c (pet_resources_shutdown): Free ROM image
	names.

	* c64/cart/expert.c, c64/cart/kcs.c, c64/cart/supergames.c,
	c64/cart/final.c, c64/cart/zaxxon.c, c64/cart/epyxfastload.c,
	c64/patchrom.c, c64/c64mem.c, pet/petmem.c, c128/z80mem.c,
	c128/c128mem.c, diskimage/diskimage.c, arch/unix/plus4ui.c,
	arch/unix/x11/gnome/uisnapshot.c, arch/unix/uivicii.c,
	arch/unix/x11/gnome/gnomevideo.c, arch/unix/c64ui.c,
	arch/unix/vsidui.c, arch/unix/c128ui.c, arch/win32/uivicii.c,
	arch/unix/uiperipheral.c, arch/win32/tfearch.c,
	arch/win32/uiplus4mem.c, arch/win32/uicbm2set.c,
	arch/win32/uivicset.c, arch/win32/uisound.c,
	arch/win32/uipetset.c, arch/riscos/uimsgwin.c, cbm2/cbm2mem.c,
	tape/tape-snapshot.c, plus4/plus4mem.c, vic20/vic20mem.c,
	sounddrv/sounddump.c, sounddrv/soundfs.c, sounddrv/soundsb.c,
	sounddrv/soundmovie.c, sounddrv/soundwav.c, main.c,
	monitor/mon_util.c, serial/serial-iec.c, machine.c,
	printerdrv/interface-serial.c, arch/unix/x11/xaw/uimenu.c,
	arch/unix/x11/gnome/uimenu.c, arch/win32/c64ui.c, c64/c64.c,
	c64/cart/c64cartmem.c, c64/c64tpi.c, c64/psid.c, pet/pet.c,
	c128/c128.c, c128/c128mmu.c, arch/msdos/menudefs.c,
	arch/msdos/vsync.c, cbm2/cbm2-resources.c, cbm2/cbm2.c,
	cbm2/cbm2cia1.c, core/ciatimer.c, drive/iec/wd1770.c,
	drive/ieee/fdc.c, plus4/ted-mem.c, plus4/plus4.c, traps.c,
	plus4/plus4-resources.c, vic20/vic20.c, vic20/vic20mem.c:
	Removed unused includes.

	* interrupt.h: Removed DMA trigger macro.

	* fliplist.c, fliplist.h (flip_shutdown): New function.
	(flip_load_list): Fixed pointer size bug.

	* machine.c (machine_shutdown): Call `flip_shutdown()'.

	* arch/unix/uicommands.c (attach_disk, attach_tape,
	smart_attach, load_snapshot_trap, load_save_fliplist): Allow
	to free last directory variable.

	* arch/unix/x11/xaw/x11ui.c, arch/unix/x11/gnome/x11ui.c
	(ui_shutdown): Call `ui_common_shutdown()'.

	* arch/unix/ui.c, arch/unix/ui.h (ui_common_shutdown): New
	function.

	* arch/unix/uicommands.c, arch/unix/uicommands.h
	(uicommands_shutdown): New function.

2003-10-20  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/video.c, arch/riscos/ui.c: some cleanups to
	track PAL Emu crashes.

2003-10-20  Dag Lem  <resid@nimrod.no>

	* resid/: Updated to final reSID 0.15.

2003-10-19  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.8.

	* resources.c (resources_free): New function.
	[resource_ram_s]: Resource name is not const anymore.

	* video/video-resources.c (video_resources_chip_init): Free
	resource names.

	* raster/raster-resources.c (raster_resources_chip_init):
	Likewise.

	* arch/unix/uicmdline.c, arch/win32/uicmdline.c,
	arch/msdos/uicmdline.c, arch/riscos/uicmdline.c,
	arch/beos/uicmdline.c, arch/os2/uicmdline.c
	(ui_cmdline_show_help): Changed parameter.

	* uicmdline.h: New file.

	* arch/unix/uicmdline.h, arch/win32/uicmdline.h,
	arch/msdos/uicmdline.h, arch/riscos/uicmdline.h,
	arch/beos/uicmdline.h, arch/os2/uicmdline.h: Removed.

	* Makefile.am, arch/unix/Makefile.am, arch/win32/Makefile.am,
	arch/msdos/Makefile.am, arch/riscos/Makefile.am,
	arch/beos/Makefile.am, arch/os2/Makefile.am: Updated.

	* arch/win32/uicmdline.c (ui_cmdline_show_options): Fixed
	prototype.

	* arch/win32/ui.c (handle_wm_command): Fixed prototype of
	`ui_cmdline_show_options()'.

	* arch/beos/ui.cc: Likewise.

	* arch/beos/ui.h: Removed obsolete prototype.

	* cmdline.c (cmdline_free): New function.

	* video/video-cmdline-options.c
	(video_cmdline_options_chip_init): Free cmdline names.

	* raster/raster-cmdline-options.c
	(raster_cmdline_options_chip_init): Likewise.

	* sound.c (sound_resources_shutdown): Free record device
	resource strings.

	* arch/unix/x11/videoarch.h, arch/win32/videoarch.h,
	arch/msdos/videoarch.h, arch/riscos/videoarch.h,
	arch/os2/videoarch.h, arch/beos/videoarch.h: Added video chip
	resource pointer.

	* video/video-resources.c, video.h
	(video_resources_chip_shutdown): New function.

	* raster/raster-resources.c, raster/raster-resources.h
	(raster_resources_chip_shutdown): New function.

	* raster/raster.c (raster_shutdown): Free raster resources.

	* video/video-canvas.c (video_canvas_shutdown): Free canvas.

	* raster/raster.h: Added pointer to raster resources.

2003-10-19  Dag Lem  <resid@nimrod.no>

	* arch/unix/uicommands.c, uicommands.h: New menu
	ui_sound_record_commands_menu.
	(sound_record): New callback for sound recording to file.

	* arch/unix/c128ui.c, c64ui.c, cbm2ui.c, petui.c, plus4ui.c,
	vic20ui.c: Added menu item for sound recording.

2003-10-18  Dag Lem  <resid@nimrod.no>

	* c64/c64.c (machine_specific_powerup): Removed call to
	machine_play_psid(). This caused a crash when called via
	psid_init_driver() on switching the MachineVideoStandard
	resource.

2003-10-18  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.7.

	* cbm2/cbm2tpi2.c: #include "lib.h".

	* arch/unix/uited.c: Removed unused code.

2003-10-17  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/res.h, resc64.rs, ui.c, uisnapshot.c,
	uisnapshot.h: Implement a provisional UI for movie recording.

	* sound.c (sound_open): Avoid recording and playback device
	being identical.
	(sound_init): Initialize the movie driver if HAVE_AVFORMAT_H.

	* sounddrv/soundmovie.c, Makefile.am: New file (included).

2003-10-16  Dag Lem  <resid@nimrod.no>

	* resid/: Corrected emulation of the ADSR delay bug.

2003-10-12  Andreas Dehmel  <zarquon@t-online.de>

	* arch/riscos/kbd.c: fixed format string for joystick key
	descriptor

	* arch/riscos/ui.c: fixed display of sampling rate

	* arch/riscos/video.c: adapted to new video interface

2003-10-12  Andreas Matthies  <andreas.matthies@gmx.net>

	* core/ciacore.c: Fixed wrong parameter in call to
	lib_msprintf.

	* arch/win32/uisnapshot.c: Uses new resource
	SoundRecordDeviceName and SoundRecordDeviceArg for sound
	recording.

	* sound.c: Added new resources SoundRecordDeviceName and
	SoundRecordDeviceArg with corresponding variables and
	functions.
	Renamed snddata member pdev to playdev and added recdev.
	(sound_open): Also open the recording device if the resource
	SoundRecordDeviceName is set.
	(sound_close): Also close the recording device.
	(sound_flush): Write to record device if its active. Warp
	mode disables sound flushing only if no recording device is
	active. With this we must avoid that clkfactor is
	recalculated for sample based not exact sound engines.

2003-10-11  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.6.

	* via.h, core/viacore.c, drive/iec/via1d1541.c,
	drive/iecieee/via2d.c, drive/ieee/via1d2031.c,
	vic20/vic20via1.c, vic20/vic20via2.c, vic20/vic20ieeevia1.c,
	vic20/vic20ieeevia2.c, pet/petvia.c: No more static arrays.

	* cia.h, core/ciacore.c, drive/iec/cia1571d.c,
	drive/iec/cia1581d.c, c64/c64cia1.c, c64/c64cia2.c,
	ic128/c128cia1.c, cbm2/cbm2cia1.c: Changed likewise.

	* riot.h, core/riotcore.c, drive/ieee/riot1d.c,
	drive/ieee/riot2d.c: Changed likewise.

	* tpi.h, core/tpicore.c, drive/tcbm/tpid.c, c64/c64tpi.c,
	cbm2/cbm2tpi1.c, cbm2/cbm2tpi2.c: Changed likewise.

	* drive/tcbm/tcbm.c, c64/c64.c, c128/c128.c, vic20/vic20.c,
	pet/pet.c, cbm2/cbm2.c: Shutdown chip cores.

2003-10-08  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/Makefile.am (libarch_a_SOURCES): Removed
	uidrivec64c128vic20.c, uidrivec64c128vic20.h, added
	uidrivec64vic20.c, uidrivec64vic20.h,
	uidrivec128.c, uidrivec128.h.

	* arch/win32/arch.dsp: Removed uidrivec64c128vic20.c, added
	uidrivec64vic20.c, uidrivec128.c

	* arch/win32/c128ui.c: Include "uidrivec128.h".
	(c128_ui_specific): Updated video_settings and drive_settings
	calls.

	* arch/win32/c64ui.c: Include "uidrivec64vic20.h".
	(c64_ui_specific): Updated video_settings and drive_settings
	calls.

	* arch/win32/cbm2ui.c (cbm2_ui_specific): Updated
	video_settings call.

	* arch/win32/petui.c (pet_ui_specific): Updated video_settings
	call.

	* arch/win32/plus4ui.c (plus4_ui_specific): Updated
	video_settings call.

	* arch/win32/res.h: Added ID's for new drives and ID for video
	palette settings dialog.

	* arch/win32/res.rc (IDD_DRIVE_SETTINGS_DIALOG): Added 1570
	drive to dialog.
	(IDD_VIDEO_PALETTE_DIALOG): Added new dialog for palette
	settings.

	* arch/win32/resc128.rc (IDD_DRIVE_SETTINGS_DIALOG_C128):
	Added new dialog for drive settings.

	* arch/win32/resplus4.rc (IDD_DRIVE_SETTINGS_DIALOG_PLUS4):
	Added 1570 drive to dialog.

	* arch/win32/ui.c (window_proc): Update window position
	resource on WM_MOVE only if window is not minimized or not
	maximized.
	Shift drag and drop attaches file to unit 8.

	* arch/win32/uidrivec128.c, arch/win32/uidrivec128.h,
	arch/win32/uidrivec64vic20.c, arch/win32/uidrivec64vic20.h:
	New files.

	* arch/win32/uidrivec64c128vic20.c,
	arch/win32/uidrivec64c128vic20.h:
	Removed files.

	* arch/win32/uidriveplus4.c: Handle 1570 drive as well.

	* arch/win32/uivideo.c: Added support for multiple video chip
	settings.
	Fixed external palette list, the list is chip dependent now.

	* arch/win32/uivideo.h (ui_video_settings_dialog): Updated
	prototype.
	Added definitions for video chip types.

	* arch/win32/vic20ui.c: Include "uidrivec64vic20.h".
	(vic20_ui_specific): Updated video_settings and drive_settings
	calls.

	* vic20/vice_resources.c (vic_resources_init): Allow internal
	palette for PAL emulation.

2003-10-06  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.5.

	* video/video-color.c, video.h, plus4/ted-color.c,
	plus4/ted-color.h, plus4/ted.c, vic20/vic-color.c,
	vic20/vic-color.h, vic20/vic.c, vicii/vicii-color.c,
	vicii/vicii-color.h, vicii/vicii.c, video/video-resources.c,
	vicii/vicii-resources.c (video_color_update_palette): Pass
	canvas.

	* video.h, video/video-resources.c, video/video-resources.h,
	video/video-render-pal.c: Added palette video resource.

	* crtc/crtc-resources.c, crtc/crtc-resources.h, crtc/crtc.c,
	vdc/vdc-resources.c, vdc/vdc-resources.h, vdc/vdc.c: Removed
	private palette code.

	* video.h, vicii/vicii-resources.c, vic20/vic-resources.c,
	plus4/ted-resources.c, crtc/crtc-resources.c,
	vdc/vdc-resources.c: Set internal palette.

	* drive/drive.h, drive/iec/wd1770.c, drive/iec/iec.c,
	drive/iec/via1d1541.c, drive/iec/iecrom.c, drive/iec/memiec.c,
	drive/driveimage.c, drive/drive.c, drive/drive-snapshot.c,
	drive/drive-resources.c, drive/drivesync.c, drive/drivecpu.c,
	drive/iecieee/iecieee.c, drive/drivemem.c, drive/iec/iecrom.h,
	c128/c128iec.c: Added support for 1570 and 1571CR drives.

	* arch/unix/uidrivec64c128vic20.c,
	arch/unix/uidrivec64c128vic20.h: Renamed.

	* arch/unix/uidrivec128.c, arch/unix/uidrivec128.h: New files.

	* arch/unix/Makefile.am: Updated.

	* arch/unix/vic20ui.c, arch/unix/c64ui.c, arch/unix/c128ui.c:
	Splitted c128 drive UI.

2003-10-05  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.4.

	* video/video-cmdline-options.c, vic20/vic-cmdline-options.c.
	vicii/vicii-cmdline-options.c, plus4/ted-cmdline-options.c,
	crtc/crtc-cmdline-options.c, vdc/vdc-cmdline-options.c:
	Unified palette command line options.

	* video/video-resources.c, video.h, vicii/vicii-resources.c,
	vic20/vic-resources.c, plus4/ted-resources.c,
	crtc/crtc-resources.c, vdc/vdc-resources.c: Unified palette
	resources.

	* arch/unix/uivicii.c, arch/unix/uicrtc.c, arch/unix/uivdc.c,
	arch/unix/uivic.c, arch/msdos/plus4ui.c, arch/msdos/c64ui.c,
	arch/msdos/cbm2ui.c, arch/msdos/c128ui.c, arch/msdos/petui.c:
	Changed palette resources.

	* 6510core.c: Fixed drive 1 debugging.

	* drive/iec/cia1581d.c (read_ciapa): Added disk change bit.
	(store_ciapa): Added side bit.

	* drive/driverom.c (drive_rom_initialize_traps): Added 1581
	CRC trap, removed jobcode trap.

	* drive/iec/wd1770.c, drive/iec/wd1770.h: Massive rewrite.

	* drive/iec/jobcode1581.c: Small changes.

	* core/riotcore.c: #include "lib.h".

	* c64/cart/ide64.c (ide64_bin_attach): Fixed warning.

	* arch/win32/video.c: Fixed nested comment.

2003-10-03  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.3.

	* gfxoutputdrv/gfxoutput.c: Fixed define.

	* raster/raster.c (raster_shutdown): Free palette before the
	canvas is freed.

	* via.h, core/viacore.c, drive/iec/via1d1541.c
	drive/ieee/via1d2031.c: Fixed snapshot module mess.

	* core/ciatimer.c, core/ciatimer.h: Moved some functions to
	the source file.

2003-09-30  Dirk Jagdmann  <doj@cubic.org>

	* arch/unix/catweaselmkiii.c: fixed reading from SID

2003-09-28  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.2.

	* raster/raster.c, raster/raster.h: Removed palette support.

	* video.h, arch/unix/x11/video.c, arch/win32/video.c,
	arch/msdos/video.c, arch/riscos/video.c, arch/os2/video.c,
	arch/beos/video.cc (video_canvas_create): Removed palette
	parameter. (video_canvas_set_palette): Palette is not const.

	* arch/unix/x11/videoarch.h, arch/win32/videoarch.h,
	arch/msdos/videoarch.h, arch/riscos/videoarch.h,
	arch/os2/videoarch.h, arch/beos/videoarch.h: Changed palette
	member, new member `created'.

	* video/video-canvas.c (video_canvas_palette_set,
	video_canvas_create_set): New functions.

	* video/video-canvas.h: New file.

	* video/Makefile.am: Added new file.

	* video/video-color.c (video_color_update_palette): Call
	`video_canvas_palette_set()' and removed raster hack.
	(video_color_palette_free): New function.

	* video.h, video/video-color.c, vicii/vicii.c, vic20/vic.c,
	plus4/ted.c (video_color_set_canvas): New function.

	* vdc/vdc.c (vdc_load_palette): Call
	`video_canvas_palette_set()'.

	* crtc/crtc.c (crtc_load_palette): Changed likewise.

	* machine.c: #include "diskimage.h".

	* core/ciatimer.c (ciat_init_table): Only initialize once.

	* core/ciacore.c (ciacore_init): Initialize CIA table.
	#include "lib.h".

	* c64/c64.c, c128/c128.c, cbm2/cbm2.c, vic20/vic20.c,
	drive/drivetypes.h: Do not initialize CIA table.

	* cia.h, core/ciacore.c: TA and TB are pointer now.

	* drive/drive.c, cbm2/cbm2.c: #include "alarm.h".

	* ciatimer.h: Moved to core directory.

	* core/Makefile.am, Makefile.am: Updated.

	* plus4/ted.c (ted_delay_clk): Do not inline.

	* arch/unix/x11/renderxv.c, interrupt.h, core/viacore.c,
	drive/drivecpu.c: Fixed warnings.

2003-03-27  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/joy.c (joystick_di_open): Return success/failure.
	(set_joystick_device_1, set_joystick_device_2) Update resource
	if DX5 init was succesfull. Call joy_arch_init if it has not
	been initialised yet.
	(joy_arch_init): Only initialise if it was not yet
	initialised.

2003-09-27  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.1.

	* ChangeLog*: Renamed last changelog and reversed order of old
	changelogs.

	* Makefile.am: Added changelog.

	* video/video-viewport.c, video.h (video_viewport_title_set,
	video_viewport_title_free): New function.

	* video/video-canvas.c (video_canvas_shutdown): Free canvas
	title.

	* raster/raster.c (raster_set_title): Call
	`video_viewport_title_set'.

	* c64/cart/c64cart.c (cartridge_resources_shutdown): Free
	`cartfile'.

	* diskimage/rawimage.c, diskimage/rawimage.h
	(rawimage_resources_shutdown): New function.

	* diskimage/diskimage.c, diskimage.h
	(disk_image_resources_shutdown): New function.

	* machine.c (machine_shutdown): Call
	`disk_image_resources_shutdown()'.

	* arch/unix/x11/video.c, arch/win32/video.c,
	arch/msdos/video.c, arch/riscos/video.c, arch/os2/video.c,
	arch/beos/video.cc (video_arch_resources_shutdown): New
	function. (video_arch_init_resources): Renamed.

	* video/video-resources.c, video.h (video_resources_shutdown):
	New function.

	* c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	plus4/plus4.c, cbm2/cbm2.c (machine_resources_shutdown):
	Shutdown video resources.

	* core/viacore.c, via.h (viacore_shutdown): New function.

	* core/ciacore.c, cia.h (viacore_shutdown): New function.

	* core/riotcore.c, riot.h (riotcore_shutdown): New function.

	* drive/iec/iec.c, drive/iec.h (iec_drive_shutdown): New
	function.

	* drive/iecieee/iecieee.c, drive/iecieee.h
	(iecieee_drive_shutdown): New function.

	* drive/ieee/ieee.c, drive/ieee.h (ieee_drive_shutdown): New
	function.

	* drive/tcbm/tcbm.c, drive/tcbm.h (tcbm_drive_shutdown): New
	function.

	* c64/c64drive.c, vic20/vic20drive.c, pet/petdrive.c,
	plus4/plus4drive.c, cbm2/cbm2drive.c, machine-drive.h
	(machine_drive_shutdown): New function.

	* drive/drivecpu.c (drive_cpu_shutdown): Call
	`machine_drive_shutdown()'.

	* resources.c (resources_shutdown): Free machine id.

