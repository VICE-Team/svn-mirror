2001-05-31  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.35.

	* printerdrv/prt-mps803.c: Added file header, added includes.
	(print_cbm_char, write_line, bitmode_off, print_bitmask):
	Fixed variable declaration.
	(mps803bmp_open, mps803bmp_close): `new' and `delete' are no
	ISO C. Fixed memset size bug.
	(mps803bmp_putc, mps803bmp_close): Make it compile.
	(init_charset): Load charset from rom image.

	* printerdrv/Makefile.am: New file.

	* Makefile.am: Added `printerdrvlib.a'.

	* arch/unix/archdep.c, arch/msdos/archdep.c,
	arch/win32/archdep.c, arch/os2/archdep.c, arch/beos/archdep.c
	(archdep_default_sysfile_pathlist): Added `PRINTER' to path.

	* arch/os2/Makefile.am: Added icons and bitmaps.

	* c64/psid.c (psid_init_tune): Commented out reference to
	`vsid_ui_display_irqtype()'.

2001-05-30  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/dialogs/dialogs.h:
	moved Dialog IDs here
   
	* arch/os2/dialogs/dialogs.rc:
	added vsid-icon
   
	* arch/os2/dialogs/dlg-datasette.c:
	some small changes to the datasette dialog handling
   
	* arch/os2/dialogs/dlg-datasette.h:
	renumbered controls
   
	* arch/os2/dialogs/dlg-drive.c:
	removed workaround for readonly
   
	* arch/os2/dialogs/dlg-drive.h,
	arch/os2/dialogs/dlg-emulator.h,
	arch/os2/dialogs/dlg-fileio.h,
	arch/os2/dialogs/dlg-joystick.h: removed dlg ID
   
	* arch/os2/dialogs/dlg-fileio.c:
	added some X128 features
   
	* arch/os2/dialogs/dlg-joystick.c:
	code more structured

	* arch/os2/dialogs/dlg-vsid.c:
	added vsid-icon, speed display

	* arch/os2/dialogs/dlg-vsid.h:
	renumbered controls
   
	* arch/os2/dialogs/dlg-vsid.rc:
	added the new controls to vsid
   
	* arch/os2/dialogs/menubar.[h,c,rc]:
	added function rom controls, new reu controls, vdc video
	cache, fixed a bug for sound device type
   
	* arch/os2/doc/Vice_for_OS2.txt:
	fixed to changed
   
	* arch/os2/install.cmd:
	added vsid icon
   
	* arch/os2/joystick.c:
	commented out a debug line
   
	* arch/os2/kbd/proc.c:
	added CAPS key support
   
	* arch/os2/makedist.cmd:
	added vsid-icon
   
	* arch/os2/vac++/incl/*.icc:
	some changes because of new files
   
	* arch/os2/video.c:
	fixed some small errors
   
	* arch/os2/vsidui.c:
	added the new features/controls
   
	* c64/psid.c:
	added vsid_ui_display-irqtype
   
	* sounddrv/sounddart.c:
	made working with new bufferspace style
   
	* vsidui.h:
	added new function vsid_ui_display_irqtype
   
2001-05-28  Dag Lem  <resid@nimrod.no>

	* c128/c128.c (machine_init): Fixed vsync initialization order.

	* c64/c64.c (machine_init): Likewise.

	* cbm2/c610.c (machine_init): Likewise.

	* pet/pet.c (machine_init): Likewise.

	* vic20/vic20.c (machine_init): Likewise.

	* vsync.c (vsync_init): Moved setting of vsyncarch_freq back
	from set_timer_speed.

2001-05-29  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/c128ui.c: removed now superfluous cartridge stub
	functions.

	* arch/riscos/ui.c: suspend sound on snapshot operations,
	close sound on extraordinary exits.

2001-05-28  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.34.

	* main.c (MAIN_PROGRAM): Fixed typo.

	* ciacore.c, c64/c64tpi.c, c64/psid.c, drive/via1d.c,
	sid/sid.c, sounddrv/sounddx.c, vicii/vicii-mem.c,
	vicii/vicii-snapshot.c, vdrive/vdrive-dir.c, monitor/mon.c,
	cmdline.c, diskimage.c, gcr.c, parallel.c, snapshot.c. t64.c,
	tape.c: Fixed variable types.

2001-05-27  Dag Lem  <resid@nimrod.no>

	* vsync.c (set_timer_speed): Moved setting of vsyncarch_freq
	from vsync_init.
	(display_speed): Only lie about speed when timer_speed is set.

2001-05-27  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.33.

	* imagecontents.c, imagecontents.h (image_contents_to_string):
	Added conversion rule.

	* arch/unix/uicommands.c, arch/unix/x11/gnome/ui.c,
	arch/win32/uilib.c: Added conversion rule to
	`image_contents_to_string'.

	* ciacore.c, ciacore.h, drive/drivetypes.h, parallel.h,
	parallel.c, c64/c64tpi.c, drive/drive.h, drive/drive.c,
	drive/drive-resources.c, diskimage.c, diskimage.h,
	drive/drivetypes.h, drive/fdc.c,drive/fdc.h, drive/riot2d.c,
	drive/riot1d.c, drive/riotd.h, drive/via1d.c, drive/via2d.c,
	drive/viad.h, drive/wd1770.c, screendrv/bmp.c,
	sounddrv/soundwav.c, vdrive/vdrive-bam.c, monitor/asm6502.c,
	monitor/asmz80.c, monitor/mon_assemble6502.c,
	monitor/mon_assemblez80.c, monitor/mon_disassemble.c,
	monitor/mon_drive.c, monitor/mon_file.c, autostart.c:
	Fixed variable types.

	* arch/win32/uimon.c (dis_window_proc): Hardcode `e_PC' for
	now just to get it compiled.

2001-05-26  Dag Lem  <resid@nimrod.no>

	* resid/sid.cc (clock_fast): Fixed incorrect sample generation.

	* sid/resid.cc: Removed include of fixpoint.h.

	* sound.c (sound_flush): Return delay in seconds.

	* sound.h (sound_flush): Now returns double.

	* vsync.c (display_speed): Lie a bit about speed and frame rate
	to correct for different sound hardware timing.
	(vsync_init): Set vsyncarch_freq to avoid calling
	vsyncarch_frequency() all the time.
	(vsync_do_vsync): Do all time consuming stuff first. Then call
	sound_flush and get current time to calculate actual sound
	delay. Run statistics on the delay and adjust the frame output
	frequency every 3 seconds.

2001-05-26  Andreas Matthies  <andreas.matthies@gmx.net>

	* vic20/vic-snapshot.c (vic_snapshot_read_module):
	vic.draw_clk has to be calculated before the registers are
	restored

2001-05-25  pottendo  <pottendo@utanet.at>

	* arch/unix/x11/gnome/uisnapshot.c (ui_snapshot_dialog): fixed
	parameter order to `machine_write_snapshot()'.

2001-05-24  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.32.

	* palette.c, palette.h (palette_set_entry): Made static.

	* maincpu.c, maincpu.h (mainloop): Fixed prototype.

	* vicii/viciitypes.h, vicii/vicii.c, vicii/vicii.h,
	vicii/vicii-mem.c: Moved `vic_ii_handle_pending_alarms'.

	* vicii/vicii.c, vicii/vicii.h, vdc/vdc-mem.c, c64/c64.c,
	c64/c64cia1.c, c64/c64cia2.c, c128/c128.c, c128/c128cia1.c,
	c128/c128mmu.c: Removed `vic_ii_handle_pending_alarms_external'
	hack.

	* c128/c128mem.c, c128/c128mem.h, c128/z80mem.c,
	c128/c128mmu.c, c128/z80mem.h, c64/c64mem.h, c64/c64mem.c,
	c64/c64cartmem.c, vicii/vicii-mem.c, vicii/vicii-mem.h: Fixed
	naming of memory access functions.

	* monitor/mon.c (mon_register_list_get): New function.

	* arch/win32/uimon.c (update_last_shown_regs,
	output_register): Use `mon_register_list_get()' instead of
	directly using the monitor CPU type structure.

	* monitor/montypes.h: New file.

	* monitor/mon.h: Moved all internal stuff to `montypes.h'.

	* monitor/asm6502.c, monitor/asmz80.c,
	monitor/mon_assemble6502.c, monitor/mon_assemblez80.c,
	monitor/mon_breakpoint.c, monitor/mon_disassemble.h,
	monitor/mon_command.c, monitor/mon_parse.y,
	monitor/mon_drive.c, monitor/mon_file.c,
	monitor/mon_register6502.c, monitor/mon_registerz80.c,
	monitor/mon_lex.l, maincpu.c, drive/drivecpu.c, c128/z80.c:
	Adopted to new monitor interface header.

2001-05-24  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/console.c: incomplete line at bottom is left
	free.

	* arch/win32/uimon.c: disassembler/register window now opened
	as popup instead of MDI childs

	* arch/win32/uimon.c: using generic registry interface (not
	yet always...)

	* arch/monitor/mon.c: calling uimon_notify_change() upon 
	recognition of cpu command

	* arch/monitor/mon_register6502.c: corrected bug in 
	mon_register_print (mem(01) did not work), added mem(00).

	* arch/monitor/mon_register6502.c: corrected bug in 
	mon_register_list_get(), SP is only 8 bit wide, added FL
	register (for the FLAG register, byte wide), fixed the
	"1" flag.

2001-05-22  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/video.c, arch/beos/video.cc (canvas_destroy):
	Test for valid canvas before we free it.

2001-05-21  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.31.

	* monitor/mon_register6502.c, monitor/mon_registerz80.c
	(mon_register_list_get, mon_register_list_set): New functions.

	* monitor/mon_breakpoint.c, monitor/mon_breakpoint.h,
	monitor/mon.c, monitor/mon.h, monitor/mon_parse.y: Use
	standard structure names.

	* c128/c128mem.c: Added function ROM, C64 ROM and cart monitor
	access.

	* mem.h, c64/c64mem.c, c128/c128mem.c, vic20/vic20mem.c,
	pet/petmem.c, cbm2/c610mem.c (mem_ioreg_list_get): New
	function.

	* drive/drivemem.c, drive/drivemem.h (drive_ioreg_list_get):
	New function.

	* monitor/mon.c, monitor/mon.h, maincpu.c, drive/drivecpu.c:
	Added support for accessing IO through the monitor interface.

	* monitor/asmz80.c, monitor/mon_assemblez80.c,
	monitor/mon_lex.l: Added more opcodes.

2001-05-21  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/monitor.dsp: added missing files

	* arch/win32/uimon.c: added define for mon_get_reg_val()
	as temporary fix

2001-05-20  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.30.

	* monitor/mon_disassemble.c: Added more z80 address modes.

	* monitor/mon_assemble6502.c, monitor/mon_assemblez80.c,
	monitor/mon_command.c, monitor/mon_command.h,
	monitor/mon_register.h, monitor/mon_register6502.c,
	monitor/mon_registerz80.c, monitor/mon_breakpoint.c,
	monitor/mon_breakpoint.h, monitor/mon_file.c,
	monitor/mon_file.h: New files.

	* monitor/mon_assemble.c: Removed.

	* monitor/Makefile.am: Added new files.

	* monitor/mon.c: Moved some code to separate files and made it
	much more modular.

	* monitor/mon_lex.l, mon_parse.y: Added more z80 registers and
	support for new location of monitor command table.

	* monitor/asm.h, monitor/asmz80.c, monitor/asm6502.c,
	monitor/mon.c, monitor/mon.h: Added support for new assemler.

	* drive/drivetypes.h, drive/drivecpu.c, drive/drivecpu.h,
	drive/drivemem.c, c64/c64.c, c128/c128.c, vic20/vic20.c,
	pet/pet.c, cbm2/c610.c: Made drive monitor interface dynamic.

	* monitor/mon.h, drive/drivecpu.c, drive/drivecpu.h: Made
	`set_bank_base' available via the monitor interface.

	* drive/drivecpu.c, maincpu.c, c128/z80.c:
	#include "mon_breakpoint.h".

	* z80regs.h: New file.

	* Makefile.am: Added new file.

	* c128/z80.c, c128/z80.h, c128/c128cpu.c, maincpu.c,
	monitor/mon.h, drive/drivecpu.c: Added support for Z80
	register import/export.

2001-05-20  Andreas Matthies  <andreas.matthies@gmx.net>

	* autostart.c (autostart_prg): Don't append seperator to
	the directory.

	* arch/win32/uiattach.c (dialog_proc): Delete the pending
	'\' if a root directory is selected.

2001-05-18  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.29.

	* c64/c64mem.c, c128/c128mem.c (mem_initialize_memory): Do not
	overwrite memory limit table after it has been setup.

	* c64/c64memlimit.c, c128/c128memlimit.c (mem_limit_init):
	Setup last page of memory limit table.

	* c64/c64cartmem.c (cartridge_read_io2, cartridge_store_io2):
	Some KCS cartridge banking fixes.

	* c128/functionrom.c (functionrom_load_internal,
	functionrom_load_external): Clear ROM image if disabled.

	* c64/reu.c (reu_activate, reu_deactivate): Check for zero
	length filename.

	* utils.c, utils.h (util_check_null_string): New function.
	(util_load_file, util_save_file): Check filename.

	* c1541.c, monitor/mon.c, arch/msdos/tui_backend.c,
	c128/functionrom.c: Use `util_check_null_string()'.

2001-05-18  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/msdos/vic20ui.c: include drive.h

2001-05-18  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/uimon.c: fixes the bug that the console window
	does not have the focus sometimes

	* arch/win32/uimon.c: temporary work-around for the monitor
	console crashing sometimes.

2001-05-18  Andreas Matthies  <andreas.matthies@gmx.net>

	* vic20/vic-draw.c (draw, draw_2x): Using an
	extra_offscreen_border we don't need 'bordercheck' anymore.

	* vic20/vic-mem.c (vic_store): Use screen_width as an upper
	border for xstart (unvisible is unvisible).

	* vic20/vic.c (vic_change_timing): We don't have to reset the
	screen borders anymore.
	(vic_set_geometry): Use screen_width+VIC_SCREEN_MAX_TEXT_COLS*8
	as extra_offscreen_border in the rasters geometry. This should
	definitely avoid any access behind the framebuffer.

2001-05-17  pottendo  <pottendo@utanet.at>

	* arch/unix/uicrtc.c: Added `UseXSync' Toggle.

	* arch/unix/uisettings.h: Reverted change to `UseXSync' toggle. 
	* arch/unix/uisettings.c: ditto.

2001-05-16  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.28.

	* c64/reu.c (reu_dma): Fixed unsigned int bug.

	* arch/unix/vic20ui.c: Added VIC video standard and palette
	settings.

	* arch/unix/uidatasette.c, arch/unix/uidatasette.h,
	arch/unix/uicrtc.c, arch/unix/uicrtc.h: New files.

	* arch/unix/Makefile.am: Added new files.

	* arch/unix/c64ui.c, arch/unix/c128ui.c, arch/unix/vic20ui.c,
	arch/unix/petui.c, arch/unix/c610ui.c: Moved datasette
	specific UI controls to separate files.

	* arch/unix/uisettings.c, arch/unix/uisettings.h: Moved CRTC
	specific UI controls to separate files.

2001-05-14  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/vicemenu.cc: added menuitem for
	video standard in VIC20

	* arch/msdos/vic20ui.c: new menu callback function
	toggle_VideoStandard_callback; new menuitem

	* arch/win32/resvic.rc: renamed 'Drive sync factor' to
	'Video standard'

	* crtc/crtc-draw.c, vdc/vdc-draw.c, vicii/vicii-draw.c:
	Every parameter of a function registered in raster_mode that
	represents a char- or pixelborder is changed from unsigned
	to signed int

	* raster/raster_modes.h: every drawing function of raster_mode
	now uses signed instead of unsigned parameters for the
	interval borders

	* sounddrv/soundwmm.c: Win ME behaves like Win2000: no
	magic offset needed

	* vic20/vic-draw.c: draw(_2x) checks if display_xstop is
	reached

	* vic20/vic-mem.c (vic_store): uses several new values of the
	vic struct instead of fixed PAL values
	(vic_read): uses vic.cycle_offset to determine the rasterline

	* vic20/vic-snapshot.c: bigfix

	* vic20/vic.c: new include resources.h, new functions
	(vic_change_timing), (vic_set_geometry)
	uses several new members of the vic struct instead of PAL
	constants
	(init_raster), (vic_reset) use the new function to set the
	correct geometry and sync values

	* vic20/vic.h: added several items to vic struct:
	cycles_per_line, screen_height, first_displayed_line,
	last_displayed_line, screen_width, display_width, cycle_offset

	* vic20/vic20.c (machine_init): exchanged PAL constants with
	variables in several init calls
	(machine_get_cycles): uses cycles_per_sec instead of PAL
	constant
	(machine_change_timing) sets cycles_per_sec, cycles_per_rfsh
	and rfsh_per_sec, uses these values to set parameters for
	vsync and sound and patches the kernal

	* vic20/vic20.h: several constants for PAL and NTSC

	* vic20/vic20mem.c: new include "drive.h"
	(mem_load) patches the kernal at last
	(mem_pach_kernal) patches the kernal ROM depending on the
	current video standard

	* vic20/vic20mem.h: prototype for (mem_patch_kernal)

2001-05-14  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.27.

	* c64/reu.c (reu_read_snapshot_module): Initialize REU.
	(set_reu_size): More logging.
	[cmdline_options]: Fixed `REUsize' resource name.

2001-05-13  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/c128.dsp: Added c128-cmdline-options.c,
	c128-resources.c, c12memlimit.c to project file.

	* arch/win32/c64.dsp: Added c64-cmdline-options.c,
	c64-resources.c, c64memlimit.c to project file.

	* arch/win32/c64c128.dsp: Added c64cartmem.c, c64cartridge.c
	to project file.

	* arch/win32/cbm2.dsp: Added c610-cmdline-options.c,
	c610-resources.c to project file.

	* arch/win32/joystick.c (joystick_update): Added default case
	to two switches to prevent a few warnings.

	* arch/win32/msvc/config.h: Certain MSVC warnings are turned
	off if MSVC_WARNINGS is defined.

	* arch/win32/pet.dsp: Added pet-cmdline-options.c,
	pet-resources.c to project file.

	* arch/win32/statusbar.c (statusbar_handle_WMDRAWITEM): Added
	a cast to fix a warning.

	* arch/win32/uilib.c (tape_hook_proc, hook_proc): Check if
	selection is file or directory and only update the preview box
	when it's a file. If the current folder has been changed clear
	the file selection field.

	* arch/win32/vic20.dsp: Added vic20-cmdline-options.c,
	vic20-resources.c to project file.

	* resid/filter.cc (writeRES_FILT, writeMODE_VOL): Fixed
	boolean casting warning.

	* resid/wave.cc (writeCONTROL_REG): Fixed boolean casting
	warnings.

2001-05-13  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/ui.c, arch/riscos/uiconfig.{c,h},
	sounddrv/soundacorn.c: added support for 16bit sound hardware.

2001-05-13  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.26.

	* reu.c, reu.h: Rewritten to support different REU sizes and
	REU images.

	* c64/c64-resources.c, c128/c128-resources.c: Moved REU
	specific resources to `reu.c'.

	* c64/c64-cmdline-options.c, c128/c128-cmdline-options.c:
	Moved REU specific command line options to `reu.c'.

	* c64/Makefile.am: Added `c64cart.h', `c64cartridge.c' and
	`c64cartmem.c' to C128 library.

	* c64/c64.c, c128/c128.c (machine_specific_reset): Reset REU.
	(machine_shutdown): Call `reu_shutdown()'.

	* arch/unix/c64ui.c, arch/unix/c128ui.c: Added new REU menu
	entries.

	* c128/c128mem.c: Removed cartridge stubs.

	* c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	cbm2/c610.c, serial.c, arch/unix/rs232.c, datasette.c,
	drive/drive.c: Unconditionally open log.

	* utils.c (util_string_set): Skip copy if src and dest are
	already the same.

	* fsdevice.c, print.c, drive/drive-resources.c,
	c64/c64-resources.c, c128/c128-resources.c, c128/z80mem.c,
	c128/functionrom.c, vic20/vic20-resources.c,
	pet/pet-resources.c, cbm2/c610-resources.c, arch/unix/kmap.c,
	arch/unix/petkmap.c, arch/unix/rs232.c, arch/riscos/rs232.c,
	arch/riscos/ui.c, arch/os2/rs232.c, arch/os2/kbd/kmap-pet.c,
	arch/os2/kbd/kmap.c: `util_string_set()' now checks if both
	strings are the same.

2001-05-12  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.25.

	* drive/cia1581d.c (read_ciapb): Added support for read only
	status bit.

	* drive/wd1770.c, drive/wd1770.h: Added support for read only
	status bit.

	* c128/c128memlimit.c: Added c64 mode address limits.

	* traps.c, traps.h c64/c64.c, c128/c128.c, vic20/vic20.c,
	pet/petmem.c: Added support for multiple ROM sets.

	* traps.c, fsdevice.c, c1541.c, c64/c64cartridge.c,
	vic20/vic20cartridge.c: Do not include <memory.h>.

	* c128/c128mem.c, c128/c128mem.h (basic64_read, basic64_store,
	kernal64_read, kernal64_store, chargen64_read,
	chargen64_store, rom64_read, rom64_store): New functions.

	* c64/c64-cmdline-options.c, c64/c64-cmdline-options.h,
	c128/c128-cmdline-options.c, c128/c128-cmdline-options.h,
	vic20/vic20-cmdline-options.c, vic20/vic20-cmdline-options.h,
	pet/pet-cmdline-options.c, pet/pet-cmdline-options.h,
	cbm2/c610-cmdline-options.c, cbm2/c610-cmdline-options.h,
	c64/c64memlimit.c, c64memlimit.h: New files.

	* c64/c64mem.c, c128/c128mem.c, vic20/vic20mem.c.
	pet/petmem.c, cbm2/c610mem.c: Moved command line options code
	to separate files.

	* c64/c64mem.c (mem_initialize_memory): Separated memory
	limits code.

        * c64/Makefile.am, c128/Makefile.am, vic20/Makefile.am,
        pet/Makefile.am, cbm2/Makefile.am: Added new files.

	* drive/fdc.c: #include <stdio.h>.

	* pet/pets.h, pet/petmem.c, pet/petmem.h: Renamed PET structs.

2001-05-10  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.24.

	* c128/z80.c: Rewritten interrupt handling.

	* c128/c128memlimit.c, c128/c128memlimit.h: New files.

	* c128/Makefile.am: Added new files.

	* c128/c128mem.c (mem_initialize_memory): Added support for
	C64 mode memory configuration.
	(basic64_read, chargen64_read, kernal64_read): New functions.
	(pla_config_changed): Update MMU configuration.

	* c128/c128mmu.c, c128/c128mmu.h (mmu_update_config,
	mmu_set_config64): New functions.
	(mmu_store): Call `mmu_update_config()'.

2001-05-07  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.23.

	* c64/c64-resources.c, c64/c64-resources.h,
	c128/c128-resources.c, c128/c128-resources.h,
	vic20/vic20-resources.c, vic20/vic20-resources.h,
	pet/pet-resources.c, pet/pet-resources.h,
	cbm2/c610-resources.c, cbm2/c610-resources.h: New files.

	* c64/Makefile.am, c128/Makefile.am, vic20/Makefile.am,
	pet/Makefile.am, cbm2/Makefile.am: Added new files.

	* c64/c64mem.c, c128/c128mem.c, vic20/vic20mem.c.
	pet/petmem.c, cbm2/c610mem.c: Moved resource code to separate
	files.

	* c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	cbm2/c610.c (machine_init_resources): Init machine resources.

	* c128/c128mem.c (mem_load_kernal64, mem_load_basic64,
	mem_load_chargen64): New functions.

	* c128/c128mem.h: Added ROM image sizes.

2001-05-06  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.22.

	* arch/unix/c128ui.c (set_function_rom_name): Use file
	selector.

	* c128/functionrom.c (functionrom_load_internal,
	functionrom_load_external): Fixed typo.

	* c128/c128mmu.c (mmu_store): More debugging output.

	* attach.c (set_attach_device_readonly): Reattach disk if
	necessary.

	* arch/unix/uisettings: Added support for read only switch.

	* serial.c, serial.h (serial_get_device, serial_detach_device):
	Use unsigned int.

	* prdevice.c, prdevice.h (prdevice_detach,
	prdevice_close_printer): Use unsigned int.

	* maincpu.c, drive/drivecpu.c : #include "mon_disassemble.h".

	* tape.c, tape.h (tape_get_file_name): Return const pointer.

	* attach.c, attach.h (file_system_get_disk_name): Return const
	pointer.

	* arch/msdos/menudefs.c (attach_tape_callback,
	detach_tape_callback, detach_disk_callback): Use const pointer.

	* arch/msdos/uiattach.c (attach_disk_callback): Use const
	pointer.

	* arch/os2/dialogs/dlg-drive.c (pm_drive): Use const pointer.

	* c128/c128iec.c: Do not include "resources.h".

	* c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	cbm2/c610.c (vsync_hook): Renamed to `machine_vsync_hook'.

2001-05-05  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/console.c: corrected a bug preventing full update
	of window (giving black lines at the bottom when resizing)

	* arch/win32/console.c: changed Alt+PrtScr Hotkey to Ctrl+L
	(thus, Alt+PrtScr can be used again for putting active window
	to clipboard)

	* arch/win32/uimon.c: removed debugging outputs

2001-05-04  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/c64ui.cc,ui.cc,ui_file.cc,vic20ui.cc: Changed type
	BFilePanel to ViceFilePanel

	* arch/beos/kbd.c (kbd_handle_keydown): Activated CAPS support

	* arch/beos/constants.h: new message id MESSAGE_ATTACH_READONLY

	* arch/beos/ui.cc (ui_dispatch_events): handles readonly
	checkbox

	* arch/beos/ui_file.cc: new includes resources.h,CheckBox.h
	(ViceFilePanel) creates checkbox for read only mode.
	(ui_select_file) activates checkbox in disk attach mode.

	* arch/win32/res.h: new control id IDC_TOGGLE_ATTACH_ONLY

	* arch/win32/res.rc: new checkbox in the device settings dialog

	* arch/win32/uiattach.c (enable_controls_for_disk_device_type)
	enables or disables the new checkbox
	(init_dialog) reads readonly resource and (un)sets the checkbox
	(dialog_proc) handles the checkbox message by toggling the
	resource

2001-05-03  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.21.

	* raster/raster-cache.h
	(raster_cache_data_fill_attr_text_const): New function.

	* vdc/vdc-draw.c (get_std_text): Added register 26 support.

	* c128/c128mem.c (mem_toggle_caps_key): New function.
	(pla_config_changed): Use `caps_sense'.

	* arch/unix/x11/kbd.c (kbd_register_caps_key): New function.
	(kbd_parse_entry): Check for CAPS key.

	* keyboard.h, arch/unix/x11/kbdef.h: Added prototypes.

	* arch/unix/x11/xaw/x11kbd.c, arch/unix/x11/gnome/gnomekbd.c,
	arch/unix/x11/fullscreenkbd.c: Added CAPS key support.

	* arch/win32/kbd.c (kbd_register_caps_key): New function.
	(kbd_handle_keydown): Added CAPS key support.

	* arch/msdos/kbd.c (kbd_register_caps_key): New function.
	(my_kbd_interrupt_handler): Added CAPS key support.

	* arch/riscos/kbd.c (kbd_register_caps_key): New function.

	* arch/os2/kbd/proc.c (kbd_register_caps_key): New function.
	(kbd_proc): Added stubs for CAPS key support.

	* arch/beos/kbd.c (kbd_register_caps_key): New function.
	(kbd_handle_keydown): Added stubs for CAPS key support.

2001-05-02  Andreas Matthies  <andreas.matthies@gmx.net>

	* vic20/vic-mem.c (vic_store): vic.text_lines is latched after
	cycle 2 of rasterline 0, not after cycle 1

2001-05-01  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.20.

	* c128/functionrom.c, c128/functionrom.h: New files.

	* c128/Makefile.am, arch/win32/c128.dsp: Added new files.

	* c128/c128mem.c (mem_initialize_memory): Rewritten to support
	internal and external function ROM images.

	* c128/c128mmu.c (mmu_store, mmu_ffxx_read): Fixed to support
	function ROM images.

	* c128/c128.c (machine_init_resources,
	machine_init_cmdline_options): Initialize function ROM image
	support resources and command line options.

	* diskimage.c, sysfile.c, utils.c, utils.h,
	c64/c64cartridge.c, c128/functionrom.c (file_length): Renamed
	to `util_file_length'.

	* utils.c, utils.h, c64/reu.c (load_file, save_file): Renamed
	to `util_load_file' and `util_save_file'.

	* sysfile.c, utils.c, utils.h (subst): Renamed to
	`util_subst'.

	* c1541.c, imagecontents.c, utils.c, utils.h (bufcat): Renamed
	to `util_bufcat'.

2001-05-01  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/monitor.dsp: added mon_assemble.c and 
	mon_disassemble.c.

	* arch/win32/console.c: added support to mark a region with
	the mouse (left-click and right-click have different functions!)
	and copy it to the clipboard (with CTRL+C)

2001-04-27  Andreas Matthies  <andreas.matthies@gmx.net>

	* vic20/vic-draw.c: use vic.raster.ycounter modulo
	vic.char_height for correct display when switching height from
	16 to 8

	* vic20/vic-mem.c (vic_store): use raster_change api for
	vic.char_height

	* vic20/vic.c (vic_raster_draw_alarm_handler) completely
	rewritten to handle memptr offset and row counter more exact

2001-04-26  Andreas Matthies  <andreas.matthies@gmx.net>

	* vic20/vic.c new function (clk_overflow_callback) to reset
	vic.last_emulate_line_clk at overflow
	(vic_init) initializes this new overflow handler
	(vic_raster_draw_alarm_handler): removed obsolete alarm_set

2001-04-25  Andreas Matthies  <andreas.matthies@gmx.net>

	* vic20/vic-mem.c (vic_store): vic.raster.display_ystop has
	to be recalculated immediately when $9001 changes

2001-04-22  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.19.

	* arch/msdos/uisnapshot.c, palette.c: Use util_add_extension.

	* utils.h, utils.c, arch/unix/x11/xaw/uiedisk.c,
	arch/unix/x11/xaw/uisnapshot.c, arch/win32/uiconsole.c,
	arch/win32/uisnapshot.c (xadd_extension): Renamed to
	`util_add_extension'.

	* autostart.c, utils.c, utils.h, arch/unix/c64ui.c,
	arch/unix/uicommands.c, arch/unix/uisettings.c,
	arch/unix/vic20ui.c, arch/unix/x11/gnome/ui.c,
	arch/unix/x11/xaw/ui.c, arch/unix/x11/xaw/widgets/FileSel.c,
	arch/win32/archdep.c, arch/msdos/archdep.c,
	arch/msdos/c64ui.c, arch/msdos/menudefs.c,
	arch/msdos/uiattach.c, arch/msdos/vic20ui.c,
	arch/beos/archdep.c, arch/beos/ui.cc (fname_split): Renamed to
	`util_fname_split).
	
	* utils.c, utils.h, arch/msdos/menudefs.c,
	arch/msdos/uiattach.c, arch/msdos/uisnapshot.c (remove_spaces):
	Renamed to `util_remove_spaces'.

	* fsdevice.c, resources.c, snapshot.c, utils.c, zfile.c,
	utils.h, c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	cbm2/c610.c (remove_file): Renamed to `util_remove_file'.

	* sysfile.c, utils.c, utils.h, arch/unix/archdep.c,
	arch/unix/x11/gnome/ui.c, arch/unix/x11/xaw/ui.c,
	arch/msdos/tuifs.c, arch/os2/archdep.c (get_current_dir):
	Renamed to `util_get_current_dir'.

	* utils.c, utils.h (make_backup_file): Removed.

2001-04-20  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/c64ui.cc, arch/beos/ui.cc, arch/beos/ui_cbm2.cc,
	arch/beos/ui_datasette.cc, arch/beos/ui_device.cc,
	arch/beos/ui_drive.cc, arch/beos/ui_joystick.cc,
	arch/beos/ui_pet.cc, arch/beos/ui_sound.cc,
	arch/beos/ui_vic20.cc, arch/beos/ui_vicii.cc
	(suspend_speed_eval): renamed to vsync_suspend_speed_eval

2001-04-19  Markus Brenner  <markus@brenner.de>

	* c64/reu.c: fixed REC register 0 to read only in reu_store()

2001-04-18  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/ui.c, arch/riscos/uiimage.c,
	arch/riscos/video.c, arch/riscos/vsidui.c: added lots of
	missing calls to vsync_suspend_speed_eval()

	* arch/riscos/vsyncarch.h, arch/riscos/vsync.c: implemented
	vsync_suspend_speed_eval(); new function vsync_resync_poll().

	* arch/riscos/uimsgwin.c: improved log window opening and
	updating code.

2001-04-16  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.18.

	* machine.h, arch/unix/x11/fullscreen.c, c64/c64.c,
	c128/c128.c, vic20/vic20.c, pet/pet.c, cbm2/c610.c
	(video_refresh): Renamed to `machine_video_refresh()'.

	* sysfile.c, maincpu.c: Removed `vsync.h' include.

	* arch/unix/archdep.c, arch/msdos/archdep.c,
	arch/win32/archdep.c, arch/beos/archdep.c, arch/win32/ui.c,
	arch/win32/uilib.c: Use `mxvsprinf'.

	* snapshot.c, sound.c, vsync.c, maincpu.c, vsync.h,
	monitor/mon.c, c64/psid.c, pet/petmem.c, cbm2/c610mem.c,
	arch/unix/c128ui.c, arch/unix/c610ui.c, arch/unix/c64ui.c,
	arch/unix/petui.c, arch/unix/uicommands.c,
	arch/unix/uisettings.c, arch/unix/vic20ui.c,
	arch/unix/vsidui.c, arch/unix/x11/gnome/ui.c,
	arch/unix/x11/xaw/ui.c, arch/unix/x11/xaw/uimenu.c,
	arch/unix/x11/xaw/about.c, arch/win32/c128ui.c,
	arch/win32/c64ui.c, arch/win32/ui.c, arch/win32/uilib.c,
	arch/win32/uisnapshot.c, arch/msdos/kbd.c, arch/msdos/ui.c,
	arch/msdos/vsync.c, arch/riscos/vsync.c,
	arch/os2/unused/vsync.c, arch/os2/unused/vsync.h,
	arch/os2/vsyncarch.c, arch/os2/dialogs/dlg-emulator.c,
	arch/os2/dialogs/dlg-reset.c (suspend_speed_eval): Renamed to
	`vsync_suspend_speed_eval'.

	* vsync.c, vsync.h, vsyncapi.h, vicii/vicii.c, crtc/crtc.c,
	vic20/vic.c, arch/msdos/vsync.c, arch/riscos/vsync.c,
	arch/os2/unused/vsync.c, arch/os2/unused/vsync.h (do_vsync):
	Renamed to `vsync_do_vsync'.

	* arch/win32/c64ui.c, arch/win32/c128ui.c: Include `vsync.h'.

	* arch/unix/uicommands.c: Use `resources_set_sprintf'.

	* machine.c, machine.h (machine_reset): New function.

	* c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	cbm2/c610.c (machine_reset): Renamed to
	`machine_specific_reset'

	* machine.c, mem.h, c64/c64mem.c, c128/c128mem.c,
	vic20/vic20mem.c, pet/pet.c, pet/petmem.c, cbm2/c610mem.c
	(initialize_memory): Renamed to `mem_initialize_memory'.

	* sounddrv/soundwav.c (wav_write): Fixed unused variable.

2001-04-15  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/ui.cc: Updated the "About"-box.

	* info.c: Updated contributions and contributors.

	* Changed every occurence of old email address to
	andreas.matthies@gmx.net

2001-04-14  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/archdep.{c,h}: added functions archdep_closedown
	and archdep_get_default_log_file(). The default logfile is now
	a temporary file.

	* arch/riscos/ui.c: rearranged main menu, added log window
	entry.

	* arch/riscos/uimsgwin.{c,h}: added log window for the default
	log file.

2001-04-13  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.17.

	* tpicore.c (mytpi_reset): Clear TPI register (fixed typo).

	* sound.c (initsid): Converted C++ style comment.

	* vdrive/vdrive-iec.c (vdrive_iec_attach): Use name passed by
	caller.

	* vdrive/vdrive-bam.c (vdrive_bam_set, vdrive_bam_clr,
	vdrive_bam_isset): Removed `type'.

	* utils.c, utils.h, arch/unix/x11/gnome/ui.c, diskimage.c,
	arch/msdos/tuiview.c, arch/win32/uilib.c, screendrv/bmp.c,
	arch/msdos/uisnapshot.c, arch/os2/dialogs/dlg-fileio.c,
	palette.c, c1541.c, fsdevice.c, log.c, print.c, sound.c,
	sysfile.c, drive/drive-resources.c, vicii/vicii-resources.c,
	vdc/vdc-resources.c, crtc/crtc-resources.c, c64/c64mem.c,
	c64/c64cartridge.c, c128/c128mem.c, c128/z80mem.c,
	vic20/vic-resources.c, vic20/vic20cartridge.c,
	vic20/vic20mem.c, pet/pet.c, pet/petmem.c, cbm2/c610mem.c,
	arch/unix/kmap.c, arch/unix/petkmap.c, arch/unix/rs232.c,
	arch/win32/ui.c, arch/riscos/kbd.c, arch/riscos/rs232.c,
	arch/riscos/ui.c, arch/riscos/video.c, arch/os2/kbd.c,
	arch/os2/rs232.c, arch/os2/kbd/kmap-pet.c, resources.c,
	arch/os2/kbd/kmap.c, arch/os2/kbd/parse.c (string_to_long,
        string_set, dword_to_le_buf, file_exists_p, find_prev_line,
        find_next_line, get_line): Renamed to util_*().

2001-04-13  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/msods/sidui.c: new function
	toggle_ResidSampling_callback to change resid sampling
	method; new menuitem in sound menu

	* arch/win32/c128ui.c,c64ui.c: handle users choice of
	resid sampling method

	* arch/win32/res.h: new IDM's for different resid samplings

	* arch/win32/resc128.rc,resc64.rc: new popup menu for the
	resid sampling method

2001-04-12  Dag Lem  <resid@nimrod.no>

	* sound.c (initsid): Call suspend_speed_eval to handle delay.

2001-04-11  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/ui.c: removed references to UI_JAM_DEBUG.

2001-04-08  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/dialogs/dialogs.rc: updated About window
  
	* arch/os2/dialogs/dlg-monitor.c,
	arch/os2/dialogs/dlg-monitor.h,
	arch/os2/dialogs/dlg-monitor.rc: added memory window
   
	* arch/os2/dialogs/menubar.c, arch/os2/dialogs/menubar.h,
	arch/os2/dialogs/menubar.rc:
	added some sound options (sync, device)
   
	* arch/os2/snippets/pmwin2.c, arch/os2/snippets/pmwin2.h:
	small changes
   
	* arch/os2/uimon.c: renamed console_log (global variable) to
	console (local)
   
	* arch/os2/vsidui.c: Set sound device to "dart2" disabled
   
	* sound.c: changed some sound_close() to sound_state_changed,
	removed a small bug with setting warp mode while switching
	devices 'online'
   
	* sounddrv/sounddart.c: removed dart2, worked a bit on
	bufferspace to do the right thing

2001-04-08  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.16.

	* vicii/vicii-snapshot.c (vic_ii_snapshot_read_module): Call
	`interrupt_set_irq_noclk' instead of
	`interrupt_set_int_noclk'.

	* c64/c64mem.c (initialize_memory): Fixed typo.

	* vicii/viciitypes.h, vicii/vicii.c: Made some functions
	static.

	* c64/c64cia1.c, c64/c64cia2.c, c128/c128cia1.c,
	cbm2/c610cia1.c, drive/cia1571d.c, drive/cia1581d.c: Fixed
	includes.

	* autostart.c (autostart_disk_cook_name): New function.

	* monitor/mon.c, monitor/mon.h, monitor/asm.h,
	monitor/asmz80.c, monitor/mon_parse.y, monitor/mon_lex.l:
	Added some Z80 specific opcodes.

	* monitor/mon_util.c, 6510core.c: Adapted call to
	`mon_disassemble_to_string_ex'.

	* monitor/mon_assemble.c, monitor/mon_assemble.h,
	monitor/mon_disassemble.c, monitor/mon_disassemble.h: New
	files.

	* monitor/Makefile.am: Added new files.

	* monitor/mon.c, monitor/mon.h: Moved assemble and disassemble
	functions into separate files.

	* monitor/mon_parse.y, arch/os2/dialogs/dlg-monitor.c,
        monitor/mon_util.c: Added new monitor includes.

	* arch/win32/uimon.c (LoadMonitorDimensions): Fixed cast.
	(OpenFromWindowDimensions): Initialize `hwndOpened'.

2001-04-08  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/uimon.c: removed some warnings.

	* arch/win32/{xpet,xvic,x64,x128,cbm2}.dsp: added
	machine.c to files to compile.

2001-04-07  Dag Lem  <resid@nimrod.no>

	* sound.c (initsid): Initial filling of sound buffer.
	(sound_flush): Empty buffer is defined as 'used <=
	snddata.fragsize'.
	Always fill buffer entirely on underflow, not half full.

2001-04-07  Dag Lem  <resid@nimrod.no>

	* sound.c (sound_flush): Leave one fragment free at initial
	filling of sound buffer.

	* vsync.c (do_vsync): Added missing code from earlier merge.

2001-04-06  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.15.

	* machine.c: New file.

	* Makefile.am: Added `machine.c'.

	* maincpu.c, drive/drivecpu.c: Call `machine_jam' instead of
	`ui_jam_dialog'.

	* uiapi.h, arch/win32/ui.c: Removed references to
	`UI_JAM_DEBUG'.

	* aciacore.c: Alarm callback now returns void.

	* uimon.h, arch/unix/uimon.c, arch/msdos/uimon.c,
	arch/win32/uimon.c, arch/riscos/uimon.c, arch/os2/uimon.c,
	arch/beos/uimon.c: Removed unnecessary includes from
	`uimon.h'.

	* c128/z80.c: Removed 6502 include.

	* interrupt.c, interrupt.h: Moved some functions to main file.

	* c64/c64cia1.c, c64/c64cia2.c, c128/c128cia1.c,
	drive/cia1571d.c, drive/cia1581d.c, drive/riot2d.c,
	pet/petpia1.c, pet/petpia2.c, cbm2/c610tpi1.c, c64/c64acia1.c:
	Do not use generic interrupt set/unset routines as we have
	much faster ones.

	* sound.c (closesound, sound_flush): Added Dag's patch.

	* main.c: Fixed C++ style comment.

	* info.c, arch/win32/res.rc, arch/unix/x11/xaw/about.c,
	arch/unix/x11/gnome/about.c, arch/msdos/menudefs.c, main.c,
	c1541.c: Updated contributors.

2001-04-04  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.14.

	* uimon.h: Fixed `uimon_console_open_mdi' prototype.

	* maincpu.c, c128/c128cpu.c, cbm2/c610cpu.c: Removed some old
	debugging cruft.

	* ciacore.c, drive/ciad.h, drive/cia1571d.c, drive/cia1581d.c,
	drive/fdc.c, riotcore.c, drive/riotd.h, drive/riot1d.c,
	viacore.c, drive/viad.h, drive/via1d.c, drive/via2d.c,
	vicii/vicii.c, vicii/viciitypes.h, vdc/vdc.c, crtc/crtc.c,
	crtc/crtctypes.h, c64/c64cartridge.c, vic20/vic.c,
	vic20/vic.h, datasette.c, keyboard.c, rsuser.c, rsuser.h:
	Alarm callback now returns void.

2001-04-04  Frank König  <frank_koenig@t-online.de>

	* arch/win32/joystick.c: Implemetation of autofire feature.
	Lots of changes.

	* arch/win32/res.h, arch/win32/res.rc: Added dialog box items
	for joystick autofire feature.

	* arch/win32/uijoystick.c: Added UI elements for joystick
	autofire feature.

2001-04-04  Tibor Biczo  <crown@matavnet.hu>

	* alarm.h (alarm_callback_t): Define function as returnin void

	* arch/win32/fullscreen.c (fullscreen_getmode): Small fix for
	Matrox based videocards.

	* arch/win32/msvc/config.h: Disable certain MSVC warnings, so
	real warnings can be spotted and fixed.

	* arch/win32/uijoystick.c: Fixed a few things in the UI of
	the joystick autofire feature.
	Joystick swap now swaps direction definitions as well.

	* arch/win32/uisound.h: Include ui.h, fixes a warning.

	* arch/win32/video.c: Added commandline parameter for
	fullscreen mode.

	* c128/c12mem.c, c128/z80mem.c, drive/drivemem.c: Fixed an
	MSVC related warning.

	* cbm2/c610.c (c500_powerline_clk_alarm_handler): Changed
	return type of function from int to void. Function doesn't
	have return value.

	* raster/raster.c (raster_fill_sprite_cache): Removed an
	unused local variable called 'n'.

2001-04-03  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/vsyncarch.c: includes vsyncapi.h

	* sounddrv/soundbeos.cc: changed (beos_bufferspace) to
	fit with Dag's new implementation

2001-04-03  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/vsyncarch.c: Changed #include "vsyncarch.h"
	to #include "vsyncapi.h" w/o that, WIN32 (MSVC++) did not
	compile anymore.

	* monitor/mon.c: Removed ambiguity in is_valid_addr_range()
	in if()-statement regarding order of && and || evaluation.
	Found better solution for not being able to enter
	"d 8:c100 c200" in evaluate_address_range().

2001-04-02  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.13.

2001-03-31  Dag Lem  <resid@nimrod.no>

	* arch/beos/vsyncarch.c: Timer units exposed via
	vsyncarch_frequency().

	* arch/os2/vsyncarch.c: Likewise.

	* arch/unix/vsyncarch.c: Likewise.

	* arch/win32/vsyncarch.c: Likewise.

	* vsyncapi.h: Likewise.

	* vsync.c: Use vsyncarch_frequency() to calculate values in
	seconds.

	* arch/unix/coproc.c: Added missing include.

	* arch/unix/kmap.c: Likewise.

	* cbm2/c610mem.c: Removed unused variable j.

	* sound.c: Changed bufferstatus() to bufferspace().

	* sound.h: Likewise.

	* sounddrv/soundacorn.c: Converted bufferstatus() to
	bufferspace().

	* sounddrv/soundaix.c: Likewise.

	* sounddrv/soundallegro.c: Likewise.

	* sounddrv/soundarts.c: Likewise.

	* sounddrv/sounddx.c: Likewise.

	* sounddrv/sounddx.c: Likewise.

	* sounddrv/soundhpux.c: Likewise.

	* sounddrv/soundmidas.c: Likewise.

	* sounddrv/soundmmos2.c: Likewise.

	* sounddrv/soundsb.c: Likewise.

	* sounddrv/soundsdl.c: Likewise.

	* sounddrv/soundsgi.c: Likewise.

	* sounddrv/soundsun.c: Likewise.

	* sounddrv/sounduss.c: Likewise.

	* sounddrv/soundwmm.c: Likewise.

2001-03-31  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/beos/archdep.c, arch/msdos/archdep.c,
	arch/riscos/archdep.c, arch/unix/archdep.c,
	arch/win32/archdep.c, archapi.h:
	changed calling style of archdep_default_logger
   
	* arch/beos/uicmdline.c, arch/beos/uicmdline.h,
	arch/msdos/uicmdline.c, arch/msdos/uicmdline.h,
	arch/os2/uicmdline.c, arch/os2/uicmdline.h,
	arch/unix/uicmdline.c,  arch/riscos/uicmdline.c,
	arch/riscos/uicmdline.h, arch/unix/uicmdline.h,
	arch/win32/uicmdline.c, arch/win32/uicmdline.h,
	added an user parameter to ui_cmdline_show_help
   
	* arch/os2/archdep.c: added new stylish logging system
    
	* arch/os2/console.c, arch/os2/dialogs/dlg-monitor.c,
	arch/os2/uimon.c introduced new stylish monitor
   
	* arch/os2/dialogs/dlg-drive.c, arch/os2/dialogs/dlg-drive.h
	disable drive-type dialog
   
	* arch/os2/dialogs/dlg-monitor.h,
	arch/os2/dialogs/dlg-monitor.rc: added
   
	* arch/os2/dialogs/Makefile.am: new dlg-monitor.[c,h,rc]
   
	* arch/os2/dialogs/menubar.c, arch/os2/dialogs/menubar.h,
	arch/os2/dialogs/menubar.rc:
	added new resid resources, logwin, new stylish monitor
   
	* arch/os2/dialogs/dialogs.c, arch/os2/dialogs/dialogs.h,
	arch/os2/dialogs/dialogs.rc, arch/os2/dialogs/dlg-cmdopt.c,
	arch/os2/dialogs/dlg-create.c,
	arch/os2/dialogs/dlg-datasette.c,
	arch/os2/dialogs/dlg-datasette.rc,
	arch/os2/dialogs/dlg-drive.rc,
	arch/os2/dialogs/dlg-emulator.c,
	arch/os2/dialogs/dlg-emulator.rc,
	arch/os2/dialogs/dlg-fileio.c, arch/os2/dialogs/dlg-fileio.rc,
	arch/os2/dialogs/dlg-joystick.c,
	arch/os2/dialogs/dlg-joystick.rc, arch/os2/dialogs/dlg-vsid.c,
	arch/os2/dialogs/dlg-vsid.rc, arch/os2/joystick.c,
	arch/os2/kbd/proc.c:
	some small changes (pmwin2.h, minbutton, comments, ...)
   
	* arch/os2/makedist.cmd: added c128\ccs64s.vpl
   
	* arch/os2/snippets/pmwin2.[c,h]: some new functions
   
	* arch/os2/ui.c diff/src/arch/os2/ui.c:
	small changes, enhanced jam dialog
   
	* arch/os2/unused/contentsdlg.c,
	arch/os2/unused/contentsdlg.h, arch/os2/unused/dlg-contents.c:
	removed
   
	* arch/os2/vac++/incl/resources.icc: added dlg-monitor.rc
   
	* arch/os2/vac++/RESID.ICC: changed version number to 0.11
   
	* arch/os2/video.c diff/src/arch/os2/video.c:
	added logging resource
   
	* cmdline.c: changed the quotes. With the OS/2 default startup
	logger the old one looked really awful.
   
	* cmdline.h: added userparameter to cmdline_show_help
   
	* arch/os2/config.h, crtc/crtctypes.h, findpath.c, machine.h,
	sound.c, usleep.c, vic20/vic.h, vice.h, vicii/viciitypes.h
	changed OS2 to __OS2__

	* drive/drivemem.c: added DRIVE_TYPE_NONE to check function
 
	* emuid.c: added T.BRETZ
   
	* log.c: make archdep_default logger really work,
	added a mapping function which splits archdep_default logging
	into single lines
   
	* monitor/mon_util.h:
	monitor_interface_t cannot be extern AND static
   
	* sound.h: added vice.h
 
	* zfile.c: removed my own bugs
   
2001-03-29  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.12.

	* monitor/asm6502.c (asm6502_init): New function.

	* monitor/asmz80.c (asmz80_init): New function.

	* c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	cbm2/c610.c (*_monitor_init): New function.

	* monitor/mon.c (monitor_init, cpu_type): Use dynamic lists.
	(mon_disassemble_to_string_ex): Removed drive cpu type hack.

	* monitor/mon.h, monitor/asm.h: Reordered some defines.

	* c128/c128mem.c (mem_update_config): Change to watchpoint
	tables if necessary. (read_watch, store_watch): New functions.
	(initialize_memory): Initialize watchpoint tables.

2001-03-28  Dag Lem  <resid@nimrod.no>

	* Makefile.am: Changed vsyncarch.h to vsyncapi.h

	* arch/unix/vsyncarch.c: Likewise.

	* arch/unix/x11/fullscreen.c: Likewise.

	* arch/unix/vsync.c: Cleaned up after rejected patch hunk.
	(do_vsync): Sleep until start of frame, don't redraw too early
	as this would hinder smooth refresh on systems with very low
	latency.

2001-03-27  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/ui.{c,h}: moved all timer code to vsync.c,
	handle max frame skip resource

	* arch/riscos/vsync.c, arch/riscos/vsyncarch.h: moved all
	timer code here, added max frame skip resource

	* arch/riscos/uiconfig.{c,h}: added max frame skip resource.

	* sounddrv/soundacorn.c: changes to make to work with reSID
	again.

	vsyncarch.h: renamed to vsyncapi.h

2001-03-27  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* monitor/mon.c: Corrected the (incorrect) correction
	in is_valid_addr_range() from 2001-03-09; with the wrong
	correction, "m xxxx" gave a memory dump from xxxx to $FFFF.
	The "original" issue ("d 8:c100 c200" was not allowed) is
	now "fixed" be removing an assertion...

2001-03-25  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.11.

2001-03-24  Andre Fachat  <a.fachat@gmx.net>

	* drive/fdc.c (fdc_do_job): do not abort $d0 command (execute
	buffer) when no disk is present. Add handling for the "UJ"
	command - reset drive - where $d0 fdc cmd is used. Not sure
	how close 2040 emulation is to the original, though. The
	others work.
	
2001-03-24  Andre Fachat  <a.fachat@gmx.net>

	* arch/unix/x11/xaw/uiedisk.c (save_callback,
	build_emptydisk_dialog): fixup d67 support

	* drive/fdc.c (fdc_do_format_D20, fdc_do_format_D40,
	fdc_do_format_D80): new functions to handle formatting
	2040/[34]040/8x50 disks resp.
	(fdc_do_job): fix debug info, move formatting code to external 
	functions. Fix 2040 formatting

	* vdrive/vdrive-bam.c (vdrive_bam_create_empty_bam): fix
	creation of emtpy 2040 disk image

2001-03-18  Dag Lem  <resid@nimrod.no>

	* vsync.c (set_relative_speed): Call sound_set_relative_speed.
	Removed "too slow" warning for "no limit" speed.

	* arch/msdos/vsync.c (set_relative_speed): Call
	sound_set_relative_speed.

	* arch/riscos/ui.c (set_speed_limit): Likewise.

	* sound.c (initsid): Don't read speed from resource.
	(sound_flush): Accept changing relative_speed. Definition of
	empty buffer changed from "used <= fragsize" to "used <=
	fragsize*2" - empty buffer was not always detected on
	startup. Fill hardware buffer entirely for cycle_based sound
	and SOUND_ADJUST_EXACT. Tune VICE timer according to current
	buffer overflow, not according to the _largest_ buffer
	overflow during a one second period.
	(sound_set_relative_speed): New function.

	* sound.h (sound_set_relative_speed): New function.

2001-03-18  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.10.

2001-03-14  pottendo  <pottendo@utanet.at>

	* vsync.h,vsyncarc.h: Moved prototype to vsyncarch.h.

	* arch/unix/vsyncarch.c (all): Reintroduced hook patch for
	vsync.

	* arch/unix/x11/fullscreen.c: Include `vsyncarch.h'.

2001-03-14  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/ui.{c,h}: keep track of reSID choice, resync
	speed when changing speed settings, take care of
	sound_flush()'s frame delay.

	* arch/riscos/vsync.c: propagate frame delay to ui_poll,
	reordered calls, use different sound_flush() speed parameters
	for SID and reSID.

	* zfile.c: added archdep_file_set_gzip() to compression code.

2001-03-14  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.9.

2001-03-11  pottendo  <pottendo@utanet.at>

	* arch/unix/x11/ui-resources.c: Changed callback, when switching
	to fullscreen to `fullscreen_request_set_mode()', as it's bad to
	change to DGA within a (gnome-)callback function. Switching
 	to and from fullscreen now is handled synchronously at vsync
	level. 

	* arch/unix/x11/gnome/gnomekbd.c: Fixed warnings.

	* arch/unix/x11/fullscreen.c: Reworked to make it functional with
	DGA V2 including keyboard support.
	On startup (and not FS_DEBUG set) the program forks via
	`XF86DGAForkApp()'. This is useful as once vice crashs the
	window settings of the X11 server is restored
	automatically. 

	* arch/unix/x11/Makefile.am (EXTRA_libx11ui_a_SOURCES): Added
	fullscreenkbd.c. This file is temporary and will be straightened
	along with further fullscreen work.

	* arch/unix/vsync.c: Call ui event dispatcher via a hook
	function. 
	(vsync_set_event_dispatcher): New function.

	* vsync.h (vsync_set_event_dispatcher): Added prototype.

2001-03-10  Andreas Matthies  <andreas.matthies@gmx.net>

	* vic20/vic.c(vic_raster_draw_alarm_handler) display_xstop is
	checked not to exceed the screen width

2001-03-10  Dag Lem  <resid@nimrod.no>

	* arch/beos/Makefile.am: Removed vsync.c, added vsyncarch.c.

	* arch/unix/Makefile.am: Likewise.

	* arch/beos/vsync.c: Removed file, merged with generic
	vsync.c.

	* arch/unix/vsync.c: Likewise.

	* arch/beos/vsyncarch.c: New file.

	* arch/unix/vsyncarch.c: Likewise.

	* arch/os2/vsyncarch.c: Microseconds interface.

	* arch/win32/vsyncarch.c: Likewise.

	* vsync.c: Merged with Unix and BeOS vsync.c.

	* vsyncarch.h: Microseconds interface, removed
	vsyncarch_timescale.

	* arch/unix/x11/gnome/ui.c: Corrected macro pasting.

	* resid/: Another fix for a certain braindead compiler.

2001-03-09  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/console.c: Corrected a rounding error in
	external_resize_window(), resulting in "garbage" printed at
	the bottom or right side of the console under certain
	circumstances.

	* monitor/mon.c: Deleted (obsolete) maincpu_interface,
	drive8_interface, drive9_interface; corrected an error in
	is_valid_addr_range(), which didn't allow to specify i.e.
	"d 8:c100 c200";

	* monitor/mon.c: Corrected an error with respect to Z80: If
	cpu type was Z80, even a drive's disassembly was in that
	format. For this, changed mon_disassemble_to_string() and
	mon_disassemble_to_string_ex() to take the memspace as
	additional argument.

	* monitor/mon.c: Whenever the monitor is opened,
	uimon_notify_change() is called to notify the arch-dependant
	monitor interface.

	* uimon.h: added functions uimon_notify_change(), and
	uimon_get_in() as a helper function for uimon_in();

	* monitor/mon_util.c, mon_util.h: added.

	* monitor/mon.c: Changed playback_commands() as suggested by
	Michael Klein on 20.12.2000, so the symbol file "c64mem.sym"
	is found even if it is not in the actual directory.

	* monitor/mon.[ch]: Added mon_get_mem_val_ex() which allows to
	specify a different memory bank

	* */uimon.c: Added uimon_get_in(), uimon_notify_change()
	and uimon_set_interface() as dummy-functions...

	* */uimon.c: renamed all arch_mon_... to uimon_...()

2001-03-06  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/ui.{c,h}: changed some static declarations,
	extended help system

	* arch/riscos/uiconf.c: added new drive types to dos name
	menu.

	* arch/riscos/vsync.c: pass configured speed rather than
	actual speed to sound_flush()

	* sound.c: fixed missing definition of delta_t.

2001-03-04  Thomas Bretz  <tbretz@physik.tu-muenchen.de>
 
	* arch/os2/dialogs/dialogs.[h,rc]:
	small changes
   
	* arch/os2/dialogs/dlg-fileio.c: 
	added some missing features, solved some smaller problems
   
	* arch/os2/dialogs/dlg-fileio.rc:
	small changes
   
	* arch/os2/dialogs/menubar.[rc,h,c]:
	added some missing features
   
	* arch/os2/fonts/mps2chargen.cc:
	added 
   
	* arch/os2/fonts/mps2chargen.icc:
	added 
   
	* arch/os2/vac++/*.ICC:
	removed linksharedlib
   
	* arch/os2/vac++/Xcbm2.ICC:
	added vicii support
  
	* arch/os2/video.c:
	added hwndlist feature
   
	* cbm2/c610mem.[h,c]:
	added get_model
   
	* crtc/crtctypes.h diff/src/crtc/crtctypes.h

	* pet/petmem.[c,h]:
	added get_model
   
	* zfile.c diff/src/zfile.c:
	added zlib support for reading
 
2001-03-04  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.8.

2001-03-03  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/Makefile.am: vsidui.c changed to vsidui.cc

	* arch/beos/c128ui.cc: support for new resid sampling methods

	* arch/beos/c64ui.cc: support for new resid sampling methods,
	new function (c64_play_vsid), handles loading psid files and
	selecting tunes for vsid mode, some new includes

	* arch/beos/constants.h: new ids for resid sampling and vsid

	* arch/beos/ui.cc: don't handle keystrokes in vsid mode

	* arch/beos/ui.h: removed unused stuff

	* arch/beos/ui_file.cc: handles now loading of psid files

	* arch/beos/vicemenu.cc: checks for vsid_mode to show only
	the needed menus; new entries for resid sampling; new
	functions (vicemenu_free_tune_menu),(vicemenu_tune_menu_add)
	to build the vsid's tunes menu dynamically

	* arch/beos/vicewindow.cc(~ViceWindow): Checks for the vsid
	view and removes it

	* arch/beos/vsidui.cc: new file, mainly to display sid infos

	* resources.c(resources_save): small change to avoid empty
	lines growing at start of resource file

2001-03-03  Dag Lem  <resid@nimrod.no>

	* arch/unix/vsync.c (display_speed): Removed speed warning for
	warp mode.

	* resid/: Upgrade of not-yet-released reSID 0.11. VICE
	specific static const int workaround for a certain braindead
	compiler.

	* sound.c (initsid): Override "No limit" speed for cycle based
	sound engines.
	(sound_synthesize, sound_read, sound_store): Removed sound
	thread example cruft.

2001-03-02  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/ui.c: added new widgets for reSID 0.11 configs;
	renamed speed limit resource; extended interactive help;
	fixed old cartridge detach bug.

	* arch/riscos/uiconfig.{c,h}: added configs for reSID 0.11;
	renamed speed limit resource; added [2-4]040 drive types;
	added latest cartridges;

2001-02-28  Dag Lem  <resid@nimrod.no>

	* resid/sid.cc (SID::set_sampling_parameters): Corrected
	floating point error.

2001-02-28  Dag Lem  <resid@nimrod.no>

	* parallel.c, parallel.h: Removed superfluous macro pasting.

	* pet/petsound.c: Reverted previous change (2001-02-26).

	* vic20/vic20sound.c: Likewise.

	* sid/resid.cc, sid/resid.h: Likewise.

	* sid.c: Likewise.

	* sound.h: Likewise.

	* sound.c (sound_synthesize): Refined RISC OS audio thread
	syncronization.
	(sound_read, sound_store); Added RISC OS audio thread
	synchronization.

2001-02-27  Dag Lem  <resid@nimrod.no>

	* vic20/vic20sound.c (sound_machine_read,
	sound_machine_store): Added dummy parameter lastclk.

	* pet/petsound.c (sound_machine_read, sound_machine_store):
	Likewise.

	* sid/sid.h (sound_machine_read, sound_machine_store): Added
	parameter lastclk.

	* sid/sid.c (sound_machine_read, sound_machine_store):
	Likewise.

	* sid/resid.h (sound_machine_read, sound_machine_store):
	Likewise.

	* sid/resid.cc (sound_machine_read, sound_machine_store):
	Added RISC OS sound thread synchronization.

	* sound.c (sound_synthesize): Likewise.

2001-02-26  Dag Lem  <resid@nimrod.no>

	* arch/unix/c64ui.c: Added settings for reSID sampling.

	* pet/petsound.c, vic20/vic20sound.c
	(sound_machine_calculate_samples): Added dummy parameter
	delta_t.

	* resid/: Upgraded to reSID 0.11.

	* sid/resid.h, sid/resid.cc: Rewrote sound interface to be
	based instead of sample based. Added sampling method
	functionality from reSID 0.11.

	* sid/sid.c: Added settings for reSID sampling.
	(sid_reset): Corrected bug writing SID registers before
	calling sound_reset. This bug was causing clock overflows in
	sound.c.

	* sound.h, sound.c: Added special handling for cycle based
	sound engines (reSID).

2001-02-25  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/Makefile.am, arch/riscos/vsidarch.h: new file
	with VSID specific defines and prototypes.

	* arch/riscos/ui.h: moved VSID specific prototypes to
	vsidarch.h

	* arch/riscos/uiimage.c: close viewer when double clicking
	with right mouse button.

	* arch/riscos/vsidui.c: moved icon number defines to
	vsidarch.h; invert prev/next semantics when using the right
	mouse button.

	* arch/riscos/ui.c: added interactive help messages.

2001-02-24  Markus Brenner  <markus@brenner.de>

	* cartridge.h: added CARTRIDGE_ZAXXON define

	* c64/c64cartridge.c: additions for Zaxxon cartridge

	* c64/c64cartmem.c: additions for Zaxxon cartridge

2001-02-24  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.7.

	* autostart.c (disk_eof_callback): Set disk ID if true drive
	emulation is turned on.

	* drive/drive.c, drive/drive.h (drive_set_disk_id_memory): New
	function.

	* vdrive/vdrive.c (vdrive_attach_image, vdrive_detach_image):
	New functions.

	* diskimage.c (disk_image_check_log,
	disk_image_check_min_block): New functions.

	* drive/fdc.c (fdc_reset): Changed code causing "initializer
 	element for `disk[0]' is not computable at load time".

	* monitor/asm.h: Removed comma at end of enumeration.

	* c64/psid.c, vic20/vic-mem.c: Added missing casts.

	* arch/unix/c610ui.c: #include "c610.h".

	* arch/unix/uicommands.h: Removed prototype for
	`ui_screenshot_commands_menu'.

2001-02-23  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/uisound.c: includes ui.h

	* cbm2/c610mem.h: includes types.h

	* sounddrv/soundwmm.c: updated with latest changes of Lasse

	* vic20/vic-snapshot.c(vic_snapshot_read_module): fixed timing
	of next raster alarm

2001-02-18  Andre Fachat  <a.fachat@gmx.net>

	* arch/unix/uisettings.c (set_drive0_type_submenu): add 2040 to
	drive type selection menu

	* arch/unix/x11/xaw/uiedisk.c (disk_type_d67_button): new
	button for create empty disk dialog
	(extensions, save_callback): add support for d67 images
	(build_emptydisk_dialog): create new dialog

	* c1541.c (command_list): add d67 type for format cmd help
	(format_cmd): add d67 support

	* diskimage.c (IS_D67_LEN): new macro
	(disk_image_check_for_d67): new function
	(disk_image_open, disk_image_create): add d67 support
	(sector_map_d67): new sector map for D67
	(disk_image_sector_per_track, disk_image_check_sector,
	disk_image_read_sector, disk_image_write_sector): add d67
	support

	* diskimage.h (D67_FILE_SIZE, DISK_IMAGE_TYPE_D67): new defines

	* drive/drive.c (drive_read_image_d64_d71,
	drive_check_image_format, drive_attach_image,
	drive_detach_image): add d67 support

	* drive/fdc.c (fdc_do_job): some more verbose debugging
	remove drive type check, as this is done during attach already
	Fix FDC seek and bump commands
	(int_fdc): 2040 support
	(fdc_attach_image): add d67 support

	* drive/riot2d.c (set_handshake, store_pra): more comments
	
	* monitor/mon.c (mon_cmd_array): fix "watch" help text

	* parallel.c: more verbose logging (when debug is enabled)
	debug code cleanup

	* vdrive/vdrive-bam.c (vdrive_bam_allocate_chain, 
	vdrive_bam_calculate_track, vdrive_bam_sector_free,
	vdrive_bam_clear_all, vdrive_bam_create_empty_bam,
	vdrive_bam_read_bam, vdrive_bam_write_bam, 
	vdrive_bam_free_block_count): support d67 image

	* vdrive/vdrive-command.c (vdrive_command_memory_read): add
	d67 support

	* vdrive/vdrive-dir.c (vdrive_dir_free_chain, 
	vdrive_dir_find_next_slot): add d67 support

	* vdrive/vdrive.c (vdrive_calculate_disk_half,
	vdrive_get_max_sectors, vdrive_detach_image,
	vdrive_attach_image, vdrive_set_disk_geometry):
	add d67 support

	* vdrive/vdrive.h (VDRIVE_IMAGE_FORMAT_2040, NUM_TRACKS_2040,
	NUM_BLOCKS_2040, MAX_TRACKS_2040, MAX_BLOCKS_2040,
	DIR_TRACK_2040, DIR_SECTOR_2040, BAM_TRACK_2040,
	BAM_SECTOR_2040, BAM_NAME_2040, BAM_ID_2040,
	BAM_EXT_BIT_MAP_2040): new defines

2001-02-12  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* fliplist.c: changed "static const size_t buffer_size =
	1024;" to "#define buffer_size 1024", so MSVC++ won't complain
	about using buffer_size as size of an array.

	* arch/win32/uimon.c: improved how the current window settings
	are saved (using GetWindowPlacement() instead of
	GetWindowRect()).

2001-02-11  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.6.

	* arch/os2/vac++/Makefile.am: Fixed names.

	* arch/os2/Makefile.am: Removed files that do not exist.

	* uimon.h: Replaced `DWORD' by `unsigned long int'.

2001-02-08  Andreas Matthies  <andreas.matthies@gmx.net>

	* vic20/vic.c: (vic_update_memory_ptrs) fixed timing for
	change of memory pointers

2001-02-07  Andre Fachat  <a.fachat@gmx.net>

        * arch/unix/c610ui.c: include drive.h
        (set_video_standard_submenu, radio_PaletteFile, palette_submenu,
        toggle_CheckSsColl, toggle_CheckSbColl, vic_submenu): new
        code to set VIC-II settings
        (Cbm2modelMenu, model_settings_submenu): make model defaults
        submenu depend on whether the emulation is C500 or not.
        (CrtcMenu, VicMenu, c610_menu): make submenues for CRTC and VIC-II
        depend on whether the emulation is C500 or not.

        * cbm2/c610.c (cbm2_is_c500): export isC500 flag

        * cbm2/c610.h (C610_PAL_CYCLES_PER_SEC): slow CBM-II down about 1.3%,
        to fix handshake with 2031 disk drive
        (c500_write_snapshot_module, c500_read_snapshot_module): remove
        prototypes
        (cbm2_is_c500): new prototype

2001-02-06  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* fliplist.{c,h}: added clear/load/save functionality

	* arch/riscos/ui.c: added clear/load/save of fliplist

2001-02-04  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/archdep.c: small changes
   
	* arch/os2/archdep.h: Renamed default Printer to Vice2.prn
   
	* arch/os2/console.c: included pmwin2.h
   
	* arch/os2/dialogs/dialogs.c: added ViceErrorDlg
   
	* arch/os2/dialogs/dialogs.h: move many statements to dlg-*.h
   
	* arch/os2/dialogs/dialogs.rc: moved many statements to
	dlg-*.rc
   
	* arch/os2/dialogs/dlg-attach.c,
	arch/os2/dialogs/dlg-autostart.c,
	arch/os2/dialogs/dlg-cartridge.c: removed

	* arch/os2/dialogs/dlg-cmdopt.c: included os2.h
   
	* arch/os2/dialogs/dlg-contents.c: removed
   
	* arch/os2/dialogs/dlg-create.c,
	arch/os2/dialogs/dlg-datasette.c: small changes
   
	* arch/os2/dialogs/dlg-datasette.h,
	arch/os2/dialogs/dlg-datasette.rc: added
   
	* arch/os2/dialogs/dlg-drive.c: small changes
   
	* arch/os2/dialogs/dlg-drive.h, arch/os2/dialogs/dlg-drive.rc:
	added
   
	* arch/os2/dialogs/dlg-emulator.c: small changes

	* arch/os2/dialogs/dlg-emulator.h,
	arch/os2/dialogs/dlg-emulator.rc,
	arch/os2/dialogs/dlg-fileio.c, arch/os2/dialogs/dlg-fileio.h,
	arch/os2/dialogs/dlg-fileio.rc: added
   
	* arch/os2/dialogs/dlg-joystick.c: small changes
   
	* arch/os2/dialogs/dlg-joystick.h,
	arch/os2/dialogs/dlg-joystick.rc: added
   
	* arch/os2/dialogs/dlg-monitor.c: small chenages
   
	* arch/os2/dialogs/dlg-reset.c: WinMessageBox ->
	WinMessageBox2
   
	* arch/os2/dialogs/dlg-screenshot.c,
	arch/os2/dialogs/dlg-snapshot.c: removed
   
	* arch/os2/dialogs/dlg-vsid.c: small changes
   
	* arch/os2/dialogs/dlg-vsid.h, arch/os2/dialogs/dlg-vsid.rc,
	arch/os2/dialogs/dragndrop, carch/os2/dialogs/dragndrop.h:
	added
   
	* arch/os2/dialogs/Makefile.am: updated
   
	* arch/os2/dialogs/menubar.c: small changes
   
	* arch/os2/dialogs/menubar.h, arch/os2/dialogs/menubar.rc,
	arch/os2/fonts/bdf2fnt.icc, arch/os2/fonts/chargen2fnt.cc,
	arch/os2/fonts/chargen2fnt.icc: added
   
	* arch/os2/fonts/dbf2fnt.icc, arch/os2/fonts/vice-cbm.asm:
	removed
   
	* arch/os2/fonts/vice-cbm.cmd: changed
   
	* arch/os2/fonts/vice-cbm.def, arch/os2/fonts/vice-cbm.rc:
	removed
   
	* arch/os2/fonts/vice2.asm, arch/os2/fonts/vice2.def: added
   
	* arch/os2/fonts/vice2.fon, arch/os2/makedist.cmd: changed for
	all fonts
   
	* arch/os2/Makefile.am: changed
   
	* arch/os2/snippets/filedlg.c, arch/os2/snippets/filedlg.h:
	small changes
   
	* arch/os2/snippets/Makefile.am: changed
   
	* arch/os2/snippets/pmwin2.c, arch/os2/snippets/pmwin2.h:
	added
   
	* arch/os2/ui.c: small changes, replaces WinMessageBox with
	WinMessageBox2
   
	* arch/os2/uicmdline.c: small changes 
   
	* arch/os2/unused/dlg-contents.c: added
   
	* arch/os2/vac++/incl/archdep.icc,
	arch/os2/vac++/incl/dialogs.icc: updated
   
	* arch/os2/vac++/incl/resources.icc: added
   
	* arch/os2/vac++/incl/vsid.icc: added dlg-vsid.c,rc
   
	* arch/os2/vac++/Makefile.am: added vicedll.icc, resoucrces.icc
   
	* arch/os2/vac++/vicedll.icc: added

	* arch/os2/vac++/*.ICC: dll added, resources included
   
	* arch/os2/video.c: status bas added, dragndrop support added
   
	* arch/os2/videoarch.h: removed INCL_GPIBITMAPS
   
	* arch/os2/vsidui.c: small changes
   
	* print.c: "ab+" -> MODE_APPEND
   
	* vsync.c diff/src/vsync.c: made do_vsync more 'readable'
   
2001-02-04  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/console.c, arch/win32/uimon.c:
	Fixed some bugs, store latest dimensions on closing.

	* monitor/mon_parse.y, monitor/mon_parse.c:
	Changed console_out() calls to arch_mon_out() calls
	(these used to generate segmentation faults).

	* arch/win32/vice.dsw, arch/win32/cbm2.dsp:
	VC++ now includes the VICII project into cbm2.

2001-02-04  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/uisnapshot.c(ui_soundshot_save_dialog): bug fix;
	checks for devicename==NULL

	* arch/win32/uisound.c(dialog_proc): changes statustext when
	sounddriver is changed

	* vic20/vic-draw.c: PUT_PIXEL(2) handles a transparent mode to
	prevent foreground drawing change the background; draw(2x) uses
	vic.mc_border_color instead of vic.raster.border_color; new
	functions draw_std_background(_2x), draw_std_foreground(_2x),
	draw_rev_foreground(_2x) for (handle_line_with_changes), these
	are installed by vic_draw_init

	* vic20/vic-mem.c(vic_store): registers 0x00,0x01,0x02,0x03,
	0x0e,0x0f completely rewritten using the raster_add_change api;
	all the results of timing tests with real VIC20 are imlemented
	(some have to be validated)

	* vic20/vic.h: new macros VIC_RASTER_X, VIC_RASTER_CHAR; new
	members mc_border, row_increase_line, pending_ystart,
	pending_text_lines, row_counter, row_offset, area, draw_clk,
	last_emulate_line_clk in struct vic_s; new prototype for
	(vic_raster_draw_alarm_handler)

	* vic20/vic.c: (vic_raster_draw_alarm_handler) now public and
	completely rewritten; (vic_init),(vic_reset) initialize new
	struct members; (vic_update_memory_ptrs) use the
	raster_add_change api to make changes be placed correctly

2001-02-04  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.5.

	* palette.c: Own logging system.

	* sound.h: Added prototype for `sound_init_wmm_device'.

	* sounddrv/soundwmm.c: #include <ddraw.h>.
	Allow compiling with GCC 2.91 too.

	* cbm2/c610mem.c: Removed RISCOS specific filename hack.
	(set_use_vicii): Added return value.

2001-01-31  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/cbm2dummy.c: new stubs file for linking CBM2.

	* arch/riscos/petdummy.c: only used for PET now.

	* arch/riscos/uiconfig.c: added C510 options.

	* archapi.h, arch/*/archdep.c: added archdep_file_set_gzip()

	* zfile.c: use archdep_file_set_gzip() on newly compressed
	images.

	* cbm2/c610mem.c: added ROM names for RISC OS

2001-01-29  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/win32/res.h: new IDs IDC_SOUND_DIRECTX,IDC_SOUND_WMM

	* arch/win32/res.rc: sound settings dialog offers selection of
	sounddriver

	* arch/win32/sounddrv.dsp,sounddrv/Makefile.am: includes new
	project file soundwmm.c

	* arch/win32/uisnapshot.c(ui_soundshot_save_dialog): remembers
	sounddriver to return after wav sampling

	* arch/win32/uisound.c(init_sound_dialog,dialog_proc): handle
	radiobuttons to change sounddriver

	* sounddrv/soundwmm.c: new file by Lasse Öörni that implements
	the windows multimedia sounddriver

2001-01-28  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.4.

	* arch/unix/archdep.c: #include <ctype.h>.

	* c128/c128cpu.c: Removed `STORE_ZERO' macro.

2001-01-24  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/config.h: added HAVE_ZLIB

	* arch/riscos/archdep.c: adapted archdep_file_is_gzip() for
	file types and extension separator.

2001-01-20  Andre Fachat  <a.fachat@gmx.net>

	* cbm2/c610.c (machine_init): delay setting hw options

	* cbm2/c610mem.c (c500_videobank0): removed
	(c500_statvid, c500_vicdotsel, c500_set_phi2_bank,
	c500_set_phi1_bank): new code to handle C500 memory banking
	(cbm2_set_tpi2pc, cbm2_set_tpi1ca, cbm2_set_tpi1cb, mem_reset):
	fix to use new banking code
	(set_ramsize): allow 64k for C510
	(store_zero_tab, store_ram_tab, read_ram_tab, read_zero_tab):
	fix type
	(mem_bank_read): remove broken fix
	(mem_write_ram_snapshot_module, mem_read_ram_snapshot_module,
	mem_write_rom_snapshot_module, mem_read_rom_snapshot_module):
	handle C510 correctly

	* cbm2/c610mem.h (c500_set_phi1_bank, c500_set_phi2_bank): new 
	prototypes

	* crtc/crtc-snapshot.c (crtc_write_snapshot_module,
	crtc_read_snapshot_module): fix revswitch handling-

	* vicii/vicii-mem.c (vic_ii_local_store_vbank, 
	check_bad_line_state_change_for_d011): use memory parameters
	for correct clock phase

	* vicii/vicii-snapshot.c (vic_ii_snapshot_read_module,
	vic_ii_snapshot_write_module): fix module to include mem
	parameter for both clock phases.

	* vicii/vicii.c (vic_ii_vmmask, vic_ii_chargen_addr_mask,
	vic_ii_chargen_addr, vic_ii_set_hw_addr_options): removed
	(vic_ii_set_phi1_addr_options, vic_ii_set_phi2_addr_options,
	vic_ii_set_phi1_chargen_addr_options,
	vic_ii_set_phi2_chargen_addr_options): new functions
	(vic_ii_update_memory_pointers): use memory parameters for the
	correct clock phase.
	(vic_ii_powerup): init new fields in vic_ii_t with C64 default
	values
	(void vic_ii_set_vbanks, vic_ii_set_vbank,
	vic_ii_set_phi1_vbank, vic_ii_set_phi2_vbank,
	vic_ii_set_ram_bases, vic_ii_set_ram_base, 
	vic_ii_set_phi1_ram_base, vic_ii_set_phi2_ram_base): new
	functions
	(handle_fetch_sprite): use memory parameter for the correct
	clock phase

	* vicii/vicii.h (vic_ii_set_phi1_addr_options, 
	vic_ii_set_phi2_addr_options,
	vic_ii_set_phi1_chargen_addr_options,
	vic_ii_set_phi2_chargen_addr_options,
	vic_ii_set_phi1_vbank, vic_ii_set_phi2_vbank,
	vic_ii_set_phi1_ram_base, vic_ii_set_phi2_ram_base): new
	prototypes

	* vicii/viciitypes.h (ram_base, vbank, vbank_ptr): removed
	(ram_base_phi1, ram_base_phi2, vaddr_mask_phi1, vaddr_mask_phi2,
	vaddr_offset_phi1, vaddr_offset_phi2, vaddr_chargen_mask_phi1,
	vaddr_chargen_mask_phi2, vaddr_chargen_value_phi1,
	vaddr_chargen_value_phi2, vbank_phi1, vbank_phi2): new elements

2001-01-20  Andre Fachat  <a.fachat@gmx.net>

	* arch/unix/c610ui.c (palette_submenu): renamed to
	crtc_palette_submenu
	(c610_ui_init): add vic-ii (ui_video_settings_menu) settings

	* arch/unix/uisettings.c (ui_video_settings_menu): rename 
	"Video Settings" to "VIC-II settings"
	(ui_vic_video_settings_menu): new entry, contains the same
	submenu but is named "VIC Video settings"

	* arch/unix/uisettings.h (ui_vic_video_settings_menu): new
	prototype

	* arch/unix/vic20ui.c (vic20_ui_init): use
	ui_vic_video_settings_menu instead of ui_video_settings

	* arch/unix/x11/fullscreen.c (video_setfullscreen): removed
	(set_fullscreen): remove use of video_setfullscreen

	* cbm2/Makefile.am: add vicii subdir to includes

	* cbm2/c610.c: add vicii.h
	(C500_POWERLINE_CYCLES_PER_IRQ): define cycles per interrupt
	generated by 50Hz power line frequency
	(cbm2_cycles_per_sec): new variable, replaces define
	(isC500): new main variable to determine whether C510 or
	C6x0/7x0
	(machine_init_resources, machine_init_cmdline_options): add
	VIC-II
	(c500_powerline_clk_alarm, c500_powerline_clk,  
	c500_powerline_clk_alarm_handler,  
	c500_powerline_clk_overflow_callback): new code to handle 50Hz
	line frequency IRQ
	(machine_init): init CRTC/VIC-II depending on isC500
	(machine_reset): reset CRTC/VIC-II depending on isC500
	Use mem_reset() instead of separate set_bank_*() calls
	(machine_shutdown): free crtc/VIC-II dependeing on isC500
	(machine_write_snapshot, machine_read_snapshot): handle VIC-II
	when appropriate. Use new module for extra c500 data when
	appropriate
	(machine_screenshot, machine_canvas_screenshot): handle VIC-II
	(c500_write_snapshot_module, c500_read_snapshot_module): new
	module to handle power frequency IRQ in C500

	* cbm2/c610.h (C500_PAL_CYCLES_PER_SEC,
	C500_PAL_CYCLES_PER_LINE, C500_PAL_SCREEN_LINES,
	C500_PAL_CYCLES_PER_RFSH): new defines

	* cbm2/c610mem.c: add vicii.h and vicii-mem.h
	(ultimax, romh_bank, romh_banks,
	cia1_set_extended_keyboard_rows_mask): needed by VIC-II
	(ram_size): removed, was not used
	(mem_read_limit_tab): add new table for third possible
	configuration
	(CBM2_CHARGEN500, CBM2_BASIC500, CBM2_KERNAL, CBM2_KERNAL500):
	new defines
	(c500_vbank, c500_videobank0, cbm2_set_tpi2pc, cbm2_set_tpi1ca, 
	cbm2_set_tpi1cb): new code to handle CBM-II video config
	depending on isC500
	(set_cbm2_model_line): handle C500
	(use_vicii, set_use_vicii): new resource whether to use VIC-II
	or not
	(set_cart08_ram, set_cart1_ram, set_cart2_ram, set_cart4_ram,
	set_cart6_ram, set_cartC_ram): re-init bank 15 only not all
	banks
	(resources): add UseVicII
	(cmdline_options): add +/-usevicii
	(modtab): add place for kernal ROM, usevicii, add C510 config
	(cbm2_set_model): set usevicii, kernal rom
	(set_bank_exec): fix a bug when using fast opcode fetch.
	(read_chargen): new function
	(store_io, read_io): handle VIC_II and colorram
	(mem_reset): new function. Resets video config on CPU reset
	(initialize_memory, initialize_memory_bank): split former
	to use new latter function. Add new level to mem_read_limit_tab
	to be used for empty banks.
	Add C510 memory configuration
	(mem_load_chargen): fix chargen generation bug. Handle VIC-II
	chargen
	(mem_load): handle VIC-II 
	(peek_bank_io): handle VIC-II
	(mem_bank_read): work around a gcc compiler bug.

	* cbm2/c610mem.h (mem_reset, cbm2_set_tpi1ca, cbm2_set_tpi1cb,
	cbm2_set_tpi2pc): new prototypes

	* cbm2/c610tpi1.c: include c610mem.h
	(tpi_set_ca, tpi_set_cb): use functions from c610mem.c

	* cbm2/c610tpi2.c: include c610mem.h
	(store_pc,  undump_pc): use functions from c610mem.c

	* crtc/crtc-resources.c (resources): rename default palette file
	to "green.vpl"

	* crtc/crtc.c (video_setfullscreen): removed
	* vic20/vic.c (video_setfullscreen): removed

	* vicii/vicii-mem.c (vic_ii_set_irq): redefinition of
	maincpu_set_irq bogus I know, will be removed again.

	* vicii/vicii.c (vic_ii_vmmask, vic_ii_chargen_addr_mask, 
	vic_ii_chargen_addr): address config parameter
	(vic_ii_set_hw_addr_options): set address config pars
	(vic_ii_update_memory_ptrs): use addr config pars
	(video_setfullscreen): removed

	* vicii/vicii.h (vic_ii_set_hw_addr_options): new prototype

2001-01-20  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.3.

	* arch/os2/Makefile.am: Added `fonts/header.FNT', removed
	`doc/vice2.ipf' as this file is missing.

	* arch/msdos/tuifs.c (file_list_find): Use `strncasecmp'.

	* arch/unix/c128ui.c: Added tape UI.

	* c128/z80mem.c (z80mem_initialize): Use new functions
	`z80_read_zero' and `z80_store_zero'.

	* c128/c128mem.c (pla_config_changed): New function.
	(mem_set_tape_sense): Call `pla_config_changed'.
	(initialize_memory): Initialize processor port.

2001-01-20  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/archdep.h: MODE_WRITE_TEXT now is really a text
	mode.

	* arch/win32/uiattach.c: 1. Fixed the following bug:
	if a disk image was selected in settings/device
	settings/drive x, no directory could be selected.
	2. If true drive emulation is enabled, don't allow to attach a
	directory.

	* arch/win32/ui.c, arch/win32/uimon.c: Added some func-
	tionality to the monitor window, fixed some bugs.

2001-01-20  Thomas Bretz  <tbretz@physik.tu-muenchen.de>
 
	* arch/os2/config.h: added HAVE_ZLIB
 
	* arch/os2/dialogs/dialogs.[h,c,rc]: removed sound dialog,
	hardware dialog, enhanced menubar, removed dialog open flags
   
	* arch/os2/dialogs/dlg-attach.c: uses new filedlg.h,
	changed includes
   
	* arch/os2/dialogs/dlg-autostart.c: added

	* arch/os2/dialogs/dlg-cartridge.c: added
 
	* arch/os2/dialogs/dlg-cmdopt.c: removed dlg open flag,

	* arch/os2/dialogs/dlg-contents.c: changed includes,
	WM_PAINT -> WM_INITDLG,  removed dlg open flag
   
	* arch/os2/dialogs/dlg-create.c:  changed includes,
	uses new filedlg.h, new outfit for dialog
   
	* arch/os2/dialogs/dlg-datasette.c: changed includes,
	WM_PAINT -> WM_INITDLG,  removed dlg open flag
   
	* arch/os2/dialogs/dlg-drive.c: changed includes,
	WM_PAINT -> WM_INITDLG,  removed dlg open flag

	* arch/os2/dialogs/dlg-emulator.c: changed includes,
	WM_PAINT -> WM_INITDLG,  removed dlg open flag, moved
	most of the statements to menubar
   
	* arch/os2/dialogs/dlg-hardware.c: removed
 
	* arch/os2/dialogs/dlg-joystick.c: removed dlg open flag

	* arch/os2/dialogs/dlg-monitor.c: removed dlg open flag

	* arch/os2/dialogs/dlg-reset.c: small changes
 
	* arch/os2/dialogs/dlg-screenshot.c: small changes, 
	changed includes
   
	* arch/os2/dialogs/dlg-snapshot.c: changed includes
 
	* arch/os2/dialogs/dlg-sound.c: removed
 
	* arch/os2/dialogs/dlg-vsid.c: removed sound_dialog
 
	* arch/os2/dialogs/menubar.c: many new features
 
	* arch/os2/fonts/bdf2fnt.cc: works again
 
	* arch/os2/fonts/vice-cbm.cmd: make work
 
	* arch/os2/install.cmd: small changes
 
	* arch/os2/kbd/proc.c: moved most thing to menubar

	* arch/os2/makedist.cmd: c64mem.sym added
 
	* arch/os2/snippets/filedlg.[c,h]: added
 
	* arch/os2/uicmdline.c: added check for open dialog
 
	* arch/os2/vac++/incl/*.icc: added/removed files
 
	* arch/os2/vac++/lpng.icc: optimized
 
	* arch/os2/vac++/lzlib.icc: optimized
 
	* arch/os2/video.c: added status bar, drag&drop feature,
	help system
 
	* autostart.c: changed a bug in cartridge autostart and
	snapshot autostart, added detach to prg-autostart
   
	* sound.h diff/src/sound.h: changed sample buffer size for
	os/2
 
2001-01-20  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.2.

	* arch/unix/x11/fullscreen.c: Only define `CHECK_DGA_V2' if
	DGA2 extensions are available.

	* zfile.c (try_uncompress_with_gzip): Added missing return.
	(compress_with_gzip): Use zlib if available.

	* archapi.h, arch/unix/archdep.c, arch/msdos/archdep.c,
	arch/win32/archdep.c, arch/riscos/archdep.c,
	arch/os2/archdep.c, arch/beos/archdep.c
	(archdep_file_is_gzip): New function.

2001-01-16  Andreas Matthies  <andreas.matthies@gmx.net>

	* raster/raster.c(update_canvas): checks width parameter
	before calling canvas_refresh; this is needed when viewport
	is smaller than the raster
	(update_for_minor_changes_without_sprites): fixed typo (x~y)
	(raster_resize_viewport): fixed viewport->last_line
	(raster_emulate_line): checks for end of frame even inside
	the display; VIC's last displayed line is (currently) the end
	of frame

	* vic20/vic-draw.c(draw,draw_2x): multicolor characters are
	never displayed reverse

	* vic/vic.c(init_raster): changed parameters of
	raster_set_geometry (these values work for standard vic
	settings and will be fixed later); raster_resize_value is
	called with new value VIC_DISPLAY_WIDTH

	* vic/vic.h: VIC_SCREEN_WIDTH changed, VIC_DISPLAY_WIDTH new

	* vicii/vicii.c(vicii_set_geometry): fixed height

2001-01-07  Oliver Schaertel  <schaertel@atrada.net>

	* arch/unix/x11/gnome/ui.c: Added fullscreen support.

2000-12-30  Oliver Schaertel  <schaertel@atrada.net>

	* arch/unix/fullscreen.c: Added support for DGA2. Fixed some
	DGA-problems.

2000-12-29  Oliver Schaertel  <schaertel@atrada.net>

	* arch/unix: Changed USE_VIDMODE_EXTENSION to
	USE_XF86_EXTENSIONS.

	* arch/unix/fullscreen.c: Implemented DGA fullscreen.

	* fullscreen.h: Added new functions
	fullscreen_mode_on_restore(), fullscreen_mode_off_restore().
	Removed function fullscreen_mode_name(int mode).
	
	* arch/unix/uicommands.c, arch/unix/x11/ui-ressources, 
	arch/unix/x11/ui-ressources.c: Fullscreen changes.	

	* arch/unix/xaw/ui.c: Fullscreen changes for mouse. 
	Disable fullscreen for dialogboxes.

	* crtc/crtc-resources.c, crtc-resources.h, crtc/crtc.c,
	crtc/crtc.h, vic20/vic-resources.c, vic20/vic-resources.h,
	vic20/vic.c, vic20/vic, vicii/vicii-resources.c,
	vicii/vicii-resources.h, vicii/vicii.c, vicii/vicii.h: Added
	fullscreen hooks again, introduced new function video_refresh.
	Removed video_setfullscreen.

2000-12-16  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.1.

	* zfile.c (compress): Renamed to `zfile_compress'.
	(try_uncompress_with_gzip): Use zlib.

2000-12-15  Andreas Matthies  <andreas.matthies@gmx.net>

	* 6510core.c(RLA_IND_Y): clear RMW_FLAG after execution

2000-12-11  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.6.

2000-12-11  Tibor Biczo  <crown@matavnet.hu>

	* arch/win32/fullscreen.c, arch/win32/video.c: Reverted
	DUMMYUNIONNAME patch, as the DirectX headers doesn't have a
	mixup problems of naming the first unnamed union differenly
	between different header versions...

2000-12-10  Tibor Biczo <crown@matavnet.hu>

	* arch/win32/console.c (bIsMdiChild): Define as BOOLEAN.

	* arch/win32/fullscreen.c: Added casts for IID_IDirectDraw2
	references.

	* arch/win32/fullscreen.h: Define SwitchToFullscreenMode
	function.

	* arch/win32/joystick.c: Reinstituted misteriously
	dissappeared code segment.

	* arch/win32/statusbar.c (statusbar_setstatustext): Define
	input parameter as const.

	* arch/win32/statusbar.h (statusbar_setstatustext): Define
	input parameter as const.

	* arch/win32/ui.c: Removed some unused local variables.

	* arch/win32/video.c: Removed some unused local variables.
	Corrected some return values in error cases.
	Added cast when referencing IID_IDirectDraw2.

	* sounddrv/sounddx.c: Setupo and use wfex variable instead of
	pcmwf when setting the format of the primary buffer, as that
	variable has the correct type.

2000-12-10  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.23.

	* arch/os2/Makefile.am: Removed reference to `vice2.ipf'.

2000-12-10  Tibor Biczo  <crown@matavnet.hu>

	* arch/win32/Makefile.am: Added statusbar.c and statusbar.h.

	* arch/win32/arch.dsp: Removed print.c, added statusbar.c.

	* arch/win32/c128ui.c, arch/win32/c64ui.c: Added shortcut key
	to mouse emulation.

	* arch/win32/fullscreen.c: Added compatibility code for old
	Mingw headers (DUMMYUNIONNAME).
	(fullscreen_transition): Signals transition into or from
	fullscreen.
	Removed DDSCL_NOWINDOWCHANGES flag from cooperation mode flags.
	(SwitchToFullscreenMode): Perform color translation only when
	the raster is existing.

	* arch/win32/joystick.c: Define DIRECTINPUT_VERSION, this is
	neccessary in order to compile with DX8 SDK.

	* arch/win32/resc128.rc: Temporarily removed Fullscreen menu
	entry from menu. Added shortcut to Mouse emulation menu entry.

	* arch/win32/resc64.rc: Added shortcut to Mouse emulation menu
	entry.

	* arch/win32/statusbar.c: New file, moved codes related to the
	statusbar to here from ui.c.

	* arch/win32/statusbar.h: New file.

	* arch/win32/ui.c: Removed all codes relating to statusbar.
	Added shortcut for Mouse emulation.
	(dummywindowproc): New function, is used for processing
	messages for the dummy window.
	Added safeguard checks for fullscreen_transition.

	* arch/win32/ui.h: New class name for the Main window.

	* arch/win32/video.c: Added compatibility code for old Mingw
	headers (DUMMYUNIONNAME).
	(video_frame_buffer_translate): Only translate frame buffer if
	raster exists.
	(canvas_create): Setup windows here.

	* arch/win32/x128.dsp, arch/win32/x64.dsp, arch/win32/xcbm2.dsp,
	arch/win32/xpet.dsp, arch/win32/xvic.dsp: Added print.c

2000-12-07  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/Makefile.am: added new files ui_cbm2.cc/h,
	ui_pet.cc/h,ui_vic20.cc/h

	* arch/beos/c610ui.cc,petui.cc,vic20ui.cc(*_ui_specific):
	calls the new machine specific setting function (ui_*)

	* arch/beos/ui_cbm2.cc/h,ui_pet.cc/h,ui_vic20.cc/h: new files
	that implement the setting dialogs for CBM2, PET and VIC20

	* ui_file.cc/h: VicePreview remembers his father window (the
	file panel) and closes it before autostarting the selected
	file

	* arch/beos/vicemenu.cc: small changes

2000-12-06  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* info.c: added credit to David Holz for symbol file
	"c64mem.sym".

2000-12-06  Michael Klein  <nip@c64.org>

        * sound.c, sounddrv/soundsdl.c: Updated SDL driver to compile
        and work with recent SDL versions.

        * info.c: Updated.

2000-12-06  Thomas Bretz  <tbretz@physik.tu-muenchen.de>
 
	* arch/os2/dialogs/dialogs.h: changes to cmdopt_dialog, 
	vsid_dialog
   
	* arch/os2/dialogs/dialogs.rc: added icons, small changes
 
	* arch/os2/dialogs/dlg-cmdopt.c: strip some unecessary code
 
	* arch/os2/dialogs/dlg-vsid.c: added icon to dialog
 
	* arch/os2/dialogs/menubar.c: added cmdline options
 
	* arch/os2/install.cmd: small changes

	* arch/os2/makedist.cmd: added copy for c1541.ico
 
	* arch/os2/Makefile.am: added vice2.ipf
 
	* arch/os2/uicmdline.c: added some comments replaces mainloop
	with WinProcessDlg
   
	* arch/os2/uimon.c: removed a memory leak
 
	* arch/os2/vac++/Makefile.am: VICE_HLP.ICC added
 
	* arch/os2/vac++/VICE_HLP.ICC: added

	* arch/os2/video.c: added comments and icon
 
	* arch/os2/vsidui.c: replaced maioloop with WinProcessDlg

2000-12-05  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/ui.c: fixed bug in romset menu.

	* arch/riscos/uimsgwin.c: limit number of lines in monitor
	window.

	sound.c, sound.h, fixpoint.c, fixpoint.h: moved
	soundclk-related fixpoint code to fixpoint.* . Distinguish
	between safe and unsafe casts from soundclk_t to long
	(-> BIG_FLOAT_TO_INT() ).

	sid/resid.cc: use safe and unsafe casts of soundclk_t to long
	to get exactly the same code as before.

2000-12-05  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.22.

2000-12-02  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/dialogs/dialogs.[rc,h]: added resources for manubar

	* arch/os2/dialogs/dlg-sound.c: added scale for volume
 
	* arch/os2/dialogs/menubar.c: added
 
	* arch/os2/doc/Vice_for_OS2.txt: deleted windowpos
 
	* arch/os2/kbd/proc.c: added some comments
 
	* arch/os2/uimon.c: small changes
 
	* arch/os2/vac++/incl/dialogs.icc: added menubar.c
 
	* arch/os2/vac++/incl/monitor.icc: removed asm., added asm*.c
 
	* arch/os2/video.c: added wmPaint (refresh window when
	emulation is paused), added menubar resource, removed autopos
	resource
   
	* arch/os2/videoarch.h: added stretch to canvas_t
 
	* arch/os2/vsidui.c: small changes

	* arch/os2/vsyncarch.c: small changes
 
	* monitor/mon_lex.c: make compile without warnings
	again
   
	* monitor/mon_parse.c: make compile without warnings again
 
	* sounddrv/sounddart.c: small changes
 
2000-12-02  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.21.

	* sound.h: Fixed typo in definition of `SOUNDCLK_MULT'.

2000-12-02  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/dialogs/dialogs.h: small changes, some small
	additions
 
	* arch/os2/dialogs/dialogs.rc: some layout changes
 
	* arch/os2/dialogs/dlg-datasette.c: enhanced for datasette
	resources
 
	* arch/os2/dialogs/dlg-emulator.c: changed output fields
 
	* arch/os2/dialogs/dlg-hardware.c: Added X128-vdc resource
 
	* arch/os2/dialogs/dlg-joystick.c: uses enabled joysticks now
 
	* arch/os2/dialogs/dlg-vsid.c: added Option-Button
 
	* arch/os2/doc/Vice_for_OS2.txt: updated
 
	* arch/os2/install.cmd: added reSid player
 
	* arch/os2/joystick.c: Output messages changed
 
	* arch/os2/kbd/proc.c: added VK_F11

	* arch/os2/mouse.c: Added some comments, some small changes
 
	* arch/os2/uicmdline.c: added include archdep.h
 
	* arch/os2/uimon.c: small changes
 
	* arch/os2/vac++/incl/archdep.icc: added uimon.c removed
	vsidui.c
 
	* arch/os2/vac++/incl/c64.icc: removed psid.c
 
	* arch/os2/vac++/incl/dialogs.icc: removed dlg-vsid.c
 
	* arch/os2/vac++/incl/mainsrc.icc: added prdevice.c, print.c,
	pruser.c
 
	* arch/os2/vac++/incl/vsid.icc: added
 
	* arch/os2/vac++/Makefile.am: added vsid.icc
 
	* arch/os2/vac++/X64.ICC: added vsid.icc
 
	* arch/os2/video.c: added some debug statements, improved
	handling of WmVrn
 
	* arch/os2/vsidui.c: improved output
 
	* arch/os2/vsyncarch.c: added pms, comments
 
	* c64/c64.c diff/src/c64/c64.c: display time only when
	changing (vsid)

	* main.c: help is -help not -h
 
	* print.c: adapted for OS/2
 
	* vsync.c: skip too-slow test for OS/2

2000-12-01  pottendo  <pottendo@utanet.at>

	* arch/unix/vsidui.c (vsid_create_menus): Added calls to create
	toplevel menus.

2000-12-01  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/console.c, ../uimon.c: Fixed some errors

2000-11-27  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/*: moved video standard selector from drive to
	system configuration window, added speed to VSID window.

	* sound.c, sound.h, sid/sid.c, sid/resid.cc: alternative
	fixpoint code for sound timings (if FIXPOINT_ARITHMETIC
	defined, otherwise use double as before).

2000-11-26  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.20.

	* monitor/mon.h: Added prototype for `mon_cpu_type()'.

	* mon.c, asm.h, asm6502.c, asmz80.c: Added support for
	multiple byte opcodes.

2000-11-25  Dag Lem  <resid@nimrod.no>

	* arch/unix/vsidui.c: Added menu "Video Standard".

	* c64/psid.c: Added video standard cmdline options.

	* c64/psiddrv.a65: Refined memory bank switching.

	* resid/: Removed libtool usage.

2000-11-23  Dag Lem  <resid@nimrod.no>

	* resid/: reSID 0.10; quite a bit faster.

2000-11-19  Andreas Matthies  <andreas.matthies@gmx.net>

	* c64/c64mem.c(initialize_memory): pport initialized with
	default values $2f, $37

2000-11-17  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/msdos/tuifs.c(tui_file_selector) must not free
	the return_path; this is done by the calling functions

	* arch/msdos/uisnapshot.c(load_snapshot_callback) frees
	'name' which is received by tui_file_selector

	* vic20/vic-mem.c(vic_store) geometry uses exact values
	of $9000

	* vic20/vic20.h: changed constants VIC_SCREEN_WIDTH,
	VIC_SCREEN_MAX_TEXT_LINES and VIC_LAST_DISPLAYED_LINE so that
	the emulation can handle shifted or larger screens used in
	many games like Arcadia or Bongo

2000-11-17  Alexander Bluhm  <bluhm@milab91.mathematik.uni-leipzig.de>

	* ciacore.c (mycia_store, int_ciatod): Fixed some TOD bugs.

	* sounddrv/soundsun.c: Defines for OpenBSD.

2000-11-17  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.19.

	* monitor/asmz80.c: New file.

	* monitor/asm.c: Renamed to `asm6502.c'.

	* monitor/mon_parse.y, monitor/mon_lex.l, monitor/mon.c,
	monitor/asm.h: Added support for Z80 opcodes.

	* uimon.h, arch/unix/uimon.c, arch/msdos/uimon.c,
	arch/win32/uimon.c, arch/riscos/uimon.c, arch/os2/uimon.c,
	arch/beos/uimon.c (arch_mon_in): Removed `const'.

2000-11-11  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/uimon.c,console.c: added new functionality,
	corrected errors (but it's FAR from finished!)

2000-11-08  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.18.

	* arch/win32/uimon.c (CreateAToolbar): Only use
	`UnlockResource' if `HAS_UNLOCKRESOURCE' is defined.

	* c1541.c (internal_read_geos_file): Commented out unused
	variable.

2000-11-08  Dag Lem  <resid@nimrod.no>

        * c64/psid.c: Improve PSID compatibility - correct speed
          handling, provide $02a6 PAL/NTSC flag and $ea31 IRQ exit.

        * c64/psiddrv.a65: Improve PSID compatibility - correct speed
          handling, VICII/CIA1 interrupt, bank selection

2000-11-02  Dag Lem  <resid@nimrod.no>

	* arch/unix/vsync.c (set_timer_speed): Avoid divide by zero.
	* vsync.c: Corrected credits.

2000-11-01  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/joystick.cc(.h): some changes to avoid opening
	the same hardware joystick port twice

	* arch/beos/ui_file.cc(.h): new functions
	(read_disk_image_contents),(read_tape_image_contents),
	(read_disk_or_tape_image_contents),(create_content_list);
	new classes VicePreview,ViceFilePanel that implement the
	image contents and autostart features

	* arch/beos/vicewindow.cc(.h): ViceWindow uses members
	of the new ViceFilePanel class

	* arch/msdos/vsync.c(vsync_set_machine_parameter): calls
	register_timer_callback which should fix the NTSC timing
	problem

	* arch/win32/uisnapshot.c: new include vsync.h;
	(ui_save_snapshot) calls suspend_speed_eval

	* vsync.c(display_speed): logging of time-keeping-problems
	removed again

2000-10-29  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.17.

2000-10-23  Markus Brenner  <markus@brenner.de>

	* cartridge.h: added CARTRIDGE_DINAMIC type (17)

	* c64/c64cartmem.c: added support for CARTRIDGE_DINAMIC

	* c64/c64cartridge.c: added support for CARTRIDGE_DINAMIC

2000-10-17  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	*  c64/psid.c: don't dereference psid before checking whether
	it's legal (Segfaults on Solaris).

2000-10-15  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* c64/c64.c, c64/psid.{c,h}: count number of vsyncs a tune was
	played for playtime information.

	* arch/riscos/ui.{c,h}: pass international messages to vsidui.

	* arch/riscos/vsidui.c: added vsid_ui_display_time(); pause
	and stop working correctly now.

	* arch/*/vsidui.c: added vsid_ui_display_time() dummy stubs.

2000-10-14  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.16.

	* arch/unix/x11/xaw/widgets/Directory.c: #include "vice.h".

2000-10-14  Dirk Schnorpfeil  <D.Schnorpfeil@web.de>

	* c1541.c: Added commands to read/write GEOS formatted disks.

2000-10-12  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/unix/x11/gnome/dummies.c,
	arch/unix/x11/gnome/gnomevideo.c: __FUNCTION__ is not defined
	in SUNWspro compilers.

	* arch/unix/x11/gnome/about.c: SUNWspro doesn't allow function
	calls in initializers ( _(...) ).

2000-10-10  Andreas Matthies  <andreas.matthies@gmx.net>

	* vsync.c: new include log.h; frame_start now global;
	(display_speed) checks if emulation loses time (like Dag did
	it in the unix version): delay doesn't exceed 1 second now and
	warning is written to the log

2000-10-08  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.15.

	* Makefile.am, arch/win32/msvc/config.h, arch/os2/config.h,
	arch/riscos/config.h, serial.c, c64/c64.c, c64/c64cia2.c,
	c128/c128.c, vic20/vic20.c, vic20/vic20via2.c, pet/pet.c,
	pet/petvia.c, cbm2/c610.c, cbm2/c610cia1.c: Removed special
	printer defines.

2000-10-07  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/uimon.c: added new functionality, corrected
	errors (but it's FAR from finished!)

2000-10-05  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/c128ui.cc,c610ui.cc,c64ui.cc,petui.cc,vic20ui.cc:
	minor changes, new parameter in ..._ui_specific,
	implementation for VIC20 and C64 cartridges

	* arch/beos/constants.h: new menu IDs for cartridges

	* arch/beos/ui.cc: minor changes

	* arch/beos/ui.h: new type ui_cartridge_t;

	* arch/beos/ui_device.cc: uses resource 'PrinterDevice1'
	instead of 'PrinterFile'

	* arch/beos/ui_file.cc: (ui_select_file) and
	(ui_select_file_action) support cartridge files;

	* arch/beos/vicemenu.cc: new menu items for cartridges; some
	changes in the order of items

	* arch/os2/vsyncarch.c: (vsyncarch_display_speed) gets third
	parameter 'warp_enabled'; not used yet

	* arch/win32/Makefile.am,arch.dsp: vsync.c replaced by
	vsyncarch.c

	* arch/win32/ui.c: added some 'suspend_speed_eval()'

	* arch/win32/uilib.c: 'suspend_speed_eval' after filename is
	selected

	* arch/win32/vsyncarch.c: new file to support common vsync code

	* arch/win32/x128.dsp,x64.dsp,xcbm2.dsp,xpet.dsp,xvic.dsp:
	added common vsync.c to project

	* maincpu.c: (cpu_resets) calls 'suspend_speed_eval()'

	* snapshot.c: (snapshot_open) calls 'suspend_speed_eval()'

	* vsync.c: now compiled under WIN32
	frame_ticks changed to 'signed long' do make
	(delay+frame_ticks < 0) become possible in (do_vsync)
	(vsyncarch_display_speed) is called with third param
	'warp_mode_enabled'; new prototype in vsyncarch.h

2000-10-05  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/archdep.h, arch/riscos/kbd.c: added required
	include.

	* arch/riscos/ui.c: resync sound and frame rate after pause,
	small changes to fliplist handling.

2000-10-04  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* monitor/mon.c: no C++ comments in common C source, please.

2000-10-04  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* monitor/mon.c: doesn't use the console directly, but only
	via arch_mon_...()

	* arch/win32/uimon.c: added new functionality, corrected
	errors (but it's FAR from finished!)

	* arch/.../uimon.c: Added arch_mon_in(), arch_mon_out()

2000-10-01  Andreas Boose  <boose@linux.rz.fh-hannover.de>

        * Version 1.5.14.

	* diskimage.c (disk_image_check_for_d64): Also read error info
	from a 40 track disk image.
	(disk_image_sector_per_track): Added error output.

	* vdrive/vdrive-iec.c (write_sequential_buffer): Fixed return
	value.

	* vdrive/vdrive-bam.c (vdrive_bam_alloc_first_free_sector):
	Fixed completely bogus allocation.

	* vdrive/vdrive.c (vdrive_calculate_disk_half): Fixed number
	tracks calculation for 1541 and 1571 disk images.

	* print.c: New file based on arch/riscos/print.c.

	* serial.c (serialsendbyte, serialreceivebyte, serialcommand,
	serialattention): Only fetch vdrive for disk devices.

	* arch/unix/uisettings.c (printer_settings_menu): Updated
	resource names.

	* arch/riscos/ui.c: Likewise.

	* arch/unix/Makefile.am, arch/msdos/Makefile.am,
	arch/win32/Makefile.am, arch/riscos/Makefile.am,
	arch/beos/Makefile.am: Drop `print.c'.

	* arch/unix/archdep.h, arch/win32/archdep.h,
	arch/riscos/archdep.h, arch/msdos/archdep.h,
	arch/beos/archdep.h, arch/os2/archdep.h: Defined default
	printer devices.

	* sound.h: Added prototype for `sound_init_esd_device()'.

	* sounddrv/soundesd.c: #include <stdio.h>.

	* autostart.c (autostart_tape): Do not load "*" if no name is
	given!

2000-09-30  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.13.

	* vdrive/vdrive-command.c (vdrive_command_execute): Fixed
	format command call.

	* info.c: Updated.

	* uimon.h: Do not #include "console.h".

	* arch/unix/uimon.c, arch/msdos/uimon.c, arch/win32/uimon.c,
	arch/riscos/uimon.c, arch/os2/uimon.c, arch/beos/uimon.c:
	Include "console.h" and <stdio.h> because those files need
	prototypes or defines from this header files.

	* arch/win32/console.c: #include "console.h".
	(arch_console_open_mdi): Fixed prototpye to match the
	function declaration in `uimon.h'.

	* arch/win32/res.rc: Commented out toolbar definition that
	windres cannot parse.

2000-09-30  Ricardo Ferreira  <storm@atdot.org>

	* sounddev/soundarts.c: Added. Implements aRts sound support.

	* sound.c: Added arts sound device initialization.

2000-09-27  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* sounddrv/soundacorn.c: adapt fragsize and fragnr if fragsize
	exceeds the possible DMA buffer size (fixes problems at >
	22050Hz).

2000-09-27  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/.../uimon.c: Added handling of console for mon for 
	all ports

	* arch/win32/uimon.c: Stub for adding a UI for the monitor
	with win32.
	To compile with it, define UIMON_EXPERIMENTAL on top of file

	* arch/win32/console.c: Now can be opened as an MDI child

2000-09-26  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/uiconfig.c: changed cartridges and maximum sound
	buffer size

	* arch/riscos/ui.c: improved vsid mode and PAL/NTSC syncing.
	Restructured overly large if-then-else-if... blocks.

2000-09-25  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.12.

	* sounddrv/Makefile.am: Include `soundarts.c'.

2000-09-22  Andreas Matthies  <andreas.matthies@gmx.net>

	* beos/constants.h: new IDs for "save/confirm on exit" mimic

	* beos/joystick.cc: (joystick_update) uses common functions
	instead of directly setting the value

	* beos/main_exit.c: (main_exit) is empty now; instead of this
	the new function main_exit_early is used for cleanup in the
	destructor of the ViceApp class; this should finally fix the
	problem with crashes at shutdown

	* beos/mouse.cc: new file (instead of mouse.c) that implements
	the 1351 emulation

	* beos/mouse.h: minor changes

	* beos/ui.cc: the mimic for resource saving at exit and
	confirmation for exit is now implemented as in the windows port;
	removed dialogs that reported loading/saving/resetting settings

	* beos/vicemenu.cc: minor changes

	* beos/vicewindow.cc: window class extended for mouse button
	handling

2000-09-18  Markus Brenner  <markus@brenner.de>

	* cartridge.h: removed OCEAN_HUGE cartridge type

	* c64/c64cartmem.c: OCEAN carts may access ROM at $a000

	* c64/c64cartridge.c: unified OCEAN/OCEAN_HUGE CRT types

2000-09-18  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	arch/riscos/Makefile.am, arch/riscos/vsiddummy.c: new file
	vsiddummy, contains stubs for non-C64 targets.

	arch/riscos/ui.{c,h}, arch/riscos/archdep.c,
	arch/riscos/uidummy.c, arch/riscos/vsidui.c: added vsid GUI.

2000-09-03  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.11.

	* arch/unix/vsidui.c: #include "drive.h".

2000-09-01  Andreas Matthies  <andreas.matthies@gmx.net>

	* beos/Makefile.am: new files ui_vicii.cc,ui_vicii.h

	* beos/main.cc: removed obsolete KillThread function

	* beos/ui.cc: (ui_dispatch_events) handles VIC-II menu item

	* beos/ui_vicii.cc/h: new files implement the settings dialog

	* beos/vicemenu.cc: new items for VDC settings, minor
	corrections

	* beos/videoarch.h: now canvas tripple buffering

	* beos/vsidui.c,msdos/vsidui.c,win32/vsidui.c: new includes
	to fit with the new vsid-api-dummies

	* msdos/video.c,os2/video.c,unix/x11/video.c: new dummies
	(canvas_destroy)

	* beos/main_exit.c,msdos/main_exit.c,os2/video.c,riscos/ui.c,
	unix/main_exit.c,win32/main_exit.c: removed/disabled call of
	(video_free)

	* c128/c128.c,c64/c64.c,cbm2/c610.c,pet/pet.c,vic20/vic20.c:
	(machine_shutdown) calls the <video_chip>_free() for the
	machine's video-chip(s)

	* crtc/crtc.c,vdc/vdc.c,vic20/vic.c,vicii/vicii.c:
	new (VDC: modified) functions (<chip>_free) that for now
	only free the raster by calling (raster_free)

	* raster/raster.c: new function (raster_free) that frees
	framebuffer, canvas and some other allocated objects

	* win32/joystick.c (joystick_update) uses the joystick latch
	functions instead of directly writing to the joystick_value

2000-08-29  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/beos/vsidui.c: new vsid_ui_functions added,
	vsid_set_tune removed
 
	* arch/msdos/vsidui.c: new vsid_ui_functions added,
	vsid_set_tune removed
 
	* arch/os2/dialogs/dialogs.h: vsid dialog enhanced
 
	* arch/os2/dialogs/dlg-vsid.c: enhanced
 
	* arch/os2/vac++/ctools/biosdump.icc: added

	* arch/os2/vac++/ctools/cformat.icc: added
 
	* arch/os2/vac++/ctools/ctools.icc: added
 
	* arch/os2/vac++/ctools/d64dump.icc: added
 
	* arch/os2/vsidui.c: new vsid_ui functions added,
	vsid_set_tune removed
 
	* arch/riscos/vsidui.c: new vsid_ui functions added,
	vsid_set_tune removed
 
	* arch/unix/vsidui.c: new ui functions added, vsid_set_tune
	removed
 
	* arch/win32/vsidui.c: new ui functions added, vsid_set_tune
	removed

	* c64/psid.c: introduced new ui callback functions,
	psid_set_tune and vsid_set_tune merged
                  
	* vsidui.h: new ui functions added, vsid_set_tune removed

2000-08-27  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.10.

	* arch/unix/x11/xaw/uicartridge.c,
	arch/unix/x11/xaw/uiedisk.c, arch/unix/x11/xaw/uiscreenshot.c,
	arch/unix/x11/xaw/uisnapshot.c: Added write protect stub.

	* keyboard.h: Fixed `joystick_bits_t' enumeration.

	* vicii/viciitypes.h: Adjusted NTSC sprite fetch cycle.

2000-08-23  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/Makefile.am: new file ui_device.cc,ui_device.h
	which implement the device settings dialog

	* arch/beos/joystick.cc: rewritten; now dual joysticks
	(Y-plug) should work; uses new resource extra parameter

	* arch/beos/print.c: fixes line end characters

	* arch/beos/statusbar.cc/h: support for a joystick ui that
	displays the state of the joystick ports

	* arch/beos/ui.cc: new interface between joystick module
	and statusbar ui

	* arch/beos/ui_device.cc/h: new files that implement the
	device settings ui

	* arch/beos/ui_drive.cc,ui_joystick.cc: use the
	resource-sprintf functions; new joystick option that enables
	the statusbar ui

	* arch/beos/vicemenu.cc: updated menus to current state of
	implementation; removed wrong option for C128-NTSCOLD

	* c128/c128.c,src/c128/c128.h: removed definitions and
	use of C128 NTSCOLD mode

2000-08-23  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/archdep.c: minor changes in spawn

	* arch/os2/dialogs/dialogs.c: changed toggle function
 
	* arch/os2/dialogs/dialogs.[c,h,rc]: added new resources and 
	hardware dialog
   
	* arch/os2/dialogs/dlg-drive.c: changed resource handling
	functions, added memory extension handling, path handling
     
	* arch/os2/dialogs/dlg-emulator.c: added snapshot feature
 
	* arch/os2/dialogs/dlg-hardware.c: added
 
	* arch/os2/dialogs/dlg-snapshot.c: added
 
	* arch/os2/dialogs/Makefile.am: added dlg-snapshot, dlg-hardware
 
	* arch/os2/doc/Vice_for_OS2.txt: changed
 
	* arch/os2/joystick.c: fixed a bug in set_cbm_joystick
 
	* arch/os2/kbd/proc.c: added snapshot feature, hardware dialog
 
	* arch/os2/ui.c: added empty ui_display_tape_current_image
 
	* arch/os2/vac++/incl/dialogs.icc: dlg-snapshot, 
	dlg-screenshot, dlg-hardware added

	* arch/os2/video.c: exchanged wmvrn with DiveSetup in canvas_refresh

	* arch/os2/vsidui.c: added setting of "dart2"
 
	* autostart.c: fixed a small bug in disk/tape autostart functions

	* sound.[hc]: enabled dart2 support
 
2000-08-23  pottendo  <pottendo@utanet.at>

	* arch/unix/x11/xaw/ui.c (ui_select_file): Updated to new
	ui_select_file interface.

	* arch/unix/x11/gnome/ui.c (ui_select_file): Added support for
	write protect attach.
	(build_file_selector): Added checkbox widget for write protect
	attach.

	* arch/unix/vsidui.c
	(psid_load): Updated to new ui_select_file interface.

	* arch/unix/vic20ui.c
	(attach_cartridge): Updated to new ui_select_file interface.

	* arch/unix/uisettings.c:
	(select_user_keymap): Updated to new ui_select_file interface.
	(ui_load_palette): ditto.
	(ui_load_romset): ditto.
	(ui_load_rom_file): ditto.
	(set_rs232_device_file): ditto.
	(set_printer_dump_file): ditto.

	* arch/unix/uicommands.c:
	(attach_disk): Added support for write protect attach.
	(attach_tape): Updated to new ui_select_file interface.
	(smart_attach): ditto.
	(load_snapshot_trap): ditto.
	(ui_update_flip_menus): Added menu entry for write protection.
	New menu toggle definitions: AttachDevice{8,9}ReadOnly.

	* arch/unix/ui.h: Changed prototype for ui_select_file.

	* arch/unix/c64ui.c: Updated to new ui_select_file interface.

2000-08-20  pottendo  <pottendo@utanet.at>

	* arch/unix/x11/xaw/ui.c (ui_set_topmenu): Adjusted topmenu to new
	prototype. 

	* arch/unix/x11/x11menu.c (make_menu_label): Take care about the
	`NO_TRANS' tag coming from ui.h.

	* arch/unix/x11/gnome/uimenu.c: 
	(all): Removed dead code for GNOME_MENUS. Removed storing the
	allocated widgets in static array `submenus[]'. There's no static
	limit for submenus now.	

	* arch/unix/x11/gnome/ui.c (ui_set_topmenu): Rewritten. Allows to
	redefine the toplevel menu now by just calling the function
	again. It takes care of releasing the associated resources from
	the old menu, if one has been there.

	* arch/unix/uicommands.{c,h}, arch/unix/uisettings.{c,h}: Added a
	few menu declarations for toplevel menus.

	* arch/unix/uicommands.c (ui_update_flip_menus): Added provision
	to save filename menu entries from translation by prefixing the
	string with a special tag defined by NO_TRANS coming from ui.h.

	* arch/unix/ui.h: Changed prototype to `ui_set_topmenu()' to
	accept toplevel menu description.

	* arch/unix/c128ui.c: Introduced new toplevel menu.
	* arch/unix/c64ui.c: ditto.
	* arch/unix/petui.c: ditto.
	* arch/unix/c610ui.c: ditto.
	* arch/unix/vic20ui.c: ditto.

2000-08-20  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.9.

	* crtc/crtc.c (crtc_raster_draw_alarm_handler): Use overflow
	aware variables instead of `rclk'.

2000-08-20  Markus Brenner  <markus@brenner.de>

	* cartridge.h: added CARTRIDGE_WARPSPEED type

	* c64/c64cartridge.c: added warpspeed cartridge support

	* c64/c64cartmem.c: added warpspeed cartridge support

2000-08-18  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* arch/win32/ui.c: changed ui_messagebox so that it should
	work now with multi-screen emulators (X128).

2000-08-16  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/uiconfig.{c,h}: added UI elements for attaching
	disks readonly.

2000-08-15  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/dialogs/dialogs.[rc,h,c]: added keyset dialog, vsid
	dialog enhanced, moved 'sync factor' to emulator menu
  
	* arch/os2/dialogs/dlg-drive.c: removed drive-sync-factor

	* arch/os2/dialogs/dlg-emulator.c: added drive-sync-factor

	* arch/os2/dialogs/dlg-joystick.c: added keyset support

	* arch/os2/dialogs/dlg-vsid.c: added some small features

	* arch/os2/joystick.[hc]: changed resources to use new
	resource feature

	* arch/os2/kbd/parse.[ch]: changed to new vkm-file layout

	* arch/os2/kbd/proc.c: changed keyboard mapping (symbolic =
	double row)

	* arch/os2/kbd.[hc]: changed keyboard resources to new mapping

	* arch/os2/video.[hc]: added initialize flag, fixed palette
	bug

	* arch/os2/vsidui.c: added base features

	* autostart.c: made the flew of the program more visible in
	autostart_[tape,disk]

2000-08-13  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.8.

	* c64/reu.c (reu_read_snapshot_module): Fixed snapshot bug.

	* autostart.c (autostart_advance): Fixed compiler warnings.

	* utils.c, fsdevice.c, resources.c: Remove destination file
	before renaming files.

	* findpath.c (findpath): Do not use `PATH_VAR'.

	* arch/msdos/uiattach.c (create_disk_image_name_callback):
	Changed likewise.

	* arch/msdos/uisnapshot.c (file_name_callback): Likewise.

	* vice.h: Removed `PATH_VAR' definition.

	* utils.c, utils.h (xadd_extension): New function.

	* arch/unix/x11/xaw/uisnapshot.c, arch/unix/x11/xaw/uiedisk.c,
	arch/win32/uisnapshot.c, arch/win32/uiconsole.c: Use
	`xadd_extension' to add extensions.

	* arch/win32/ui.c, arch/win32/ui.h (ui_ensure_extension):
	Removed port specific filename extension code.

	* screenshot/bmp.c, screenshot/png.c: Removed `.' from
	filename extension.

	* arch/win32/uiattach.c: Use `resources_get_sprintf'.

	* arch/win32/uiconsole.c: Use `MAXPATHLEN' instead of random
	numbers.

	* arch/win32/joystick.c, arch/win32/uidrive.c: Use new
	resource extra parameter.

	* arch/win32/uilib.c, arch/win32/uilib.h (ui_set_res_num):
	Removed.

2000-08-13  Spiro Trikaliotis  <Spiro.Trikaliotis@gmx.de>

	* fsdevice.c: Changed "case 8...11" statement to list of cases,
	since MSVC does not recognize this form (and AFAIK it is not
	standard C).

	* arch/win32/console.c: Now handles full-screen mode

	* arch/win32/ui.c, src/arch/win32/resXXX.rc: added menu toggle
	to allow quiting VICE w/o confirmation.

	* arch/win32/ui.c, src/arch/win32/uilib.c: added
	ui_messagebox() as replacement for MessageBox(). It handles
	the fullscreen mode. Changed all usages of MessageBox to this
	new function, except when handling WM_CLOSE, which handles it
	a bit differently.

	* arch/win32/ui.c: JAM dialog box now appears and allows to
	choose whether to start the debugger or not.

2000-08-12  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.7.

	* keyboard.h: Commented out `joystick_bits_t'.

	* attach.c, fsdevice.c, drive/drive-resources.c,
	arch/unix/print.c, arch/unix/rs232.c: Use extra resource
	parameter to eliminate many functions doing almost the same.

	* ChangeLog, ChangeLog.1, ChangeLog.2, ChangeLog.3: Splitted
	out new file.

2000-08-11  Andreas Matthies  <andreas.matthies@gmx.net>

	* arch/beos/Makefile.am: new files ui_datasette.cc/h,
	ui_sound.cc/h; some files changes from .c to .cc

	* arch/beos/archdep.c: implemented (archdep_spawn),
	(archdep_quote_parameter),(archdep_filename_parameter);
	compressed files are supported now

	* arch/beos/c128ui.c,c610ui.c,petui.c,vic20ui.c: changed
	to .cc and implemented some machine specific menu items

	* arch/beos/constants.h: more menu IDs

	* arch/beos/joystick.cc/h: rewritten; now all available
	hardware joysticks are scaned and supported

	* arch/beos/kbd.c: corrected kbd_code_to_string table

	* arch/beos/ui.cc: includes ui_datasette.h,ui_sound.h;
	(ui_dispatch_events) handles more events
	(ui_display_image) can handle tape images now
	(ui_display_tape_current_image): new function
	(ui_statusbar_update) also updates the tape image name

	* arch/beos/ui_datasette.cc/h: implement the datasette
	settings dialog

	* arch/beos/ui_sound.cc/h: implement the sound settings
	dialog

	* arch/beos/ui_drive.cc: fixed includes

	* arch/beos/ui_joystick.cc/h: now the Keyset can be defined
	and the detected hardware sticks are supported

	* arch/beos/vicemenu.cc: displays more menu items

	* arch/beos/vicewindow.cc: some changes to handle the new
	video engine

	* arch/beos/video.cc,videoarch.h: changed the video engine
	a little; now the frame_buffer is directly represented by
	a BBitmap which makes it ~20% faster

	* arch/msdos/statusbar.c: fixed (statusbar_prepare) to avoid
	crashes when statusbar is activated from the menu

	* uiapi.h: new function (ui_display_tape_current_image)

	* msdos/ui.c,os2/ui.c,riscos/ui.c,unix/ui.h,unix/uicommands.c,
	unix/x11/gnome/ui.c,unix/x11/xaw/ui.c,win32/ui.c,msdos/ui.c
	small changes to handles the new uiapi-function (dummies
	respectively small changes in unix that already used this
	function)

	* arch/win32/rescbm2.rc: removed sid-settings from CBM2-menu

	* c128/c128.c: (machine_change_timing) handles NTSCOLD

	* tape.c: new include uiapi.h
	(tape_attach_image),(tape_detach_image) use the new
	ui_display_tape_current_image

2000-08-08  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/uiimage.c: support new autostart approach.

	* arch/riscos/uimsgwin.c: small type renaming.

	* autostart.c: avoid one superfluous attach/detach cycle in
	autostart_tape() and autostart_disk().

2000-08-08  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/archdep.c: some small changes to the logging
 
	* arch/os2/console.c: use of [1024] is now a part of the past
 
	* arch/os2/dialogs/dialogs.h: CB_READONLY, vsid_dialog added

	* arch/os2/dialogs/dialogs.rc: LED8,9 layout changed,
	Readonly added, vsid dlg added
 
	* arch/os2/dialogs/dlg-cmdopt.c: small changes
 
	* arch/os2/dialogs/dlg-contents.c: autostart_autodetect uses
	the number now
 
	* arch/os2/dialogs/dlg-drive.c: readonly, check_drive_type
	support added
 
	* arch/os2/dialogs/dlg-monitor.c: WM_INSERT: free(mp1) added
 
	* arch/os2/dialogs/dlg-vsid.c: added
 
	* arch/os2/dialogs/Makefile.am: dlg-vsid.c added
 
	* arch/os2/joystick.c: restructured.
 
	* arch/os2/joystick.h: moved some definitions to joystick.c
 
	* arch/os2/kbd/proc.c: small changes
 
	* arch/os2/kbd.c: removed a small compiler error from last
	patch
 
	* arch/os2/main_exit.c: small changes
 
	* arch/os2/mouse.c: adde joystick_clear, XVIC and
	_mouse_enabled handling
 
	* arch/os2/uicmdline.c: uses xmsprintf now
 
	* arch/os2/vac++/incl/dialogs.icc: dlg-vsid.c added
 
	* arch/os2/vac++/*.icc: lpng106-path --> lpng
 
	* arch/os2/vac++/lpng.icc: added
 
	* arch/os2/vac++/lzlib.icc: added
 
	* arch/os2/vac++/Makefile.am: lzlib.icc, lpng.icc added
 
	* arch/os2/video.c: moved video_close --> main_exit, some
	changes to logging, added some comments, move creation of
	Keyboard semaphopre to video_open, added hDiveInst handling to
	wmVrn[Dis,En]abled, canvas_refresh, vsid_mode handling to
	canvas_create,
   
	* arch/os2/videoarch.h: small changes
 
	* arch/os2/vsidui.c: base functionality added
 
	* arch/os2/vsyncarch.c: small changes to shutdown

	* autostart.c: small changes to logging
 
	* c64/c64.c: more logical structure concerning vsid_mode

	* keyboard.[hc]: joystick_clear added.
 
	* keyboard.h: enum for joystick directions added
 
	* main.c: some changes concerning resources for os2 (no
	console mode), more logical structure concerning vsid_mode
   
	* monitor/mon_parse.c: prevent a compiler warning
 
2000-08-06  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.6.

	* arch/win32/fullscreen.c, arch/win32/video.c: Define
	`IID_IDirectDraw2' if there is not GUIDLIB.

	* drive/drive.c (drive_check_type): Mask out dual drives for
	second drive and other invalid combinations.

	* attach.c, attach.h: Added support for opening disks read
	only.

	* main.c (init_cmdline_options): Initialize attach specific
	command line options.

	* vdrive/vdrive.c, vdrive/vdrive.h
	(vdrive_internal_open_disk_image): Set `read_only' before
	`disk_image_open' is called.

	* c1541.c (open_disk_image): Changed likewise.

	* diskimage.c (disk_image_open): Get the open mode from the
	`read_only' flag of the image struct.

	* imagecontents.c (image_contents_read_disk): Open disk read
	only.

	* resources.c, resources.h: Added support for a parameter to
	the resource set function.

	* attach.c, datasette.c, fsdevice.c, log.c, main.c, sound.c,
	sysfile.c, traps.c, vsync.c, vdc/vdc-resources.c, aciacore.c,
	prdevice.c, pruser.c, rsuser.c, drive/drive-resources.c,
	vicii/vicii-resources.c, crtc/crtc-resources.c, sid/sid.c,
	c64/c64cartridge.c, c64/c64mem.c, c64/psid.c, c128/c128mem.c,
	c128/c128mmu.c, c128/z80mem.c, vic20/vic-resources.c,
	vic20/vic20cartridge.c, vic20/vic20mem.c, pet/pet.c,
	pet/petmem.c, pet/petpia1.c, cbm2/c610mem.c,
	arch/unix/joystick.c, arch/unix/kmap.c, arch/unix/mouse.c,
	arch/unix/petkmap.c, arch/unix/print.c, arch/unix/rs232.c,
	arch/unix/vsync.c, arch/unix/x11/kbd.c, arch/unix/x11/video.c,
	arch/unix/x11/ui-resources.c, arch/win32/joystick.c,
	arch/win32/kbd.c, arch/win32/mouse.c, arch/win32/print.c,
	arch/win32/ui.c, arch/msdos/joystick.c, arch/msdos/kbd.c,
	arch/msdos/mouse.c, arch/msdos/print.c, arch/msdos/ui.c,
	arch/msdos/video.c, arch/msdos/vsync.c, arch/riscos/kbd.c,
	arch/riscos/joystick.c, arch/riscos/print.c,
	arch/riscos/rs232.c, arch/riscos/ui.c, arch/riscos/video.c,
	arch/riscos/vsync.c, arch/os2/unused/video_gpi.c,
	arch/os2/unused/vsync.c, arch/os2/joystick.c, arch/os2/kbd.c,
	arch/os2/mouse.c, arch/os2/rs232.c, arch/os2/video.c,
	arch/os2/ui.c,, arch/os2/kbd/kmap-pet.c, arch/os2/kbd/kmap.c,
	arch/beos/kbd.c, arch/beos/mouse.c, arch/beos/print.c,
	arch/beos/vsync.c: Added parameter to resource tables.

2000-08-06  pottendo  <pottendo@utanet.at>

	* info.c: Updated contribution.

2000-08-04  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.5.

	* autostart.c: Fixed warnings.

2000-08-04  Tibor Biczo  <crown@matavnet.hu>

	* arch/win32/fullscreen.c, arch/win32/video.c: Added
	GCC compatibility code.

2000-08-03  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/dialogs/dlg-contents.c: changed
	autostart_autodetect from name to number
   
	* autostart.c: made reboot_for_autostart threadsafe for OS/2,
	fixed problems with open files when determin program_names
	from number

2000-08-03  Tibor Biczo  <crown@matavnet.hu>

	* arch/win32/Makfile.am: Added fullscreen.c and fullscreen.h to
	filelist.

	* arch/win32/arch.dsp: Added fullscreen.c to project.

	* arch/win32/c128.dsp: Added daa.c to project.

	* arch/win32/fullscreen.c: New file. Contains functions for
	fullscreen mode on Win32.

	* arch/win32/fullscreen.h: New file.

	* arch/win32/res.h: Added fullscreen related resource values.

	* arch/win32/res.rc: Added fullscreen settings dialog.

	* arch/win32/resc128.rc, arch/win32/resc64.rc,
	arch/win32/rescbm2.rc, arch/win32/respet.rc,
	arch/win32/resvic.rc: Added fullscreen menu entries.

	* arch/win32/ui.c: Include fullscreen.h.
	Added 'SaveOnResourcesExit' and 'FullScreenEnabled' to
	toggle_list.
	(ui_resources): New struct, contains resources from the UI.
	(set_fullscreen_device) (set_fullscreen_bitdpeth)
	(set_fullscreen_width) (set_fullscreen_height)
	(set_fullscreen_refreshrate) (set_fullscreen_enabled)
	(set_save_resources_on_exit): New functions.
	(resources): Added fullscreen resources.
	(cmdline_options): Added commandlines.
	(ui_init_cmdline_options): Register commandline options.
	(UI_COMMON_HOTKEYS): Added Alt-D and Alt-Enter hotkeys.
	(ui_init): Updated hotkey numbers, removed unused local
	variable, don't create status window here.
	(ui_init_finish): Call ui_fullscreen_init.
	(ui_open_canvas_window): Added fullscreen stuff.
	(ui_resize_canvas_window): Don't do anything in fullscreen.
	(ui_error) (ui_error_string): Log error message into logfile
	as well.
	(save_sanpshot_trap) (load_snapshot_trap): Suspend fullscreen
	if neccessary.
	(ui_get_main_hwnd): Always have a window handle even when the
	canvas windows hasn't been created yet.
	(handle_wm_command): Suspend fullscreen if neccessary.
	Added fullscreen settings call, and toggle fullscreen handling.
	(window_proc): Handle WM_ACTIVATEAPP message, it's not yet done
	correctly. Suspend fullscreen when neccessary. Save resources
	on exit, if it's enabled. Removed not used code, it was just
	confusing.

	* arch/win32/ui.h: Changed definition of ui_open_canvas_window.

	* arch/win32/vdc.dsp: Added vicii directory into include folder
	list.

	* arch/win32/video.c: Plenty of changes...
	Include fullscreen.h.
	(video_init) Doesn't do anything anymore.
	Removed lots of unused code.
	(video_frame_buffer_translate): New function, it translates the
	content of the framebuffer on fullscreen changes, so colors stay
	correct even when changing to different bitdepths...
	(set_physical_colors): Uses the primary surface to get the
	colors now. Fills up pixel_translate table in the canvas.
	(canvas_create): Complete rewrite, everything happens here now,
	from creating the DirectDraw object till setting its palette.
	(canvas_set_palette): Implemented function, as it was not done
	before.
	(canvas_update): Only blit safe areas onto screen, cut off extra
	frame buffer area which are used for sprites...
	(real_refresh): Removed color changes, as it was broken, will
	be reimplemented shortly. Changing the palette from the UI works
	as canvas_set_palette has been implemented. If you change your
	desktop color scheme when on an 8 bit desktop or you switch
	to an application which redefines the palette, colors will go
	bad...

	* arch/win32/videoarch.h: Added pixel_translate, dd_object,
	dd_object2, client_width, client_height added to canvas_t struct.
	Added missing prototypes.

	* raster/raster.c (raster_rebuild_tables): Rebuilds the pixel
	and refresh tables. This is needed when the palette of the
	hardware changes.

	* raster/raster.h (raster_rebuild_tables): Added prototype.

2000-08-01  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.4.

	* arch/win32/res.h: Fixed drive type defines.

	* arch/win32/uidrive.c (init_dialog): Fixed drive number.

	* arch/win32/uisnapshot.c (hook_save_snapshot): Fixed warning.

	* resources.c, resources.h (resources_set_sprintf,
	resources_get_sprintf): New functions.

	* arch/unix/uisettings.c, arch/win32/uidrive.c: Use new
	resource functions.

	* fsdevice.c: Unified function for all drives.

	* arch/unix/x11/xaw/ui.c (ui_open_canvas_window): Fixed typos.

2000-07-31  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/archdep.c: fixed an allocation problem in
	archdep_create_mutex_sem, added trigger_shutdown to brek64,
	archdep_startup_log_error uses xmvsprint now
   
	* arch/os2/console.c: console_out uses xmvsprintf now.
 
	* arch/os2/dialogs/dialogs.rc: small layout changes
 
	* arch/os2/dialogs/dlg-contents.c: uses xmsprintf now.
 
	* arch/os2/dialogs/dlg-drive.c: uses xmsprintf now.
 
	* arch/os2/doc/Vice_for_OS2.txt: added new cmdline parameters,
	and ToDo
 
	* arch/os2/icons/xvic.ICO: added
 
	* arch/os2/install.cmd: added the remark
 
	* arch/os2/joystick.c: can dtermin number of joysticks now
 
	* arch/os2/joystick.h: added new joystick definitions
 
	* arch/os2/kbd/kbd-c610.c, kbd-pet.c, kbd-vic20.c: deleted old
	kbd mapping
 
	* arch/os2/kbd/proc.c: deleted an output statement
 
	* arch/os2/makedist.cmd: some amall changes, os2*.vkm added,
	default.vkm deleted
 
	* arch/os2/ui.c: uses xmvsprintf now.
 
	* arch/os2/vac++/incl/c128.icc: daa.c added
 
	* arch/os2/vac++/incl/kbd.icc: removed kbd-c64.c

	* arch/os2/vac++/lpng.icc: added 

	* arch/os2/vac++/lzlib.icc: added 
 
	* arch/os2/vac++/RESID.ICC: changed version number
 
	* arch/os2/vac++/*.ICC: changed searchpath for zlib and
	lnpng106
 
	* arch/os2/vac++/X64.ICC: added kbd-c64.c
 
	* arch/os2/Vice2/VIC20/os2.vkm: added 
 
	* arch/os2/vsyncarch.c: uses xmsprintf now
 
	* utils.c: removed this strange construct for
	xmvsprintf_do_div. VAC++ cannot compile it

2000-07-30  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.3.

	* c128/z80.c: Fixed opcodes and added some missing ones.

	* arch/unix/x11/xaw/ui.c, arch/unix/x11/gnome/ui.c,
	arch/unix/ui.h (ui_select_file): Changed API.

	* arch/msdos/tuiimagebrowser.c (tui_image_browser): Also
	return number of selected file.
        * arch/msdos/tuifs.c (tui_file_selector): Changed likewise.

	* arch/msdos/c128ui.c, arch/msdos/c610ui.c,
	arch/msdos/c64ui.c, arch/msdos/menudefs.c, arch/msdos/petui.c,
	arch/msdos/uiattach.c, arch/msdos/uisnapshot.c,
	arch/msdos/vic20ui.c: Changed to new file selector API.

	* arch/msdos/menudefs.c, arch/msdos/tui_backend.c,
	arch/msdos/tui.c, arch/msdos/ui.c, c1541.c: Use `xmsprintf',
	`xmvsprintf' or `stralloc' instead of using random length
	arrays.

	* vdrive/vdrive-command.c, vdrive/vdrive-command.h
	(vdrive_command_execute): Command is `const'.

	* arch/unix/uisettings.c, arch/unix/x11/xaw/uimenu.c,
	vic20/vic20mem.c, sound.c, arch/unix/x11/gnome/uimenu.c:
	Do not use `alloca()'.

	* arch/unix/x11/x11menu.c, arch/unix/x11/x11menu.h: New files.

	* arch/unix/x11/xaw/uimenu.c, arch/unix/x11/gnome/uimenu.c:
	arch/unix/x11/xaw/uimenu.h, arch/unix/x11/gnome/uimenu.h:
	Moved common stuff a level higher.

	* Makefile.am: Removed `@ALLOCA@'.

	* vice.h: Removed `alloca' compatibility cruft.

	* arch/unix/uicommands.c, arch/unix/uisettings.c: Do not use
	`PATH_VAR' and `GET_PATH_MAX'.

2000-07-28  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.2.

	* raster/raster-cache.c (raster_cache_init): Clear cache for
	sprites 1..7 too.

	* utils.c, utils.h (stralloc): Bail out on NULL pointer.
	(xmsprintf): New function.

	* vdrive/vdrive-iec.c: Added debugging info.

	* c128/daa.c, c128/daa.h: New files.

	* c128/z80.c: Fixed opcodes and added some missing ones.

	* autostart.c, arch/unix/uicommands.c, arch/unix/uisettings.c,
	cmdline.c, arch/unix/vsidui.c, arch/unix/x11/xaw/uimenu.c,
	arch/unix/x11/xaw/ui.c: Use `xmsprintf', `xmvsprintf' or
	`stralloc' instead of using random length arrays.

2000-07-27  Andreas Dehmel  <dehmel@forwiss.tu-muenchen.de>

	* arch/riscos/ui.c, arch/riscos/uimsgwin.{c,h}: added support
	for WIMP Null events of message windows.

2000-07-26  Andreas Boose  <boose@linux.rz.fh-hannover.de>

	* Version 1.5.1.

	* c128/z80.c: Fixed opcodes.

	* c128/z80mem.c (z80mem_initialize): Removed color RAM from
	$1000-$13FF IO space.

2000-07-26  Thomas Bretz  <tbretz@physik.tu-muenchen.de>

	* arch/os2/archdep.c: set lower priority for main thread

	* arch/os2/kbd/parse.c: added support for CLEAR and KSYM/KSCODE

	* arch/os2/kbd/proc.c: added base support for symbolic mapping

	* arch/os2/vac++/lpng.icc: added

	* arch/os2/vac++/lzlib.icc: added

	* arch/os2/video.c: added video/vdc_free, higher priority for
	canvas mainloop

	* arch/os2/vsyncarch.c: removed video_free

	* vdc/vdc.[ch]: added vdc_free

